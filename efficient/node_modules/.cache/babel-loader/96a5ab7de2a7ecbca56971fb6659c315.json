{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultSeriesFormatTooltip = defaultSeriesFormatTooltip;\n\nvar _util = require(\"zrender/lib/core/util.js\");\n\nvar _tooltipMarkup = require(\"./tooltipMarkup.js\");\n\nvar _dataProvider = require(\"../../data/helper/dataProvider.js\");\n\nvar _model = require(\"../../util/model.js\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction defaultSeriesFormatTooltip(opt) {\n  var series = opt.series;\n  var dataIndex = opt.dataIndex;\n  var multipleSeries = opt.multipleSeries;\n  var data = series.getData();\n  var tooltipDims = data.mapDimensionsAll('defaultedTooltip');\n  var tooltipDimLen = tooltipDims.length;\n  var value = series.getRawValue(dataIndex);\n  var isValueArr = (0, _util.isArray)(value);\n  var markerColor = (0, _tooltipMarkup.retrieveVisualColorForTooltipMarker)(series, dataIndex); // Complicated rule for pretty tooltip.\n\n  var inlineValue;\n  var inlineValueType;\n  var subBlocks;\n  var sortParam;\n\n  if (tooltipDimLen > 1 || isValueArr && !tooltipDimLen) {\n    var formatArrResult = formatTooltipArrayValue(value, series, dataIndex, tooltipDims, markerColor);\n    inlineValue = formatArrResult.inlineValues;\n    inlineValueType = formatArrResult.inlineValueTypes;\n    subBlocks = formatArrResult.blocks; // Only support tooltip sort by the first inline value. It's enough in most cases.\n\n    sortParam = formatArrResult.inlineValues[0];\n  } else if (tooltipDimLen) {\n    var dimInfo = data.getDimensionInfo(tooltipDims[0]);\n    sortParam = inlineValue = (0, _dataProvider.retrieveRawValue)(data, dataIndex, tooltipDims[0]);\n    inlineValueType = dimInfo.type;\n  } else {\n    sortParam = inlineValue = isValueArr ? value[0] : value;\n  } // Do not show generated series name. It might not be readable.\n\n\n  var seriesNameSpecified = (0, _model.isNameSpecified)(series);\n  var seriesName = seriesNameSpecified && series.name || '';\n  var itemName = data.getName(dataIndex);\n  var inlineName = multipleSeries ? seriesName : itemName;\n  return (0, _tooltipMarkup.createTooltipMarkup)('section', {\n    header: seriesName,\n    // When series name not specified, do not show a header line with only '-'.\n    // This case alway happen in tooltip.trigger: 'item'.\n    noHeader: multipleSeries || !seriesNameSpecified,\n    sortParam: sortParam,\n    blocks: [(0, _tooltipMarkup.createTooltipMarkup)('nameValue', {\n      markerType: 'item',\n      markerColor: markerColor,\n      // Do not mix display seriesName and itemName in one tooltip,\n      // which might confuses users.\n      name: inlineName,\n      // name dimension might be auto assigned, where the name might\n      // be not readable. So we check trim here.\n      noName: !(0, _util.trim)(inlineName),\n      value: inlineValue,\n      valueType: inlineValueType\n    })].concat(subBlocks || [])\n  });\n}\n\nfunction formatTooltipArrayValue(value, series, dataIndex, tooltipDims, colorStr) {\n  // check: category-no-encode-has-axis-data in dataset.html\n  var data = series.getData();\n  var isValueMultipleLine = (0, _util.reduce)(value, function (isValueMultipleLine, val, idx) {\n    var dimItem = data.getDimensionInfo(idx);\n    return isValueMultipleLine = isValueMultipleLine || dimItem && dimItem.tooltip !== false && dimItem.displayName != null;\n  }, false);\n  var inlineValues = [];\n  var inlineValueTypes = [];\n  var blocks = [];\n  tooltipDims.length ? (0, _util.each)(tooltipDims, function (dim) {\n    setEachItem((0, _dataProvider.retrieveRawValue)(data, dataIndex, dim), dim);\n  }) // By default, all dims is used on tooltip.\n  : (0, _util.each)(value, setEachItem);\n\n  function setEachItem(val, dim) {\n    var dimInfo = data.getDimensionInfo(dim); // If `dimInfo.tooltip` is not set, show tooltip.\n\n    if (!dimInfo || dimInfo.otherDims.tooltip === false) {\n      return;\n    }\n\n    if (isValueMultipleLine) {\n      blocks.push((0, _tooltipMarkup.createTooltipMarkup)('nameValue', {\n        markerType: 'subItem',\n        markerColor: colorStr,\n        name: dimInfo.displayName,\n        value: val,\n        valueType: dimInfo.type\n      }));\n    } else {\n      inlineValues.push(val);\n      inlineValueTypes.push(dimInfo.type);\n    }\n  }\n\n  return {\n    inlineValues: inlineValues,\n    inlineValueTypes: inlineValueTypes,\n    blocks: blocks\n  };\n}","map":{"version":3,"names":["defaultSeriesFormatTooltip","opt","series","dataIndex","multipleSeries","data","getData","tooltipDims","mapDimensionsAll","tooltipDimLen","length","value","getRawValue","isValueArr","isArray","markerColor","retrieveVisualColorForTooltipMarker","inlineValue","inlineValueType","subBlocks","sortParam","formatArrResult","formatTooltipArrayValue","inlineValues","inlineValueTypes","blocks","dimInfo","getDimensionInfo","retrieveRawValue","type","seriesNameSpecified","isNameSpecified","seriesName","name","itemName","getName","inlineName","createTooltipMarkup","header","noHeader","markerType","noName","trim","valueType","concat","colorStr","isValueMultipleLine","reduce","val","idx","dimItem","tooltip","displayName","each","dim","setEachItem","otherDims","push"],"sources":["C:/Users/Z/Desktop/efficient/node_modules/echarts/lib/component/tooltip/seriesFormatTooltip.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { trim, isArray, each, reduce } from 'zrender/lib/core/util.js';\nimport { retrieveVisualColorForTooltipMarker, createTooltipMarkup } from './tooltipMarkup.js';\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isNameSpecified } from '../../util/model.js';\nexport function defaultSeriesFormatTooltip(opt) {\n  var series = opt.series;\n  var dataIndex = opt.dataIndex;\n  var multipleSeries = opt.multipleSeries;\n  var data = series.getData();\n  var tooltipDims = data.mapDimensionsAll('defaultedTooltip');\n  var tooltipDimLen = tooltipDims.length;\n  var value = series.getRawValue(dataIndex);\n  var isValueArr = isArray(value);\n  var markerColor = retrieveVisualColorForTooltipMarker(series, dataIndex); // Complicated rule for pretty tooltip.\n\n  var inlineValue;\n  var inlineValueType;\n  var subBlocks;\n  var sortParam;\n\n  if (tooltipDimLen > 1 || isValueArr && !tooltipDimLen) {\n    var formatArrResult = formatTooltipArrayValue(value, series, dataIndex, tooltipDims, markerColor);\n    inlineValue = formatArrResult.inlineValues;\n    inlineValueType = formatArrResult.inlineValueTypes;\n    subBlocks = formatArrResult.blocks; // Only support tooltip sort by the first inline value. It's enough in most cases.\n\n    sortParam = formatArrResult.inlineValues[0];\n  } else if (tooltipDimLen) {\n    var dimInfo = data.getDimensionInfo(tooltipDims[0]);\n    sortParam = inlineValue = retrieveRawValue(data, dataIndex, tooltipDims[0]);\n    inlineValueType = dimInfo.type;\n  } else {\n    sortParam = inlineValue = isValueArr ? value[0] : value;\n  } // Do not show generated series name. It might not be readable.\n\n\n  var seriesNameSpecified = isNameSpecified(series);\n  var seriesName = seriesNameSpecified && series.name || '';\n  var itemName = data.getName(dataIndex);\n  var inlineName = multipleSeries ? seriesName : itemName;\n  return createTooltipMarkup('section', {\n    header: seriesName,\n    // When series name not specified, do not show a header line with only '-'.\n    // This case alway happen in tooltip.trigger: 'item'.\n    noHeader: multipleSeries || !seriesNameSpecified,\n    sortParam: sortParam,\n    blocks: [createTooltipMarkup('nameValue', {\n      markerType: 'item',\n      markerColor: markerColor,\n      // Do not mix display seriesName and itemName in one tooltip,\n      // which might confuses users.\n      name: inlineName,\n      // name dimension might be auto assigned, where the name might\n      // be not readable. So we check trim here.\n      noName: !trim(inlineName),\n      value: inlineValue,\n      valueType: inlineValueType\n    })].concat(subBlocks || [])\n  });\n}\n\nfunction formatTooltipArrayValue(value, series, dataIndex, tooltipDims, colorStr) {\n  // check: category-no-encode-has-axis-data in dataset.html\n  var data = series.getData();\n  var isValueMultipleLine = reduce(value, function (isValueMultipleLine, val, idx) {\n    var dimItem = data.getDimensionInfo(idx);\n    return isValueMultipleLine = isValueMultipleLine || dimItem && dimItem.tooltip !== false && dimItem.displayName != null;\n  }, false);\n  var inlineValues = [];\n  var inlineValueTypes = [];\n  var blocks = [];\n  tooltipDims.length ? each(tooltipDims, function (dim) {\n    setEachItem(retrieveRawValue(data, dataIndex, dim), dim);\n  }) // By default, all dims is used on tooltip.\n  : each(value, setEachItem);\n\n  function setEachItem(val, dim) {\n    var dimInfo = data.getDimensionInfo(dim); // If `dimInfo.tooltip` is not set, show tooltip.\n\n    if (!dimInfo || dimInfo.otherDims.tooltip === false) {\n      return;\n    }\n\n    if (isValueMultipleLine) {\n      blocks.push(createTooltipMarkup('nameValue', {\n        markerType: 'subItem',\n        markerColor: colorStr,\n        name: dimInfo.displayName,\n        value: val,\n        valueType: dimInfo.type\n      }));\n    } else {\n      inlineValues.push(val);\n      inlineValueTypes.push(dimInfo.type);\n    }\n  }\n\n  return {\n    inlineValues: inlineValues,\n    inlineValueTypes: inlineValueTypes,\n    blocks: blocks\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}