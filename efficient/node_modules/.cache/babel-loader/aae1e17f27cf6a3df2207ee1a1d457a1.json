{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\n\nvar _interopRequireWildcard = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireWildcard.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _tslib = require(\"tslib\");\n\nvar numberUtil = _interopRequireWildcard(require(\"../util/number.js\"));\n\nvar _time = require(\"../util/time.js\");\n\nvar scaleHelper = _interopRequireWildcard(require(\"./helper.js\"));\n\nvar _Interval = _interopRequireDefault(require(\"./Interval.js\"));\n\nvar _Scale = _interopRequireDefault(require(\"./Scale.js\"));\n\nvar _log = require(\"../util/log.js\");\n\nvar _util = require(\"zrender/lib/core/util.js\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embeded for some of the code in this file:\n* The \"scaleLevels\" was originally copied from \"d3.js\" with some\n* modifications made for this project.\n* (See more details in the comment on the definition of \"scaleLevels\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\n// [About UTC and local time zone]:\n// In most cases, `number.parseDate` will treat input data string as local time\n// (except time zone is specified in time string). And `format.formateTime` returns\n// local time by default. option.useUTC is false by default. This design have\n// concidered these common case:\n// (1) Time that is persistent in server is in UTC, but it is needed to be diplayed\n// in local time by default.\n// (2) By default, the input data string (e.g., '2011-01-02') should be displayed\n// as its original time, without any time difference.\n// FIXME 公用？\nvar bisect = function (a, x, lo, hi) {\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n\n    if (a[mid][1] < x) {\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n\n  return lo;\n};\n\nvar TimeScale =\n/** @class */\nfunction (_super) {\n  (0, _tslib.__extends)(TimeScale, _super);\n\n  function TimeScale(settings) {\n    var _this = _super.call(this, settings) || this;\n\n    _this.type = 'time';\n    return _this;\n  }\n  /**\n   * Get label is mainly for other components like dataZoom, tooltip.\n   */\n\n\n  TimeScale.prototype.getLabel = function (tick) {\n    var useUTC = this.getSetting('useUTC');\n    return (0, _time.format)(tick.value, _time.fullLeveledFormatter[(0, _time.getDefaultFormatPrecisionOfInterval)((0, _time.getPrimaryTimeUnit)(this._minLevelUnit))] || _time.fullLeveledFormatter.second, useUTC, this.getSetting('locale'));\n  };\n\n  TimeScale.prototype.getFormattedLabel = function (tick, idx, labelFormatter) {\n    var isUTC = this.getSetting('useUTC');\n    var lang = this.getSetting('locale');\n    return (0, _time.leveledFormat)(tick, idx, labelFormatter, lang, isUTC);\n  };\n  /**\n   * @override\n   */\n\n\n  TimeScale.prototype.getTicks = function () {\n    var interval = this._interval;\n    var extent = this._extent;\n    var ticks = []; // If interval is 0, return [];\n\n    if (!interval) {\n      return ticks;\n    }\n\n    ticks.push({\n      value: extent[0],\n      level: 0\n    });\n    var useUTC = this.getSetting('useUTC');\n    var innerTicks = getIntervalTicks(this._minLevelUnit, this._approxInterval, useUTC, extent);\n    ticks = ticks.concat(innerTicks);\n    ticks.push({\n      value: extent[1],\n      level: 0\n    });\n    return ticks;\n  };\n\n  TimeScale.prototype.calcNiceExtent = function (opt) {\n    var extent = this._extent; // If extent start and end are same, expand them\n\n    if (extent[0] === extent[1]) {\n      // Expand extent\n      extent[0] -= _time.ONE_DAY;\n      extent[1] += _time.ONE_DAY;\n    } // If there are no data and extent are [Infinity, -Infinity]\n\n\n    if (extent[1] === -Infinity && extent[0] === Infinity) {\n      var d = new Date();\n      extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      extent[0] = extent[1] - _time.ONE_DAY;\n    }\n\n    this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\n  };\n\n  TimeScale.prototype.calcNiceTicks = function (approxTickNum, minInterval, maxInterval) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n    this._approxInterval = span / approxTickNum;\n\n    if (minInterval != null && this._approxInterval < minInterval) {\n      this._approxInterval = minInterval;\n    }\n\n    if (maxInterval != null && this._approxInterval > maxInterval) {\n      this._approxInterval = maxInterval;\n    }\n\n    var scaleIntervalsLen = scaleIntervals.length;\n    var idx = Math.min(bisect(scaleIntervals, this._approxInterval, 0, scaleIntervalsLen), scaleIntervalsLen - 1); // Interval that can be used to calculate ticks\n\n    this._interval = scaleIntervals[idx][1]; // Min level used when picking ticks from top down.\n    // We check one more level to avoid the ticks are to sparse in some case.\n\n    this._minLevelUnit = scaleIntervals[Math.max(idx - 1, 0)][0];\n  };\n\n  TimeScale.prototype.parse = function (val) {\n    // val might be float.\n    return (0, _util.isNumber)(val) ? val : +numberUtil.parseDate(val);\n  };\n\n  TimeScale.prototype.contain = function (val) {\n    return scaleHelper.contain(this.parse(val), this._extent);\n  };\n\n  TimeScale.prototype.normalize = function (val) {\n    return scaleHelper.normalize(this.parse(val), this._extent);\n  };\n\n  TimeScale.prototype.scale = function (val) {\n    return scaleHelper.scale(val, this._extent);\n  };\n\n  TimeScale.type = 'time';\n  return TimeScale;\n}(_Interval.default);\n/**\n * This implementation was originally copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/time/scale.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n */\n\n\nvar scaleIntervals = [// Format                           interval\n['second', _time.ONE_SECOND], ['minute', _time.ONE_MINUTE], ['hour', _time.ONE_HOUR], ['quarter-day', _time.ONE_HOUR * 6], ['half-day', _time.ONE_HOUR * 12], ['day', _time.ONE_DAY * 1.2], ['half-week', _time.ONE_DAY * 3.5], ['week', _time.ONE_DAY * 7], ['month', _time.ONE_DAY * 31], ['quarter', _time.ONE_DAY * 95], ['half-year', _time.ONE_YEAR / 2], ['year', _time.ONE_YEAR] // 1Y\n];\n\nfunction isUnitValueSame(unit, valueA, valueB, isUTC) {\n  var dateA = numberUtil.parseDate(valueA);\n  var dateB = numberUtil.parseDate(valueB);\n\n  var isSame = function (unit) {\n    return (0, _time.getUnitValue)(dateA, unit, isUTC) === (0, _time.getUnitValue)(dateB, unit, isUTC);\n  };\n\n  var isSameYear = function () {\n    return isSame('year');\n  }; // const isSameHalfYear = () => isSameYear() && isSame('half-year');\n  // const isSameQuater = () => isSameYear() && isSame('quarter');\n\n\n  var isSameMonth = function () {\n    return isSameYear() && isSame('month');\n  };\n\n  var isSameDay = function () {\n    return isSameMonth() && isSame('day');\n  }; // const isSameHalfDay = () => isSameDay() && isSame('half-day');\n\n\n  var isSameHour = function () {\n    return isSameDay() && isSame('hour');\n  };\n\n  var isSameMinute = function () {\n    return isSameHour() && isSame('minute');\n  };\n\n  var isSameSecond = function () {\n    return isSameMinute() && isSame('second');\n  };\n\n  var isSameMilliSecond = function () {\n    return isSameSecond() && isSame('millisecond');\n  };\n\n  switch (unit) {\n    case 'year':\n      return isSameYear();\n\n    case 'month':\n      return isSameMonth();\n\n    case 'day':\n      return isSameDay();\n\n    case 'hour':\n      return isSameHour();\n\n    case 'minute':\n      return isSameMinute();\n\n    case 'second':\n      return isSameSecond();\n\n    case 'millisecond':\n      return isSameMilliSecond();\n  }\n} // const primaryUnitGetters = {\n//     year: fullYearGetterName(),\n//     month: monthGetterName(),\n//     day: dateGetterName(),\n//     hour: hoursGetterName(),\n//     minute: minutesGetterName(),\n//     second: secondsGetterName(),\n//     millisecond: millisecondsGetterName()\n// };\n// const primaryUnitUTCGetters = {\n//     year: fullYearGetterName(true),\n//     month: monthGetterName(true),\n//     day: dateGetterName(true),\n//     hour: hoursGetterName(true),\n//     minute: minutesGetterName(true),\n//     second: secondsGetterName(true),\n//     millisecond: millisecondsGetterName(true)\n// };\n// function moveTick(date: Date, unitName: TimeUnit, step: number, isUTC: boolean) {\n//     step = step || 1;\n//     switch (getPrimaryTimeUnit(unitName)) {\n//         case 'year':\n//             date[fullYearSetterName(isUTC)](date[fullYearGetterName(isUTC)]() + step);\n//             break;\n//         case 'month':\n//             date[monthSetterName(isUTC)](date[monthGetterName(isUTC)]() + step);\n//             break;\n//         case 'day':\n//             date[dateSetterName(isUTC)](date[dateGetterName(isUTC)]() + step);\n//             break;\n//         case 'hour':\n//             date[hoursSetterName(isUTC)](date[hoursGetterName(isUTC)]() + step);\n//             break;\n//         case 'minute':\n//             date[minutesSetterName(isUTC)](date[minutesGetterName(isUTC)]() + step);\n//             break;\n//         case 'second':\n//             date[secondsSetterName(isUTC)](date[secondsGetterName(isUTC)]() + step);\n//             break;\n//         case 'millisecond':\n//             date[millisecondsSetterName(isUTC)](date[millisecondsGetterName(isUTC)]() + step);\n//             break;\n//     }\n//     return date.getTime();\n// }\n// const DATE_INTERVALS = [[8, 7.5], [4, 3.5], [2, 1.5]];\n// const MONTH_INTERVALS = [[6, 5.5], [3, 2.5], [2, 1.5]];\n// const MINUTES_SECONDS_INTERVALS = [[30, 30], [20, 20], [15, 15], [10, 10], [5, 5], [2, 2]];\n\n\nfunction getDateInterval(approxInterval, daysInMonth) {\n  approxInterval /= _time.ONE_DAY;\n  return approxInterval > 16 ? 16 // Math.floor(daysInMonth / 2) + 1  // In this case we only want one tick betwen two month.\n  : approxInterval > 7.5 ? 7 // TODO week 7 or day 8?\n  : approxInterval > 3.5 ? 4 : approxInterval > 1.5 ? 2 : 1;\n}\n\nfunction getMonthInterval(approxInterval) {\n  var APPROX_ONE_MONTH = 30 * _time.ONE_DAY;\n  approxInterval /= APPROX_ONE_MONTH;\n  return approxInterval > 6 ? 6 : approxInterval > 3 ? 3 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getHourInterval(approxInterval) {\n  approxInterval /= _time.ONE_HOUR;\n  return approxInterval > 12 ? 12 : approxInterval > 6 ? 6 : approxInterval > 3.5 ? 4 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getMinutesAndSecondsInterval(approxInterval, isMinutes) {\n  approxInterval /= isMinutes ? _time.ONE_MINUTE : _time.ONE_SECOND;\n  return approxInterval > 30 ? 30 : approxInterval > 20 ? 20 : approxInterval > 15 ? 15 : approxInterval > 10 ? 10 : approxInterval > 5 ? 5 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getMillisecondsInterval(approxInterval) {\n  return numberUtil.nice(approxInterval, true);\n}\n\nfunction getFirstTimestampOfUnit(date, unitName, isUTC) {\n  var outDate = new Date(date);\n\n  switch ((0, _time.getPrimaryTimeUnit)(unitName)) {\n    case 'year':\n    case 'month':\n      outDate[(0, _time.monthSetterName)(isUTC)](0);\n\n    case 'day':\n      outDate[(0, _time.dateSetterName)(isUTC)](1);\n\n    case 'hour':\n      outDate[(0, _time.hoursSetterName)(isUTC)](0);\n\n    case 'minute':\n      outDate[(0, _time.minutesSetterName)(isUTC)](0);\n\n    case 'second':\n      outDate[(0, _time.secondsSetterName)(isUTC)](0);\n      outDate[(0, _time.millisecondsSetterName)(isUTC)](0);\n  }\n\n  return outDate.getTime();\n}\n\nfunction getIntervalTicks(bottomUnitName, approxInterval, isUTC, extent) {\n  var safeLimit = 10000;\n  var unitNames = _time.timeUnits;\n  var iter = 0;\n\n  function addTicksInSpan(interval, minTimestamp, maxTimestamp, getMethodName, setMethodName, isDate, out) {\n    var date = new Date(minTimestamp);\n    var dateTime = minTimestamp;\n    var d = date[getMethodName](); // if (isDate) {\n    //     d -= 1; // Starts with 0;   PENDING\n    // }\n\n    while (dateTime < maxTimestamp && dateTime <= extent[1]) {\n      out.push({\n        value: dateTime\n      });\n      d += interval;\n      date[setMethodName](d);\n      dateTime = date.getTime();\n    } // This extra tick is for calcuating ticks of next level. Will not been added to the final result\n\n\n    out.push({\n      value: dateTime,\n      notAdd: true\n    });\n  }\n\n  function addLevelTicks(unitName, lastLevelTicks, levelTicks) {\n    var newAddedTicks = [];\n    var isFirstLevel = !lastLevelTicks.length;\n\n    if (isUnitValueSame((0, _time.getPrimaryTimeUnit)(unitName), extent[0], extent[1], isUTC)) {\n      return;\n    }\n\n    if (isFirstLevel) {\n      lastLevelTicks = [{\n        // TODO Optimize. Not include so may ticks.\n        value: getFirstTimestampOfUnit(new Date(extent[0]), unitName, isUTC)\n      }, {\n        value: extent[1]\n      }];\n    }\n\n    for (var i = 0; i < lastLevelTicks.length - 1; i++) {\n      var startTick = lastLevelTicks[i].value;\n      var endTick = lastLevelTicks[i + 1].value;\n\n      if (startTick === endTick) {\n        continue;\n      }\n\n      var interval = void 0;\n      var getterName = void 0;\n      var setterName = void 0;\n      var isDate = false;\n\n      switch (unitName) {\n        case 'year':\n          interval = Math.max(1, Math.round(approxInterval / _time.ONE_DAY / 365));\n          getterName = (0, _time.fullYearGetterName)(isUTC);\n          setterName = (0, _time.fullYearSetterName)(isUTC);\n          break;\n\n        case 'half-year':\n        case 'quarter':\n        case 'month':\n          interval = getMonthInterval(approxInterval);\n          getterName = (0, _time.monthGetterName)(isUTC);\n          setterName = (0, _time.monthSetterName)(isUTC);\n          break;\n\n        case 'week': // PENDING If week is added. Ignore day.\n\n        case 'half-week':\n        case 'day':\n          interval = getDateInterval(approxInterval, 31); // Use 32 days and let interval been 16\n\n          getterName = (0, _time.dateGetterName)(isUTC);\n          setterName = (0, _time.dateSetterName)(isUTC);\n          isDate = true;\n          break;\n\n        case 'half-day':\n        case 'quarter-day':\n        case 'hour':\n          interval = getHourInterval(approxInterval);\n          getterName = (0, _time.hoursGetterName)(isUTC);\n          setterName = (0, _time.hoursSetterName)(isUTC);\n          break;\n\n        case 'minute':\n          interval = getMinutesAndSecondsInterval(approxInterval, true);\n          getterName = (0, _time.minutesGetterName)(isUTC);\n          setterName = (0, _time.minutesSetterName)(isUTC);\n          break;\n\n        case 'second':\n          interval = getMinutesAndSecondsInterval(approxInterval, false);\n          getterName = (0, _time.secondsGetterName)(isUTC);\n          setterName = (0, _time.secondsSetterName)(isUTC);\n          break;\n\n        case 'millisecond':\n          interval = getMillisecondsInterval(approxInterval);\n          getterName = (0, _time.millisecondsGetterName)(isUTC);\n          setterName = (0, _time.millisecondsSetterName)(isUTC);\n          break;\n      }\n\n      addTicksInSpan(interval, startTick, endTick, getterName, setterName, isDate, newAddedTicks);\n\n      if (unitName === 'year' && levelTicks.length > 1 && i === 0) {\n        // Add nearest years to the left extent.\n        levelTicks.unshift({\n          value: levelTicks[0].value - interval\n        });\n      }\n    }\n\n    for (var i = 0; i < newAddedTicks.length; i++) {\n      levelTicks.push(newAddedTicks[i]);\n    } // newAddedTicks.length && console.log(unitName, newAddedTicks);\n\n\n    return newAddedTicks;\n  }\n\n  var levelsTicks = [];\n  var currentLevelTicks = [];\n  var tickCount = 0;\n  var lastLevelTickCount = 0;\n\n  for (var i = 0; i < unitNames.length && iter++ < safeLimit; ++i) {\n    var primaryTimeUnit = (0, _time.getPrimaryTimeUnit)(unitNames[i]);\n\n    if (!(0, _time.isPrimaryTimeUnit)(unitNames[i])) {\n      // TODO\n      continue;\n    }\n\n    addLevelTicks(unitNames[i], levelsTicks[levelsTicks.length - 1] || [], currentLevelTicks);\n    var nextPrimaryTimeUnit = unitNames[i + 1] ? (0, _time.getPrimaryTimeUnit)(unitNames[i + 1]) : null;\n\n    if (primaryTimeUnit !== nextPrimaryTimeUnit) {\n      if (currentLevelTicks.length) {\n        lastLevelTickCount = tickCount; // Remove the duplicate so the tick count can be precisely.\n\n        currentLevelTicks.sort(function (a, b) {\n          return a.value - b.value;\n        });\n        var levelTicksRemoveDuplicated = [];\n\n        for (var i_1 = 0; i_1 < currentLevelTicks.length; ++i_1) {\n          var tickValue = currentLevelTicks[i_1].value;\n\n          if (i_1 === 0 || currentLevelTicks[i_1 - 1].value !== tickValue) {\n            levelTicksRemoveDuplicated.push(currentLevelTicks[i_1]);\n\n            if (tickValue >= extent[0] && tickValue <= extent[1]) {\n              tickCount++;\n            }\n          }\n        }\n\n        var targetTickNum = (extent[1] - extent[0]) / approxInterval; // Added too much in this level and not too less in last level\n\n        if (tickCount > targetTickNum * 1.5 && lastLevelTickCount > targetTickNum / 1.5) {\n          break;\n        } // Only treat primary time unit as one level.\n\n\n        levelsTicks.push(levelTicksRemoveDuplicated);\n\n        if (tickCount > targetTickNum || bottomUnitName === unitNames[i]) {\n          break;\n        }\n      } // Reset if next unitName is primary\n\n\n      currentLevelTicks = [];\n    }\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (iter >= safeLimit) {\n      (0, _log.warn)('Exceed safe limit.');\n    }\n  }\n\n  var levelsTicksInExtent = (0, _util.filter)((0, _util.map)(levelsTicks, function (levelTicks) {\n    return (0, _util.filter)(levelTicks, function (tick) {\n      return tick.value >= extent[0] && tick.value <= extent[1] && !tick.notAdd;\n    });\n  }), function (levelTicks) {\n    return levelTicks.length > 0;\n  });\n  var ticks = [];\n  var maxLevel = levelsTicksInExtent.length - 1;\n\n  for (var i = 0; i < levelsTicksInExtent.length; ++i) {\n    var levelTicks = levelsTicksInExtent[i];\n\n    for (var k = 0; k < levelTicks.length; ++k) {\n      ticks.push({\n        value: levelTicks[k].value,\n        level: maxLevel - i\n      });\n    }\n  }\n\n  ticks.sort(function (a, b) {\n    return a.value - b.value;\n  }); // Remove duplicates\n\n  var result = [];\n\n  for (var i = 0; i < ticks.length; ++i) {\n    if (i === 0 || ticks[i].value !== ticks[i - 1].value) {\n      result.push(ticks[i]);\n    }\n  }\n\n  return result;\n}\n\n_Scale.default.registerClass(TimeScale);\n\nvar _default = TimeScale;\nexports.default = _default;","map":{"version":3,"names":["bisect","a","x","lo","hi","mid","TimeScale","_super","__extends","settings","_this","call","type","prototype","getLabel","tick","useUTC","getSetting","format","value","fullLeveledFormatter","getDefaultFormatPrecisionOfInterval","getPrimaryTimeUnit","_minLevelUnit","second","getFormattedLabel","idx","labelFormatter","isUTC","lang","leveledFormat","getTicks","interval","_interval","extent","_extent","ticks","push","level","innerTicks","getIntervalTicks","_approxInterval","concat","calcNiceExtent","opt","ONE_DAY","Infinity","d","Date","getFullYear","getMonth","getDate","calcNiceTicks","splitNumber","minInterval","maxInterval","approxTickNum","span","scaleIntervalsLen","scaleIntervals","length","Math","min","max","parse","val","isNumber","numberUtil","parseDate","contain","scaleHelper","normalize","scale","IntervalScale","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_YEAR","isUnitValueSame","unit","valueA","valueB","dateA","dateB","isSame","getUnitValue","isSameYear","isSameMonth","isSameDay","isSameHour","isSameMinute","isSameSecond","isSameMilliSecond","getDateInterval","approxInterval","daysInMonth","getMonthInterval","APPROX_ONE_MONTH","getHourInterval","getMinutesAndSecondsInterval","isMinutes","getMillisecondsInterval","nice","getFirstTimestampOfUnit","date","unitName","outDate","monthSetterName","dateSetterName","hoursSetterName","minutesSetterName","secondsSetterName","millisecondsSetterName","getTime","bottomUnitName","safeLimit","unitNames","timeUnits","iter","addTicksInSpan","minTimestamp","maxTimestamp","getMethodName","setMethodName","isDate","out","dateTime","notAdd","addLevelTicks","lastLevelTicks","levelTicks","newAddedTicks","isFirstLevel","i","startTick","endTick","getterName","setterName","round","fullYearGetterName","fullYearSetterName","monthGetterName","dateGetterName","hoursGetterName","minutesGetterName","secondsGetterName","millisecondsGetterName","unshift","levelsTicks","currentLevelTicks","tickCount","lastLevelTickCount","primaryTimeUnit","isPrimaryTimeUnit","nextPrimaryTimeUnit","sort","b","levelTicksRemoveDuplicated","i_1","tickValue","targetTickNum","process","env","NODE_ENV","warn","levelsTicksInExtent","filter","map","maxLevel","k","result","Scale","registerClass"],"sources":["C:/Users/Z/Desktop/efficient/node_modules/echarts/lib/scale/Time.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/*\n* A third-party license is embeded for some of the code in this file:\n* The \"scaleLevels\" was originally copied from \"d3.js\" with some\n* modifications made for this project.\n* (See more details in the comment on the definition of \"scaleLevels\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\n// [About UTC and local time zone]:\n// In most cases, `number.parseDate` will treat input data string as local time\n// (except time zone is specified in time string). And `format.formateTime` returns\n// local time by default. option.useUTC is false by default. This design have\n// concidered these common case:\n// (1) Time that is persistent in server is in UTC, but it is needed to be diplayed\n// in local time by default.\n// (2) By default, the input data string (e.g., '2011-01-02') should be displayed\n// as its original time, without any time difference.\n\nimport * as numberUtil from '../util/number.js';\nimport { ONE_SECOND, ONE_MINUTE, ONE_HOUR, ONE_DAY, ONE_YEAR, format, leveledFormat, getUnitValue, timeUnits, fullLeveledFormatter, getPrimaryTimeUnit, isPrimaryTimeUnit, getDefaultFormatPrecisionOfInterval, fullYearGetterName, monthSetterName, fullYearSetterName, dateSetterName, hoursGetterName, hoursSetterName, minutesSetterName, secondsSetterName, millisecondsSetterName, monthGetterName, dateGetterName, minutesGetterName, secondsGetterName, millisecondsGetterName } from '../util/time.js';\nimport * as scaleHelper from './helper.js';\nimport IntervalScale from './Interval.js';\nimport Scale from './Scale.js';\nimport { warn } from '../util/log.js';\nimport { filter, isNumber, map } from 'zrender/lib/core/util.js'; // FIXME 公用？\n\nvar bisect = function (a, x, lo, hi) {\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n\n    if (a[mid][1] < x) {\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n\n  return lo;\n};\n\nvar TimeScale =\n/** @class */\nfunction (_super) {\n  __extends(TimeScale, _super);\n\n  function TimeScale(settings) {\n    var _this = _super.call(this, settings) || this;\n\n    _this.type = 'time';\n    return _this;\n  }\n  /**\n   * Get label is mainly for other components like dataZoom, tooltip.\n   */\n\n\n  TimeScale.prototype.getLabel = function (tick) {\n    var useUTC = this.getSetting('useUTC');\n    return format(tick.value, fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))] || fullLeveledFormatter.second, useUTC, this.getSetting('locale'));\n  };\n\n  TimeScale.prototype.getFormattedLabel = function (tick, idx, labelFormatter) {\n    var isUTC = this.getSetting('useUTC');\n    var lang = this.getSetting('locale');\n    return leveledFormat(tick, idx, labelFormatter, lang, isUTC);\n  };\n  /**\n   * @override\n   */\n\n\n  TimeScale.prototype.getTicks = function () {\n    var interval = this._interval;\n    var extent = this._extent;\n    var ticks = []; // If interval is 0, return [];\n\n    if (!interval) {\n      return ticks;\n    }\n\n    ticks.push({\n      value: extent[0],\n      level: 0\n    });\n    var useUTC = this.getSetting('useUTC');\n    var innerTicks = getIntervalTicks(this._minLevelUnit, this._approxInterval, useUTC, extent);\n    ticks = ticks.concat(innerTicks);\n    ticks.push({\n      value: extent[1],\n      level: 0\n    });\n    return ticks;\n  };\n\n  TimeScale.prototype.calcNiceExtent = function (opt) {\n    var extent = this._extent; // If extent start and end are same, expand them\n\n    if (extent[0] === extent[1]) {\n      // Expand extent\n      extent[0] -= ONE_DAY;\n      extent[1] += ONE_DAY;\n    } // If there are no data and extent are [Infinity, -Infinity]\n\n\n    if (extent[1] === -Infinity && extent[0] === Infinity) {\n      var d = new Date();\n      extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      extent[0] = extent[1] - ONE_DAY;\n    }\n\n    this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\n  };\n\n  TimeScale.prototype.calcNiceTicks = function (approxTickNum, minInterval, maxInterval) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n    this._approxInterval = span / approxTickNum;\n\n    if (minInterval != null && this._approxInterval < minInterval) {\n      this._approxInterval = minInterval;\n    }\n\n    if (maxInterval != null && this._approxInterval > maxInterval) {\n      this._approxInterval = maxInterval;\n    }\n\n    var scaleIntervalsLen = scaleIntervals.length;\n    var idx = Math.min(bisect(scaleIntervals, this._approxInterval, 0, scaleIntervalsLen), scaleIntervalsLen - 1); // Interval that can be used to calculate ticks\n\n    this._interval = scaleIntervals[idx][1]; // Min level used when picking ticks from top down.\n    // We check one more level to avoid the ticks are to sparse in some case.\n\n    this._minLevelUnit = scaleIntervals[Math.max(idx - 1, 0)][0];\n  };\n\n  TimeScale.prototype.parse = function (val) {\n    // val might be float.\n    return isNumber(val) ? val : +numberUtil.parseDate(val);\n  };\n\n  TimeScale.prototype.contain = function (val) {\n    return scaleHelper.contain(this.parse(val), this._extent);\n  };\n\n  TimeScale.prototype.normalize = function (val) {\n    return scaleHelper.normalize(this.parse(val), this._extent);\n  };\n\n  TimeScale.prototype.scale = function (val) {\n    return scaleHelper.scale(val, this._extent);\n  };\n\n  TimeScale.type = 'time';\n  return TimeScale;\n}(IntervalScale);\n/**\n * This implementation was originally copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/time/scale.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n */\n\n\nvar scaleIntervals = [// Format                           interval\n['second', ONE_SECOND], ['minute', ONE_MINUTE], ['hour', ONE_HOUR], ['quarter-day', ONE_HOUR * 6], ['half-day', ONE_HOUR * 12], ['day', ONE_DAY * 1.2], ['half-week', ONE_DAY * 3.5], ['week', ONE_DAY * 7], ['month', ONE_DAY * 31], ['quarter', ONE_DAY * 95], ['half-year', ONE_YEAR / 2], ['year', ONE_YEAR] // 1Y\n];\n\nfunction isUnitValueSame(unit, valueA, valueB, isUTC) {\n  var dateA = numberUtil.parseDate(valueA);\n  var dateB = numberUtil.parseDate(valueB);\n\n  var isSame = function (unit) {\n    return getUnitValue(dateA, unit, isUTC) === getUnitValue(dateB, unit, isUTC);\n  };\n\n  var isSameYear = function () {\n    return isSame('year');\n  }; // const isSameHalfYear = () => isSameYear() && isSame('half-year');\n  // const isSameQuater = () => isSameYear() && isSame('quarter');\n\n\n  var isSameMonth = function () {\n    return isSameYear() && isSame('month');\n  };\n\n  var isSameDay = function () {\n    return isSameMonth() && isSame('day');\n  }; // const isSameHalfDay = () => isSameDay() && isSame('half-day');\n\n\n  var isSameHour = function () {\n    return isSameDay() && isSame('hour');\n  };\n\n  var isSameMinute = function () {\n    return isSameHour() && isSame('minute');\n  };\n\n  var isSameSecond = function () {\n    return isSameMinute() && isSame('second');\n  };\n\n  var isSameMilliSecond = function () {\n    return isSameSecond() && isSame('millisecond');\n  };\n\n  switch (unit) {\n    case 'year':\n      return isSameYear();\n\n    case 'month':\n      return isSameMonth();\n\n    case 'day':\n      return isSameDay();\n\n    case 'hour':\n      return isSameHour();\n\n    case 'minute':\n      return isSameMinute();\n\n    case 'second':\n      return isSameSecond();\n\n    case 'millisecond':\n      return isSameMilliSecond();\n  }\n} // const primaryUnitGetters = {\n//     year: fullYearGetterName(),\n//     month: monthGetterName(),\n//     day: dateGetterName(),\n//     hour: hoursGetterName(),\n//     minute: minutesGetterName(),\n//     second: secondsGetterName(),\n//     millisecond: millisecondsGetterName()\n// };\n// const primaryUnitUTCGetters = {\n//     year: fullYearGetterName(true),\n//     month: monthGetterName(true),\n//     day: dateGetterName(true),\n//     hour: hoursGetterName(true),\n//     minute: minutesGetterName(true),\n//     second: secondsGetterName(true),\n//     millisecond: millisecondsGetterName(true)\n// };\n// function moveTick(date: Date, unitName: TimeUnit, step: number, isUTC: boolean) {\n//     step = step || 1;\n//     switch (getPrimaryTimeUnit(unitName)) {\n//         case 'year':\n//             date[fullYearSetterName(isUTC)](date[fullYearGetterName(isUTC)]() + step);\n//             break;\n//         case 'month':\n//             date[monthSetterName(isUTC)](date[monthGetterName(isUTC)]() + step);\n//             break;\n//         case 'day':\n//             date[dateSetterName(isUTC)](date[dateGetterName(isUTC)]() + step);\n//             break;\n//         case 'hour':\n//             date[hoursSetterName(isUTC)](date[hoursGetterName(isUTC)]() + step);\n//             break;\n//         case 'minute':\n//             date[minutesSetterName(isUTC)](date[minutesGetterName(isUTC)]() + step);\n//             break;\n//         case 'second':\n//             date[secondsSetterName(isUTC)](date[secondsGetterName(isUTC)]() + step);\n//             break;\n//         case 'millisecond':\n//             date[millisecondsSetterName(isUTC)](date[millisecondsGetterName(isUTC)]() + step);\n//             break;\n//     }\n//     return date.getTime();\n// }\n// const DATE_INTERVALS = [[8, 7.5], [4, 3.5], [2, 1.5]];\n// const MONTH_INTERVALS = [[6, 5.5], [3, 2.5], [2, 1.5]];\n// const MINUTES_SECONDS_INTERVALS = [[30, 30], [20, 20], [15, 15], [10, 10], [5, 5], [2, 2]];\n\n\nfunction getDateInterval(approxInterval, daysInMonth) {\n  approxInterval /= ONE_DAY;\n  return approxInterval > 16 ? 16 // Math.floor(daysInMonth / 2) + 1  // In this case we only want one tick betwen two month.\n  : approxInterval > 7.5 ? 7 // TODO week 7 or day 8?\n  : approxInterval > 3.5 ? 4 : approxInterval > 1.5 ? 2 : 1;\n}\n\nfunction getMonthInterval(approxInterval) {\n  var APPROX_ONE_MONTH = 30 * ONE_DAY;\n  approxInterval /= APPROX_ONE_MONTH;\n  return approxInterval > 6 ? 6 : approxInterval > 3 ? 3 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getHourInterval(approxInterval) {\n  approxInterval /= ONE_HOUR;\n  return approxInterval > 12 ? 12 : approxInterval > 6 ? 6 : approxInterval > 3.5 ? 4 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getMinutesAndSecondsInterval(approxInterval, isMinutes) {\n  approxInterval /= isMinutes ? ONE_MINUTE : ONE_SECOND;\n  return approxInterval > 30 ? 30 : approxInterval > 20 ? 20 : approxInterval > 15 ? 15 : approxInterval > 10 ? 10 : approxInterval > 5 ? 5 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getMillisecondsInterval(approxInterval) {\n  return numberUtil.nice(approxInterval, true);\n}\n\nfunction getFirstTimestampOfUnit(date, unitName, isUTC) {\n  var outDate = new Date(date);\n\n  switch (getPrimaryTimeUnit(unitName)) {\n    case 'year':\n    case 'month':\n      outDate[monthSetterName(isUTC)](0);\n\n    case 'day':\n      outDate[dateSetterName(isUTC)](1);\n\n    case 'hour':\n      outDate[hoursSetterName(isUTC)](0);\n\n    case 'minute':\n      outDate[minutesSetterName(isUTC)](0);\n\n    case 'second':\n      outDate[secondsSetterName(isUTC)](0);\n      outDate[millisecondsSetterName(isUTC)](0);\n  }\n\n  return outDate.getTime();\n}\n\nfunction getIntervalTicks(bottomUnitName, approxInterval, isUTC, extent) {\n  var safeLimit = 10000;\n  var unitNames = timeUnits;\n  var iter = 0;\n\n  function addTicksInSpan(interval, minTimestamp, maxTimestamp, getMethodName, setMethodName, isDate, out) {\n    var date = new Date(minTimestamp);\n    var dateTime = minTimestamp;\n    var d = date[getMethodName](); // if (isDate) {\n    //     d -= 1; // Starts with 0;   PENDING\n    // }\n\n    while (dateTime < maxTimestamp && dateTime <= extent[1]) {\n      out.push({\n        value: dateTime\n      });\n      d += interval;\n      date[setMethodName](d);\n      dateTime = date.getTime();\n    } // This extra tick is for calcuating ticks of next level. Will not been added to the final result\n\n\n    out.push({\n      value: dateTime,\n      notAdd: true\n    });\n  }\n\n  function addLevelTicks(unitName, lastLevelTicks, levelTicks) {\n    var newAddedTicks = [];\n    var isFirstLevel = !lastLevelTicks.length;\n\n    if (isUnitValueSame(getPrimaryTimeUnit(unitName), extent[0], extent[1], isUTC)) {\n      return;\n    }\n\n    if (isFirstLevel) {\n      lastLevelTicks = [{\n        // TODO Optimize. Not include so may ticks.\n        value: getFirstTimestampOfUnit(new Date(extent[0]), unitName, isUTC)\n      }, {\n        value: extent[1]\n      }];\n    }\n\n    for (var i = 0; i < lastLevelTicks.length - 1; i++) {\n      var startTick = lastLevelTicks[i].value;\n      var endTick = lastLevelTicks[i + 1].value;\n\n      if (startTick === endTick) {\n        continue;\n      }\n\n      var interval = void 0;\n      var getterName = void 0;\n      var setterName = void 0;\n      var isDate = false;\n\n      switch (unitName) {\n        case 'year':\n          interval = Math.max(1, Math.round(approxInterval / ONE_DAY / 365));\n          getterName = fullYearGetterName(isUTC);\n          setterName = fullYearSetterName(isUTC);\n          break;\n\n        case 'half-year':\n        case 'quarter':\n        case 'month':\n          interval = getMonthInterval(approxInterval);\n          getterName = monthGetterName(isUTC);\n          setterName = monthSetterName(isUTC);\n          break;\n\n        case 'week': // PENDING If week is added. Ignore day.\n\n        case 'half-week':\n        case 'day':\n          interval = getDateInterval(approxInterval, 31); // Use 32 days and let interval been 16\n\n          getterName = dateGetterName(isUTC);\n          setterName = dateSetterName(isUTC);\n          isDate = true;\n          break;\n\n        case 'half-day':\n        case 'quarter-day':\n        case 'hour':\n          interval = getHourInterval(approxInterval);\n          getterName = hoursGetterName(isUTC);\n          setterName = hoursSetterName(isUTC);\n          break;\n\n        case 'minute':\n          interval = getMinutesAndSecondsInterval(approxInterval, true);\n          getterName = minutesGetterName(isUTC);\n          setterName = minutesSetterName(isUTC);\n          break;\n\n        case 'second':\n          interval = getMinutesAndSecondsInterval(approxInterval, false);\n          getterName = secondsGetterName(isUTC);\n          setterName = secondsSetterName(isUTC);\n          break;\n\n        case 'millisecond':\n          interval = getMillisecondsInterval(approxInterval);\n          getterName = millisecondsGetterName(isUTC);\n          setterName = millisecondsSetterName(isUTC);\n          break;\n      }\n\n      addTicksInSpan(interval, startTick, endTick, getterName, setterName, isDate, newAddedTicks);\n\n      if (unitName === 'year' && levelTicks.length > 1 && i === 0) {\n        // Add nearest years to the left extent.\n        levelTicks.unshift({\n          value: levelTicks[0].value - interval\n        });\n      }\n    }\n\n    for (var i = 0; i < newAddedTicks.length; i++) {\n      levelTicks.push(newAddedTicks[i]);\n    } // newAddedTicks.length && console.log(unitName, newAddedTicks);\n\n\n    return newAddedTicks;\n  }\n\n  var levelsTicks = [];\n  var currentLevelTicks = [];\n  var tickCount = 0;\n  var lastLevelTickCount = 0;\n\n  for (var i = 0; i < unitNames.length && iter++ < safeLimit; ++i) {\n    var primaryTimeUnit = getPrimaryTimeUnit(unitNames[i]);\n\n    if (!isPrimaryTimeUnit(unitNames[i])) {\n      // TODO\n      continue;\n    }\n\n    addLevelTicks(unitNames[i], levelsTicks[levelsTicks.length - 1] || [], currentLevelTicks);\n    var nextPrimaryTimeUnit = unitNames[i + 1] ? getPrimaryTimeUnit(unitNames[i + 1]) : null;\n\n    if (primaryTimeUnit !== nextPrimaryTimeUnit) {\n      if (currentLevelTicks.length) {\n        lastLevelTickCount = tickCount; // Remove the duplicate so the tick count can be precisely.\n\n        currentLevelTicks.sort(function (a, b) {\n          return a.value - b.value;\n        });\n        var levelTicksRemoveDuplicated = [];\n\n        for (var i_1 = 0; i_1 < currentLevelTicks.length; ++i_1) {\n          var tickValue = currentLevelTicks[i_1].value;\n\n          if (i_1 === 0 || currentLevelTicks[i_1 - 1].value !== tickValue) {\n            levelTicksRemoveDuplicated.push(currentLevelTicks[i_1]);\n\n            if (tickValue >= extent[0] && tickValue <= extent[1]) {\n              tickCount++;\n            }\n          }\n        }\n\n        var targetTickNum = (extent[1] - extent[0]) / approxInterval; // Added too much in this level and not too less in last level\n\n        if (tickCount > targetTickNum * 1.5 && lastLevelTickCount > targetTickNum / 1.5) {\n          break;\n        } // Only treat primary time unit as one level.\n\n\n        levelsTicks.push(levelTicksRemoveDuplicated);\n\n        if (tickCount > targetTickNum || bottomUnitName === unitNames[i]) {\n          break;\n        }\n      } // Reset if next unitName is primary\n\n\n      currentLevelTicks = [];\n    }\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (iter >= safeLimit) {\n      warn('Exceed safe limit.');\n    }\n  }\n\n  var levelsTicksInExtent = filter(map(levelsTicks, function (levelTicks) {\n    return filter(levelTicks, function (tick) {\n      return tick.value >= extent[0] && tick.value <= extent[1] && !tick.notAdd;\n    });\n  }), function (levelTicks) {\n    return levelTicks.length > 0;\n  });\n  var ticks = [];\n  var maxLevel = levelsTicksInExtent.length - 1;\n\n  for (var i = 0; i < levelsTicksInExtent.length; ++i) {\n    var levelTicks = levelsTicksInExtent[i];\n\n    for (var k = 0; k < levelTicks.length; ++k) {\n      ticks.push({\n        value: levelTicks[k].value,\n        level: maxLevel - i\n      });\n    }\n  }\n\n  ticks.sort(function (a, b) {\n    return a.value - b.value;\n  }); // Remove duplicates\n\n  var result = [];\n\n  for (var i = 0; i < ticks.length; ++i) {\n    if (i === 0 || ticks[i].value !== ticks[i - 1].value) {\n      result.push(ticks[i]);\n    }\n  }\n\n  return result;\n}\n\nScale.registerClass(TimeScale);\nexport default TimeScale;"],"mappings":"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"},"metadata":{},"sourceType":"script"}