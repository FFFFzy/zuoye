{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireWildcard.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = funnelLayout;\n\nvar layout = _interopRequireWildcard(require(\"../../util/layout.js\"));\n\nvar _number = require(\"../../util/number.js\");\n\nvar _util = require(\"zrender/lib/core/util.js\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction getSortedIndices(data, sort) {\n  var valueDim = data.mapDimension('value');\n  var valueArr = data.mapArray(valueDim, function (val) {\n    return val;\n  });\n  var indices = [];\n  var isAscending = sort === 'ascending';\n\n  for (var i = 0, len = data.count(); i < len; i++) {\n    indices[i] = i;\n  } // Add custom sortable function & none sortable opetion by \"options.sort\"\n\n\n  if ((0, _util.isFunction)(sort)) {\n    indices.sort(sort);\n  } else if (sort !== 'none') {\n    indices.sort(function (a, b) {\n      return isAscending ? valueArr[a] - valueArr[b] : valueArr[b] - valueArr[a];\n    });\n  }\n\n  return indices;\n}\n\nfunction labelLayout(data) {\n  var seriesModel = data.hostModel;\n  var orient = seriesModel.get('orient');\n  data.each(function (idx) {\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label');\n    var labelPosition = labelModel.get('position');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var layout = data.getItemLayout(idx);\n    var points = layout.points;\n    var isLabelInside = labelPosition === 'inner' || labelPosition === 'inside' || labelPosition === 'center' || labelPosition === 'insideLeft' || labelPosition === 'insideRight';\n    var textAlign;\n    var textX;\n    var textY;\n    var linePoints;\n\n    if (isLabelInside) {\n      if (labelPosition === 'insideLeft') {\n        textX = (points[0][0] + points[3][0]) / 2 + 5;\n        textY = (points[0][1] + points[3][1]) / 2;\n        textAlign = 'left';\n      } else if (labelPosition === 'insideRight') {\n        textX = (points[1][0] + points[2][0]) / 2 - 5;\n        textY = (points[1][1] + points[2][1]) / 2;\n        textAlign = 'right';\n      } else {\n        textX = (points[0][0] + points[1][0] + points[2][0] + points[3][0]) / 4;\n        textY = (points[0][1] + points[1][1] + points[2][1] + points[3][1]) / 4;\n        textAlign = 'center';\n      }\n\n      linePoints = [[textX, textY], [textX, textY]];\n    } else {\n      var x1 = void 0;\n      var y1 = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var labelLineLen = labelLineModel.get('length');\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (orient === 'vertical' && ['top', 'bottom'].indexOf(labelPosition) > -1) {\n          labelPosition = 'left';\n          console.warn('Position error: Funnel chart on vertical orient dose not support top and bottom.');\n        }\n\n        if (orient === 'horizontal' && ['left', 'right'].indexOf(labelPosition) > -1) {\n          labelPosition = 'bottom';\n          console.warn('Position error: Funnel chart on horizontal orient dose not support left and right.');\n        }\n      }\n\n      if (labelPosition === 'left') {\n        // Left side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        x2 = x1 - labelLineLen;\n        textX = x2 - 5;\n        textAlign = 'right';\n      } else if (labelPosition === 'right') {\n        // Right side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        x2 = x1 + labelLineLen;\n        textX = x2 + 5;\n        textAlign = 'left';\n      } else if (labelPosition === 'top') {\n        // Top side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        y2 = y1 - labelLineLen;\n        textY = y2 - 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'bottom') {\n        // Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        y2 = y1 + labelLineLen;\n        textY = y2 + 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'rightTop') {\n        // RightTop side\n        x1 = orient === 'horizontal' ? points[3][0] : points[1][0];\n        y1 = orient === 'horizontal' ? points[3][1] : points[1][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'top';\n        }\n      } else if (labelPosition === 'rightBottom') {\n        // RightBottom side\n        x1 = points[2][0];\n        y1 = points[2][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'bottom';\n        }\n      } else if (labelPosition === 'leftTop') {\n        // LeftTop side\n        x1 = points[0][0];\n        y1 = orient === 'horizontal' ? points[0][1] : points[1][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else if (labelPosition === 'leftBottom') {\n        // LeftBottom side\n        x1 = orient === 'horizontal' ? points[1][0] : points[3][0];\n        y1 = orient === 'horizontal' ? points[1][1] : points[2][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else {\n        // Right side or Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'left';\n        }\n      }\n\n      if (orient === 'horizontal') {\n        x2 = x1;\n        textX = x2;\n      } else {\n        y2 = y1;\n        textY = y2;\n      }\n\n      linePoints = [[x1, y1], [x2, y2]];\n    }\n\n    layout.label = {\n      linePoints: linePoints,\n      x: textX,\n      y: textY,\n      verticalAlign: 'middle',\n      textAlign: textAlign,\n      inside: isLabelInside\n    };\n  });\n}\n\nfunction funnelLayout(ecModel, api) {\n  ecModel.eachSeriesByType('funnel', function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var sort = seriesModel.get('sort');\n    var viewRect = getViewRect(seriesModel, api);\n    var orient = seriesModel.get('orient');\n    var viewWidth = viewRect.width;\n    var viewHeight = viewRect.height;\n    var indices = getSortedIndices(data, sort);\n    var x = viewRect.x;\n    var y = viewRect.y;\n    var sizeExtent = orient === 'horizontal' ? [(0, _number.parsePercent)(seriesModel.get('minSize'), viewHeight), (0, _number.parsePercent)(seriesModel.get('maxSize'), viewHeight)] : [(0, _number.parsePercent)(seriesModel.get('minSize'), viewWidth), (0, _number.parsePercent)(seriesModel.get('maxSize'), viewWidth)];\n    var dataExtent = data.getDataExtent(valueDim);\n    var min = seriesModel.get('min');\n    var max = seriesModel.get('max');\n\n    if (min == null) {\n      min = Math.min(dataExtent[0], 0);\n    }\n\n    if (max == null) {\n      max = dataExtent[1];\n    }\n\n    var funnelAlign = seriesModel.get('funnelAlign');\n    var gap = seriesModel.get('gap');\n    var viewSize = orient === 'horizontal' ? viewWidth : viewHeight;\n    var itemSize = (viewSize - gap * (data.count() - 1)) / data.count();\n\n    var getLinePoints = function (idx, offset) {\n      // End point index is data.count() and we assign it 0\n      if (orient === 'horizontal') {\n        var val_1 = data.get(valueDim, idx) || 0;\n        var itemHeight = (0, _number.linearMap)(val_1, [min, max], sizeExtent, true);\n        var y0 = void 0;\n\n        switch (funnelAlign) {\n          case 'top':\n            y0 = y;\n            break;\n\n          case 'center':\n            y0 = y + (viewHeight - itemHeight) / 2;\n            break;\n\n          case 'bottom':\n            y0 = y + (viewHeight - itemHeight);\n            break;\n        }\n\n        return [[offset, y0], [offset, y0 + itemHeight]];\n      }\n\n      var val = data.get(valueDim, idx) || 0;\n      var itemWidth = (0, _number.linearMap)(val, [min, max], sizeExtent, true);\n      var x0;\n\n      switch (funnelAlign) {\n        case 'left':\n          x0 = x;\n          break;\n\n        case 'center':\n          x0 = x + (viewWidth - itemWidth) / 2;\n          break;\n\n        case 'right':\n          x0 = x + viewWidth - itemWidth;\n          break;\n      }\n\n      return [[x0, offset], [x0 + itemWidth, offset]];\n    };\n\n    if (sort === 'ascending') {\n      // From bottom to top\n      itemSize = -itemSize;\n      gap = -gap;\n\n      if (orient === 'horizontal') {\n        x += viewWidth;\n      } else {\n        y += viewHeight;\n      }\n\n      indices = indices.reverse();\n    }\n\n    for (var i = 0; i < indices.length; i++) {\n      var idx = indices[i];\n      var nextIdx = indices[i + 1];\n      var itemModel = data.getItemModel(idx);\n\n      if (orient === 'horizontal') {\n        var width = itemModel.get(['itemStyle', 'width']);\n\n        if (width == null) {\n          width = itemSize;\n        } else {\n          width = (0, _number.parsePercent)(width, viewWidth);\n\n          if (sort === 'ascending') {\n            width = -width;\n          }\n        }\n\n        var start = getLinePoints(idx, x);\n        var end = getLinePoints(nextIdx, x + width);\n        x += width + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      } else {\n        var height = itemModel.get(['itemStyle', 'height']);\n\n        if (height == null) {\n          height = itemSize;\n        } else {\n          height = (0, _number.parsePercent)(height, viewHeight);\n\n          if (sort === 'ascending') {\n            height = -height;\n          }\n        }\n\n        var start = getLinePoints(idx, y);\n        var end = getLinePoints(nextIdx, y + height);\n        y += height + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      }\n    }\n\n    labelLayout(data);\n  });\n}","map":{"version":3,"names":["getViewRect","seriesModel","api","layout","getLayoutRect","getBoxLayoutParams","width","getWidth","height","getHeight","getSortedIndices","data","sort","valueDim","mapDimension","valueArr","mapArray","val","indices","isAscending","i","len","count","isFunction","a","b","labelLayout","hostModel","orient","get","each","idx","itemModel","getItemModel","labelModel","getModel","labelPosition","labelLineModel","getItemLayout","points","isLabelInside","textAlign","textX","textY","linePoints","x1","y1","x2","y2","labelLineLen","process","env","NODE_ENV","indexOf","console","warn","label","x","y","verticalAlign","inside","funnelLayout","ecModel","eachSeriesByType","getData","viewRect","viewWidth","viewHeight","sizeExtent","parsePercent","dataExtent","getDataExtent","min","max","Math","funnelAlign","gap","viewSize","itemSize","getLinePoints","offset","val_1","itemHeight","linearMap","y0","itemWidth","x0","reverse","length","nextIdx","start","end","setItemLayout","concat","slice"],"sources":["C:/Users/Z/Desktop/efficient/node_modules/echarts/lib/chart/funnel/funnelLayout.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as layout from '../../util/layout.js';\nimport { parsePercent, linearMap } from '../../util/number.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction getSortedIndices(data, sort) {\n  var valueDim = data.mapDimension('value');\n  var valueArr = data.mapArray(valueDim, function (val) {\n    return val;\n  });\n  var indices = [];\n  var isAscending = sort === 'ascending';\n\n  for (var i = 0, len = data.count(); i < len; i++) {\n    indices[i] = i;\n  } // Add custom sortable function & none sortable opetion by \"options.sort\"\n\n\n  if (isFunction(sort)) {\n    indices.sort(sort);\n  } else if (sort !== 'none') {\n    indices.sort(function (a, b) {\n      return isAscending ? valueArr[a] - valueArr[b] : valueArr[b] - valueArr[a];\n    });\n  }\n\n  return indices;\n}\n\nfunction labelLayout(data) {\n  var seriesModel = data.hostModel;\n  var orient = seriesModel.get('orient');\n  data.each(function (idx) {\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label');\n    var labelPosition = labelModel.get('position');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var layout = data.getItemLayout(idx);\n    var points = layout.points;\n    var isLabelInside = labelPosition === 'inner' || labelPosition === 'inside' || labelPosition === 'center' || labelPosition === 'insideLeft' || labelPosition === 'insideRight';\n    var textAlign;\n    var textX;\n    var textY;\n    var linePoints;\n\n    if (isLabelInside) {\n      if (labelPosition === 'insideLeft') {\n        textX = (points[0][0] + points[3][0]) / 2 + 5;\n        textY = (points[0][1] + points[3][1]) / 2;\n        textAlign = 'left';\n      } else if (labelPosition === 'insideRight') {\n        textX = (points[1][0] + points[2][0]) / 2 - 5;\n        textY = (points[1][1] + points[2][1]) / 2;\n        textAlign = 'right';\n      } else {\n        textX = (points[0][0] + points[1][0] + points[2][0] + points[3][0]) / 4;\n        textY = (points[0][1] + points[1][1] + points[2][1] + points[3][1]) / 4;\n        textAlign = 'center';\n      }\n\n      linePoints = [[textX, textY], [textX, textY]];\n    } else {\n      var x1 = void 0;\n      var y1 = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var labelLineLen = labelLineModel.get('length');\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (orient === 'vertical' && ['top', 'bottom'].indexOf(labelPosition) > -1) {\n          labelPosition = 'left';\n          console.warn('Position error: Funnel chart on vertical orient dose not support top and bottom.');\n        }\n\n        if (orient === 'horizontal' && ['left', 'right'].indexOf(labelPosition) > -1) {\n          labelPosition = 'bottom';\n          console.warn('Position error: Funnel chart on horizontal orient dose not support left and right.');\n        }\n      }\n\n      if (labelPosition === 'left') {\n        // Left side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        x2 = x1 - labelLineLen;\n        textX = x2 - 5;\n        textAlign = 'right';\n      } else if (labelPosition === 'right') {\n        // Right side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        x2 = x1 + labelLineLen;\n        textX = x2 + 5;\n        textAlign = 'left';\n      } else if (labelPosition === 'top') {\n        // Top side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        y2 = y1 - labelLineLen;\n        textY = y2 - 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'bottom') {\n        // Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        y2 = y1 + labelLineLen;\n        textY = y2 + 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'rightTop') {\n        // RightTop side\n        x1 = orient === 'horizontal' ? points[3][0] : points[1][0];\n        y1 = orient === 'horizontal' ? points[3][1] : points[1][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'top';\n        }\n      } else if (labelPosition === 'rightBottom') {\n        // RightBottom side\n        x1 = points[2][0];\n        y1 = points[2][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'bottom';\n        }\n      } else if (labelPosition === 'leftTop') {\n        // LeftTop side\n        x1 = points[0][0];\n        y1 = orient === 'horizontal' ? points[0][1] : points[1][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else if (labelPosition === 'leftBottom') {\n        // LeftBottom side\n        x1 = orient === 'horizontal' ? points[1][0] : points[3][0];\n        y1 = orient === 'horizontal' ? points[1][1] : points[2][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else {\n        // Right side or Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'left';\n        }\n      }\n\n      if (orient === 'horizontal') {\n        x2 = x1;\n        textX = x2;\n      } else {\n        y2 = y1;\n        textY = y2;\n      }\n\n      linePoints = [[x1, y1], [x2, y2]];\n    }\n\n    layout.label = {\n      linePoints: linePoints,\n      x: textX,\n      y: textY,\n      verticalAlign: 'middle',\n      textAlign: textAlign,\n      inside: isLabelInside\n    };\n  });\n}\n\nexport default function funnelLayout(ecModel, api) {\n  ecModel.eachSeriesByType('funnel', function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var sort = seriesModel.get('sort');\n    var viewRect = getViewRect(seriesModel, api);\n    var orient = seriesModel.get('orient');\n    var viewWidth = viewRect.width;\n    var viewHeight = viewRect.height;\n    var indices = getSortedIndices(data, sort);\n    var x = viewRect.x;\n    var y = viewRect.y;\n    var sizeExtent = orient === 'horizontal' ? [parsePercent(seriesModel.get('minSize'), viewHeight), parsePercent(seriesModel.get('maxSize'), viewHeight)] : [parsePercent(seriesModel.get('minSize'), viewWidth), parsePercent(seriesModel.get('maxSize'), viewWidth)];\n    var dataExtent = data.getDataExtent(valueDim);\n    var min = seriesModel.get('min');\n    var max = seriesModel.get('max');\n\n    if (min == null) {\n      min = Math.min(dataExtent[0], 0);\n    }\n\n    if (max == null) {\n      max = dataExtent[1];\n    }\n\n    var funnelAlign = seriesModel.get('funnelAlign');\n    var gap = seriesModel.get('gap');\n    var viewSize = orient === 'horizontal' ? viewWidth : viewHeight;\n    var itemSize = (viewSize - gap * (data.count() - 1)) / data.count();\n\n    var getLinePoints = function (idx, offset) {\n      // End point index is data.count() and we assign it 0\n      if (orient === 'horizontal') {\n        var val_1 = data.get(valueDim, idx) || 0;\n        var itemHeight = linearMap(val_1, [min, max], sizeExtent, true);\n        var y0 = void 0;\n\n        switch (funnelAlign) {\n          case 'top':\n            y0 = y;\n            break;\n\n          case 'center':\n            y0 = y + (viewHeight - itemHeight) / 2;\n            break;\n\n          case 'bottom':\n            y0 = y + (viewHeight - itemHeight);\n            break;\n        }\n\n        return [[offset, y0], [offset, y0 + itemHeight]];\n      }\n\n      var val = data.get(valueDim, idx) || 0;\n      var itemWidth = linearMap(val, [min, max], sizeExtent, true);\n      var x0;\n\n      switch (funnelAlign) {\n        case 'left':\n          x0 = x;\n          break;\n\n        case 'center':\n          x0 = x + (viewWidth - itemWidth) / 2;\n          break;\n\n        case 'right':\n          x0 = x + viewWidth - itemWidth;\n          break;\n      }\n\n      return [[x0, offset], [x0 + itemWidth, offset]];\n    };\n\n    if (sort === 'ascending') {\n      // From bottom to top\n      itemSize = -itemSize;\n      gap = -gap;\n\n      if (orient === 'horizontal') {\n        x += viewWidth;\n      } else {\n        y += viewHeight;\n      }\n\n      indices = indices.reverse();\n    }\n\n    for (var i = 0; i < indices.length; i++) {\n      var idx = indices[i];\n      var nextIdx = indices[i + 1];\n      var itemModel = data.getItemModel(idx);\n\n      if (orient === 'horizontal') {\n        var width = itemModel.get(['itemStyle', 'width']);\n\n        if (width == null) {\n          width = itemSize;\n        } else {\n          width = parsePercent(width, viewWidth);\n\n          if (sort === 'ascending') {\n            width = -width;\n          }\n        }\n\n        var start = getLinePoints(idx, x);\n        var end = getLinePoints(nextIdx, x + width);\n        x += width + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      } else {\n        var height = itemModel.get(['itemStyle', 'height']);\n\n        if (height == null) {\n          height = itemSize;\n        } else {\n          height = parsePercent(height, viewHeight);\n\n          if (sort === 'ascending') {\n            height = -height;\n          }\n        }\n\n        var start = getLinePoints(idx, y);\n        var end = getLinePoints(nextIdx, y + height);\n        y += height + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      }\n    }\n\n    labelLayout(data);\n  });\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}