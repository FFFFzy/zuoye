{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/web.dom-exception.stack.js\");\n\nrequire(\"core-js/modules/es.typed-array.at.js\");\n\nrequire(\"core-js/modules/esnext.typed-array.find-last.js\");\n\nrequire(\"core-js/modules/esnext.typed-array.find-last-index.js\");\n\nvar _tslib = require(\"tslib\");\n\nvar _env = _interopRequireDefault(require(\"zrender/lib/core/env.js\"));\n\nvar _featureManager = require(\"../featureManager.js\");\n\nvar _util = require(\"zrender/lib/core/util.js\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Uint8Array, document */\n\n/* global window, document */\nvar SaveAsImage =\n/** @class */\nfunction (_super) {\n  (0, _tslib.__extends)(SaveAsImage, _super);\n\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    });\n    var browser = _env.default.browser; // Chrome, Firefox, New Edge\n\n    if ((0, _util.isFunction)(MouseEvent) && (browser.newEdge || !browser.ie && !browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework， window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    } // IE or old Edge\n    else {\n      // @ts-ignore\n      if (window.navigator.msSaveOrOpenBlob || isSvg) {\n        var parts = url.split(','); // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\n        var base64Encoded = parts[0].indexOf('base64') > -1;\n        var bstr = isSvg // should decode the svg data uri first\n        ? decodeURIComponent(parts[1]) : parts[1]; // only `atob` when the data uri is encoded with base64\n        // otherwise, like `svg` data uri exported by zrender,\n        // there will be an error, for it's not encoded with base64.\n        // (just a url-encoded string through `encodeURIComponent`)\n\n        base64Encoded && (bstr = window.atob(bstr));\n        var filename = title + '.' + type; // @ts-ignore\n\n        if (window.navigator.msSaveOrOpenBlob) {\n          var n = bstr.length;\n          var u8arr = new Uint8Array(n);\n\n          while (n--) {\n            u8arr[n] = bstr.charCodeAt(n);\n          }\n\n          var blob = new Blob([u8arr]); // @ts-ignore\n\n          window.navigator.msSaveOrOpenBlob(blob, filename);\n        } else {\n          var frame = document.createElement('iframe');\n          document.body.appendChild(frame);\n          var cw = frame.contentWindow;\n          var doc = cw.document;\n          doc.open('image/svg+xml', 'replace');\n          doc.write(bstr);\n          doc.close();\n          cw.focus();\n          doc.execCommand('SaveAs', true, filename);\n          document.body.removeChild(frame);\n        }\n      } else {\n        var lang = model.get('lang');\n        var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n        var tab = window.open();\n        tab.document.write(html);\n        tab.document.title = title;\n      }\n    }\n  };\n\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: '#fff',\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n\n  return SaveAsImage;\n}(_featureManager.ToolboxFeature);\n\nvar _default = SaveAsImage;\nexports.default = _default;","map":{"version":3,"names":["SaveAsImage","_super","__extends","apply","arguments","prototype","onclick","ecModel","api","model","title","get","isSvg","getZr","painter","getType","type","url","getConnectedDataURL","backgroundColor","connectedBackgroundColor","excludeComponents","pixelRatio","browser","env","isFunction","MouseEvent","newEdge","ie","edge","$a","document","createElement","download","target","href","evt","view","defaultView","bubbles","cancelable","dispatchEvent","window","navigator","msSaveOrOpenBlob","parts","split","base64Encoded","indexOf","bstr","decodeURIComponent","atob","filename","n","length","u8arr","Uint8Array","charCodeAt","blob","Blob","frame","body","appendChild","cw","contentWindow","doc","open","write","close","focus","execCommand","removeChild","lang","html","tab","getDefaultOption","defaultOption","show","icon","getLocaleModel","name","ToolboxFeature"],"sources":["C:/Users/Z/Desktop/efficient/node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Uint8Array, document */\n\nimport env from 'zrender/lib/core/env.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\n/* global window, document */\n\nvar SaveAsImage =\n/** @class */\nfunction (_super) {\n  __extends(SaveAsImage, _super);\n\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    });\n    var browser = env.browser; // Chrome, Firefox, New Edge\n\n    if (isFunction(MouseEvent) && (browser.newEdge || !browser.ie && !browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework， window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    } // IE or old Edge\n    else {\n        // @ts-ignore\n        if (window.navigator.msSaveOrOpenBlob || isSvg) {\n          var parts = url.split(','); // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\n          var base64Encoded = parts[0].indexOf('base64') > -1;\n          var bstr = isSvg // should decode the svg data uri first\n          ? decodeURIComponent(parts[1]) : parts[1]; // only `atob` when the data uri is encoded with base64\n          // otherwise, like `svg` data uri exported by zrender,\n          // there will be an error, for it's not encoded with base64.\n          // (just a url-encoded string through `encodeURIComponent`)\n\n          base64Encoded && (bstr = window.atob(bstr));\n          var filename = title + '.' + type; // @ts-ignore\n\n          if (window.navigator.msSaveOrOpenBlob) {\n            var n = bstr.length;\n            var u8arr = new Uint8Array(n);\n\n            while (n--) {\n              u8arr[n] = bstr.charCodeAt(n);\n            }\n\n            var blob = new Blob([u8arr]); // @ts-ignore\n\n            window.navigator.msSaveOrOpenBlob(blob, filename);\n          } else {\n            var frame = document.createElement('iframe');\n            document.body.appendChild(frame);\n            var cw = frame.contentWindow;\n            var doc = cw.document;\n            doc.open('image/svg+xml', 'replace');\n            doc.write(bstr);\n            doc.close();\n            cw.focus();\n            doc.execCommand('SaveAs', true, filename);\n            document.body.removeChild(frame);\n          }\n        } else {\n          var lang = model.get('lang');\n          var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n          var tab = window.open();\n          tab.document.write(html);\n          tab.document.title = title;\n        }\n      }\n  };\n\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: '#fff',\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n\n  return SaveAsImage;\n}(ToolboxFeature);\n\nexport default SaveAsImage;"],"mappings":"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"},"metadata":{},"sourceType":"script"}