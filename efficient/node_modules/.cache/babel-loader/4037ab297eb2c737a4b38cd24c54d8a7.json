{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireWildcard.js\").default;\n\nvar _interopRequireDefault = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.DEFAULT_TEXT_ANIMATION_PROPS = void 0;\nexports.hasSeparateFont = hasSeparateFont;\nexports.normalizeTextStyle = normalizeTextStyle;\nexports.parseFontSize = parseFontSize;\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nvar _tslib = require(\"tslib\");\n\nvar _parseText = require(\"./helper/parseText.js\");\n\nvar _TSpan = _interopRequireDefault(require(\"./TSpan.js\"));\n\nvar _util = require(\"../core/util.js\");\n\nvar _text = require(\"../contain/text.js\");\n\nvar _Image = _interopRequireDefault(require(\"./Image.js\"));\n\nvar _Rect = _interopRequireDefault(require(\"./shape/Rect.js\"));\n\nvar _BoundingRect = _interopRequireDefault(require(\"../core/BoundingRect.js\"));\n\nvar _Displayable = _interopRequireWildcard(require(\"./Displayable.js\"));\n\nvar _platform = require(\"../core/platform.js\");\n\nvar DEFAULT_RICH_TEXT_COLOR = {\n  fill: '#000'\n};\nvar DEFAULT_STROKE_LINE_WIDTH = 2;\nvar DEFAULT_TEXT_ANIMATION_PROPS = {\n  style: (0, _util.defaults)({\n    fill: true,\n    stroke: true,\n    fillOpacity: true,\n    strokeOpacity: true,\n    lineWidth: true,\n    fontSize: true,\n    lineHeight: true,\n    width: true,\n    height: true,\n    textShadowColor: true,\n    textShadowBlur: true,\n    textShadowOffsetX: true,\n    textShadowOffsetY: true,\n    backgroundColor: true,\n    padding: true,\n    borderColor: true,\n    borderWidth: true,\n    borderRadius: true\n  }, _Displayable.DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nexports.DEFAULT_TEXT_ANIMATION_PROPS = DEFAULT_TEXT_ANIMATION_PROPS;\n\nvar ZRText = function (_super) {\n  (0, _tslib.__extends)(ZRText, _super);\n\n  function ZRText(opts) {\n    var _this = _super.call(this) || this;\n\n    _this.type = 'text';\n    _this._children = [];\n    _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;\n\n    _this.attr(opts);\n\n    return _this;\n  }\n\n  ZRText.prototype.childrenRef = function () {\n    return this._children;\n  };\n\n  ZRText.prototype.update = function () {\n    _super.prototype.update.call(this);\n\n    if (this.styleChanged()) {\n      this._updateSubTexts();\n    }\n\n    for (var i = 0; i < this._children.length; i++) {\n      var child = this._children[i];\n      child.zlevel = this.zlevel;\n      child.z = this.z;\n      child.z2 = this.z2;\n      child.culling = this.culling;\n      child.cursor = this.cursor;\n      child.invisible = this.invisible;\n    }\n  };\n\n  ZRText.prototype.updateTransform = function () {\n    var innerTransformable = this.innerTransformable;\n\n    if (innerTransformable) {\n      innerTransformable.updateTransform();\n\n      if (innerTransformable.transform) {\n        this.transform = innerTransformable.transform;\n      }\n    } else {\n      _super.prototype.updateTransform.call(this);\n    }\n  };\n\n  ZRText.prototype.getLocalTransform = function (m) {\n    var innerTransformable = this.innerTransformable;\n    return innerTransformable ? innerTransformable.getLocalTransform(m) : _super.prototype.getLocalTransform.call(this, m);\n  };\n\n  ZRText.prototype.getComputedTransform = function () {\n    if (this.__hostTarget) {\n      this.__hostTarget.getComputedTransform();\n\n      this.__hostTarget.updateInnerText(true);\n    }\n\n    return _super.prototype.getComputedTransform.call(this);\n  };\n\n  ZRText.prototype._updateSubTexts = function () {\n    this._childCursor = 0;\n    normalizeTextStyle(this.style);\n    this.style.rich ? this._updateRichTexts() : this._updatePlainTexts();\n    this._children.length = this._childCursor;\n    this.styleUpdated();\n  };\n\n  ZRText.prototype.addSelfToZr = function (zr) {\n    _super.prototype.addSelfToZr.call(this, zr);\n\n    for (var i = 0; i < this._children.length; i++) {\n      this._children[i].__zr = zr;\n    }\n  };\n\n  ZRText.prototype.removeSelfFromZr = function (zr) {\n    _super.prototype.removeSelfFromZr.call(this, zr);\n\n    for (var i = 0; i < this._children.length; i++) {\n      this._children[i].__zr = null;\n    }\n  };\n\n  ZRText.prototype.getBoundingRect = function () {\n    if (this.styleChanged()) {\n      this._updateSubTexts();\n    }\n\n    if (!this._rect) {\n      var tmpRect = new _BoundingRect.default(0, 0, 0, 0);\n      var children = this._children;\n      var tmpMat = [];\n      var rect = null;\n\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n        var childRect = child.getBoundingRect();\n        var transform = child.getLocalTransform(tmpMat);\n\n        if (transform) {\n          tmpRect.copy(childRect);\n          tmpRect.applyTransform(transform);\n          rect = rect || tmpRect.clone();\n          rect.union(tmpRect);\n        } else {\n          rect = rect || childRect.clone();\n          rect.union(childRect);\n        }\n      }\n\n      this._rect = rect || tmpRect;\n    }\n\n    return this._rect;\n  };\n\n  ZRText.prototype.setDefaultTextStyle = function (defaultTextStyle) {\n    this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;\n  };\n\n  ZRText.prototype.setTextContent = function (textContent) {\n    if (process.env.NODE_ENV !== 'production') {\n      throw new Error('Can\\'t attach text on another text');\n    }\n  };\n\n  ZRText.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n    if (!sourceStyle) {\n      return targetStyle;\n    }\n\n    var sourceRich = sourceStyle.rich;\n    var targetRich = targetStyle.rich || sourceRich && {};\n    (0, _util.extend)(targetStyle, sourceStyle);\n\n    if (sourceRich && targetRich) {\n      this._mergeRich(targetRich, sourceRich);\n\n      targetStyle.rich = targetRich;\n    } else if (targetRich) {\n      targetStyle.rich = targetRich;\n    }\n\n    return targetStyle;\n  };\n\n  ZRText.prototype._mergeRich = function (targetRich, sourceRich) {\n    var richNames = (0, _util.keys)(sourceRich);\n\n    for (var i = 0; i < richNames.length; i++) {\n      var richName = richNames[i];\n      targetRich[richName] = targetRich[richName] || {};\n      (0, _util.extend)(targetRich[richName], sourceRich[richName]);\n    }\n  };\n\n  ZRText.prototype.getAnimationStyleProps = function () {\n    return DEFAULT_TEXT_ANIMATION_PROPS;\n  };\n\n  ZRText.prototype._getOrCreateChild = function (Ctor) {\n    var child = this._children[this._childCursor];\n\n    if (!child || !(child instanceof Ctor)) {\n      child = new Ctor();\n    }\n\n    this._children[this._childCursor++] = child;\n    child.__zr = this.__zr;\n    child.parent = this;\n    return child;\n  };\n\n  ZRText.prototype._updatePlainTexts = function () {\n    var style = this.style;\n    var textFont = style.font || _platform.DEFAULT_FONT;\n    var textPadding = style.padding;\n    var text = getStyleText(style);\n    var contentBlock = (0, _parseText.parsePlainText)(text, style);\n    var needDrawBg = needDrawBackground(style);\n    var bgColorDrawn = !!style.backgroundColor;\n    var outerHeight = contentBlock.outerHeight;\n    var outerWidth = contentBlock.outerWidth;\n    var contentWidth = contentBlock.contentWidth;\n    var textLines = contentBlock.lines;\n    var lineHeight = contentBlock.lineHeight;\n    var defaultStyle = this._defaultStyle;\n    var baseX = style.x || 0;\n    var baseY = style.y || 0;\n    var textAlign = style.align || defaultStyle.align || 'left';\n    var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign || 'top';\n    var textX = baseX;\n    var textY = (0, _text.adjustTextY)(baseY, contentBlock.contentHeight, verticalAlign);\n\n    if (needDrawBg || textPadding) {\n      var boxX = (0, _text.adjustTextX)(baseX, outerWidth, textAlign);\n      var boxY = (0, _text.adjustTextY)(baseY, outerHeight, verticalAlign);\n      needDrawBg && this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n    }\n\n    textY += lineHeight / 2;\n\n    if (textPadding) {\n      textX = getTextXForPadding(baseX, textAlign, textPadding);\n\n      if (verticalAlign === 'top') {\n        textY += textPadding[0];\n      } else if (verticalAlign === 'bottom') {\n        textY -= textPadding[2];\n      }\n    }\n\n    var defaultLineWidth = 0;\n    var useDefaultFill = false;\n    var textFill = getFill('fill' in style ? style.fill : (useDefaultFill = true, defaultStyle.fill));\n    var textStroke = getStroke('stroke' in style ? style.stroke : !bgColorDrawn && (!defaultStyle.autoStroke || useDefaultFill) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke) : null);\n    var hasShadow = style.textShadowBlur > 0;\n    var fixedBoundingRect = style.width != null && (style.overflow === 'truncate' || style.overflow === 'break' || style.overflow === 'breakAll');\n    var calculatedLineHeight = contentBlock.calculatedLineHeight;\n\n    for (var i = 0; i < textLines.length; i++) {\n      var el = this._getOrCreateChild(_TSpan.default);\n\n      var subElStyle = el.createStyle();\n      el.useStyle(subElStyle);\n      subElStyle.text = textLines[i];\n      subElStyle.x = textX;\n      subElStyle.y = textY;\n\n      if (textAlign) {\n        subElStyle.textAlign = textAlign;\n      }\n\n      subElStyle.textBaseline = 'middle';\n      subElStyle.opacity = style.opacity;\n      subElStyle.strokeFirst = true;\n\n      if (hasShadow) {\n        subElStyle.shadowBlur = style.textShadowBlur || 0;\n        subElStyle.shadowColor = style.textShadowColor || 'transparent';\n        subElStyle.shadowOffsetX = style.textShadowOffsetX || 0;\n        subElStyle.shadowOffsetY = style.textShadowOffsetY || 0;\n      }\n\n      subElStyle.stroke = textStroke;\n      subElStyle.fill = textFill;\n\n      if (textStroke) {\n        subElStyle.lineWidth = style.lineWidth || defaultLineWidth;\n        subElStyle.lineDash = style.lineDash;\n        subElStyle.lineDashOffset = style.lineDashOffset || 0;\n      }\n\n      subElStyle.font = textFont;\n      setSeparateFont(subElStyle, style);\n      textY += lineHeight;\n\n      if (fixedBoundingRect) {\n        el.setBoundingRect(new _BoundingRect.default((0, _text.adjustTextX)(subElStyle.x, style.width, subElStyle.textAlign), (0, _text.adjustTextY)(subElStyle.y, calculatedLineHeight, subElStyle.textBaseline), contentWidth, calculatedLineHeight));\n      }\n    }\n  };\n\n  ZRText.prototype._updateRichTexts = function () {\n    var style = this.style;\n    var text = getStyleText(style);\n    var contentBlock = (0, _parseText.parseRichText)(text, style);\n    var contentWidth = contentBlock.width;\n    var outerWidth = contentBlock.outerWidth;\n    var outerHeight = contentBlock.outerHeight;\n    var textPadding = style.padding;\n    var baseX = style.x || 0;\n    var baseY = style.y || 0;\n    var defaultStyle = this._defaultStyle;\n    var textAlign = style.align || defaultStyle.align;\n    var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign;\n    var boxX = (0, _text.adjustTextX)(baseX, outerWidth, textAlign);\n    var boxY = (0, _text.adjustTextY)(baseY, outerHeight, verticalAlign);\n    var xLeft = boxX;\n    var lineTop = boxY;\n\n    if (textPadding) {\n      xLeft += textPadding[3];\n      lineTop += textPadding[0];\n    }\n\n    var xRight = xLeft + contentWidth;\n\n    if (needDrawBackground(style)) {\n      this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n    }\n\n    var bgColorDrawn = !!style.backgroundColor;\n\n    for (var i = 0; i < contentBlock.lines.length; i++) {\n      var line = contentBlock.lines[i];\n      var tokens = line.tokens;\n      var tokenCount = tokens.length;\n      var lineHeight = line.lineHeight;\n      var remainedWidth = line.width;\n      var leftIndex = 0;\n      var lineXLeft = xLeft;\n      var lineXRight = xRight;\n      var rightIndex = tokenCount - 1;\n      var token = void 0;\n\n      while (leftIndex < tokenCount && (token = tokens[leftIndex], !token.align || token.align === 'left')) {\n        this._placeToken(token, style, lineHeight, lineTop, lineXLeft, 'left', bgColorDrawn);\n\n        remainedWidth -= token.width;\n        lineXLeft += token.width;\n        leftIndex++;\n      }\n\n      while (rightIndex >= 0 && (token = tokens[rightIndex], token.align === 'right')) {\n        this._placeToken(token, style, lineHeight, lineTop, lineXRight, 'right', bgColorDrawn);\n\n        remainedWidth -= token.width;\n        lineXRight -= token.width;\n        rightIndex--;\n      }\n\n      lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;\n\n      while (leftIndex <= rightIndex) {\n        token = tokens[leftIndex];\n\n        this._placeToken(token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center', bgColorDrawn);\n\n        lineXLeft += token.width;\n        leftIndex++;\n      }\n\n      lineTop += lineHeight;\n    }\n  };\n\n  ZRText.prototype._placeToken = function (token, style, lineHeight, lineTop, x, textAlign, parentBgColorDrawn) {\n    var tokenStyle = style.rich[token.styleName] || {};\n    tokenStyle.text = token.text;\n    var verticalAlign = token.verticalAlign;\n    var y = lineTop + lineHeight / 2;\n\n    if (verticalAlign === 'top') {\n      y = lineTop + token.height / 2;\n    } else if (verticalAlign === 'bottom') {\n      y = lineTop + lineHeight - token.height / 2;\n    }\n\n    var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);\n    needDrawBg && this._renderBackground(tokenStyle, style, textAlign === 'right' ? x - token.width : textAlign === 'center' ? x - token.width / 2 : x, y - token.height / 2, token.width, token.height);\n    var bgColorDrawn = !!tokenStyle.backgroundColor;\n    var textPadding = token.textPadding;\n\n    if (textPadding) {\n      x = getTextXForPadding(x, textAlign, textPadding);\n      y -= token.height / 2 - textPadding[0] - token.innerHeight / 2;\n    }\n\n    var el = this._getOrCreateChild(_TSpan.default);\n\n    var subElStyle = el.createStyle();\n    el.useStyle(subElStyle);\n    var defaultStyle = this._defaultStyle;\n    var useDefaultFill = false;\n    var defaultLineWidth = 0;\n    var textFill = getFill('fill' in tokenStyle ? tokenStyle.fill : 'fill' in style ? style.fill : (useDefaultFill = true, defaultStyle.fill));\n    var textStroke = getStroke('stroke' in tokenStyle ? tokenStyle.stroke : 'stroke' in style ? style.stroke : !bgColorDrawn && !parentBgColorDrawn && (!defaultStyle.autoStroke || useDefaultFill) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke) : null);\n    var hasShadow = tokenStyle.textShadowBlur > 0 || style.textShadowBlur > 0;\n    subElStyle.text = token.text;\n    subElStyle.x = x;\n    subElStyle.y = y;\n\n    if (hasShadow) {\n      subElStyle.shadowBlur = tokenStyle.textShadowBlur || style.textShadowBlur || 0;\n      subElStyle.shadowColor = tokenStyle.textShadowColor || style.textShadowColor || 'transparent';\n      subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style.textShadowOffsetX || 0;\n      subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style.textShadowOffsetY || 0;\n    }\n\n    subElStyle.textAlign = textAlign;\n    subElStyle.textBaseline = 'middle';\n    subElStyle.font = token.font || _platform.DEFAULT_FONT;\n    subElStyle.opacity = (0, _util.retrieve3)(tokenStyle.opacity, style.opacity, 1);\n    setSeparateFont(subElStyle, tokenStyle);\n\n    if (textStroke) {\n      subElStyle.lineWidth = (0, _util.retrieve3)(tokenStyle.lineWidth, style.lineWidth, defaultLineWidth);\n      subElStyle.lineDash = (0, _util.retrieve2)(tokenStyle.lineDash, style.lineDash);\n      subElStyle.lineDashOffset = style.lineDashOffset || 0;\n      subElStyle.stroke = textStroke;\n    }\n\n    if (textFill) {\n      subElStyle.fill = textFill;\n    }\n\n    var textWidth = token.contentWidth;\n    var textHeight = token.contentHeight;\n    el.setBoundingRect(new _BoundingRect.default((0, _text.adjustTextX)(subElStyle.x, textWidth, subElStyle.textAlign), (0, _text.adjustTextY)(subElStyle.y, textHeight, subElStyle.textBaseline), textWidth, textHeight));\n  };\n\n  ZRText.prototype._renderBackground = function (style, topStyle, x, y, width, height) {\n    var textBackgroundColor = style.backgroundColor;\n    var textBorderWidth = style.borderWidth;\n    var textBorderColor = style.borderColor;\n    var isImageBg = textBackgroundColor && textBackgroundColor.image;\n    var isPlainOrGradientBg = textBackgroundColor && !isImageBg;\n    var textBorderRadius = style.borderRadius;\n    var self = this;\n    var rectEl;\n    var imgEl;\n\n    if (isPlainOrGradientBg || style.lineHeight || textBorderWidth && textBorderColor) {\n      rectEl = this._getOrCreateChild(_Rect.default);\n      rectEl.useStyle(rectEl.createStyle());\n      rectEl.style.fill = null;\n      var rectShape = rectEl.shape;\n      rectShape.x = x;\n      rectShape.y = y;\n      rectShape.width = width;\n      rectShape.height = height;\n      rectShape.r = textBorderRadius;\n      rectEl.dirtyShape();\n    }\n\n    if (isPlainOrGradientBg) {\n      var rectStyle = rectEl.style;\n      rectStyle.fill = textBackgroundColor || null;\n      rectStyle.fillOpacity = (0, _util.retrieve2)(style.fillOpacity, 1);\n    } else if (isImageBg) {\n      imgEl = this._getOrCreateChild(_Image.default);\n\n      imgEl.onload = function () {\n        self.dirtyStyle();\n      };\n\n      var imgStyle = imgEl.style;\n      imgStyle.image = textBackgroundColor.image;\n      imgStyle.x = x;\n      imgStyle.y = y;\n      imgStyle.width = width;\n      imgStyle.height = height;\n    }\n\n    if (textBorderWidth && textBorderColor) {\n      var rectStyle = rectEl.style;\n      rectStyle.lineWidth = textBorderWidth;\n      rectStyle.stroke = textBorderColor;\n      rectStyle.strokeOpacity = (0, _util.retrieve2)(style.strokeOpacity, 1);\n      rectStyle.lineDash = style.borderDash;\n      rectStyle.lineDashOffset = style.borderDashOffset || 0;\n      rectEl.strokeContainThreshold = 0;\n\n      if (rectEl.hasFill() && rectEl.hasStroke()) {\n        rectStyle.strokeFirst = true;\n        rectStyle.lineWidth *= 2;\n      }\n    }\n\n    var commonStyle = (rectEl || imgEl).style;\n    commonStyle.shadowBlur = style.shadowBlur || 0;\n    commonStyle.shadowColor = style.shadowColor || 'transparent';\n    commonStyle.shadowOffsetX = style.shadowOffsetX || 0;\n    commonStyle.shadowOffsetY = style.shadowOffsetY || 0;\n    commonStyle.opacity = (0, _util.retrieve3)(style.opacity, topStyle.opacity, 1);\n  };\n\n  ZRText.makeFont = function (style) {\n    var font = '';\n\n    if (hasSeparateFont(style)) {\n      font = [style.fontStyle, style.fontWeight, parseFontSize(style.fontSize), style.fontFamily || 'sans-serif'].join(' ');\n    }\n\n    return font && (0, _util.trim)(font) || style.textFont || style.font;\n  };\n\n  return ZRText;\n}(_Displayable.default);\n\nvar VALID_TEXT_ALIGN = {\n  left: true,\n  right: 1,\n  center: 1\n};\nvar VALID_TEXT_VERTICAL_ALIGN = {\n  top: 1,\n  bottom: 1,\n  middle: 1\n};\nvar FONT_PARTS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily'];\n\nfunction parseFontSize(fontSize) {\n  if (typeof fontSize === 'string' && (fontSize.indexOf('px') !== -1 || fontSize.indexOf('rem') !== -1 || fontSize.indexOf('em') !== -1)) {\n    return fontSize;\n  } else if (!isNaN(+fontSize)) {\n    return fontSize + 'px';\n  } else {\n    return _platform.DEFAULT_FONT_SIZE + 'px';\n  }\n}\n\nfunction setSeparateFont(targetStyle, sourceStyle) {\n  for (var i = 0; i < FONT_PARTS.length; i++) {\n    var fontProp = FONT_PARTS[i];\n    var val = sourceStyle[fontProp];\n\n    if (val != null) {\n      targetStyle[fontProp] = val;\n    }\n  }\n}\n\nfunction hasSeparateFont(style) {\n  return style.fontSize != null || style.fontFamily || style.fontWeight;\n}\n\nfunction normalizeTextStyle(style) {\n  normalizeStyle(style);\n  (0, _util.each)(style.rich, normalizeStyle);\n  return style;\n}\n\nfunction normalizeStyle(style) {\n  if (style) {\n    style.font = ZRText.makeFont(style);\n    var textAlign = style.align;\n    textAlign === 'middle' && (textAlign = 'center');\n    style.align = textAlign == null || VALID_TEXT_ALIGN[textAlign] ? textAlign : 'left';\n    var verticalAlign = style.verticalAlign;\n    verticalAlign === 'center' && (verticalAlign = 'middle');\n    style.verticalAlign = verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign] ? verticalAlign : 'top';\n    var textPadding = style.padding;\n\n    if (textPadding) {\n      style.padding = (0, _util.normalizeCssArray)(style.padding);\n    }\n  }\n}\n\nfunction getStroke(stroke, lineWidth) {\n  return stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none' ? null : stroke.image || stroke.colorStops ? '#000' : stroke;\n}\n\nfunction getFill(fill) {\n  return fill == null || fill === 'none' ? null : fill.image || fill.colorStops ? '#000' : fill;\n}\n\nfunction getTextXForPadding(x, textAlign, textPadding) {\n  return textAlign === 'right' ? x - textPadding[1] : textAlign === 'center' ? x + textPadding[3] / 2 - textPadding[1] / 2 : x + textPadding[3];\n}\n\nfunction getStyleText(style) {\n  var text = style.text;\n  text != null && (text += '');\n  return text;\n}\n\nfunction needDrawBackground(style) {\n  return !!(style.backgroundColor || style.lineHeight || style.borderWidth && style.borderColor);\n}\n\nvar _default = ZRText;\nexports.default = _default;","map":{"version":3,"names":["DEFAULT_RICH_TEXT_COLOR","fill","DEFAULT_STROKE_LINE_WIDTH","DEFAULT_TEXT_ANIMATION_PROPS","style","defaults","stroke","fillOpacity","strokeOpacity","lineWidth","fontSize","lineHeight","width","height","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","padding","borderColor","borderWidth","borderRadius","DEFAULT_COMMON_ANIMATION_PROPS","ZRText","_super","__extends","opts","_this","call","type","_children","_defaultStyle","attr","prototype","childrenRef","update","styleChanged","_updateSubTexts","i","length","child","zlevel","z","z2","culling","cursor","invisible","updateTransform","innerTransformable","transform","getLocalTransform","m","getComputedTransform","__hostTarget","updateInnerText","_childCursor","normalizeTextStyle","rich","_updateRichTexts","_updatePlainTexts","styleUpdated","addSelfToZr","zr","__zr","removeSelfFromZr","getBoundingRect","_rect","tmpRect","BoundingRect","children","tmpMat","rect","childRect","copy","applyTransform","clone","union","setDefaultTextStyle","defaultTextStyle","setTextContent","textContent","process","env","NODE_ENV","Error","_mergeStyle","targetStyle","sourceStyle","sourceRich","targetRich","extend","_mergeRich","richNames","keys","richName","getAnimationStyleProps","_getOrCreateChild","Ctor","parent","textFont","font","DEFAULT_FONT","textPadding","text","getStyleText","contentBlock","parsePlainText","needDrawBg","needDrawBackground","bgColorDrawn","outerHeight","outerWidth","contentWidth","textLines","lines","defaultStyle","baseX","x","baseY","y","textAlign","align","verticalAlign","textX","textY","adjustTextY","contentHeight","boxX","adjustTextX","boxY","_renderBackground","getTextXForPadding","defaultLineWidth","useDefaultFill","textFill","getFill","textStroke","getStroke","autoStroke","hasShadow","fixedBoundingRect","overflow","calculatedLineHeight","el","TSpan","subElStyle","createStyle","useStyle","textBaseline","opacity","strokeFirst","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","lineDash","lineDashOffset","setSeparateFont","setBoundingRect","parseRichText","xLeft","lineTop","xRight","line","tokens","tokenCount","remainedWidth","leftIndex","lineXLeft","lineXRight","rightIndex","token","_placeToken","parentBgColorDrawn","tokenStyle","styleName","isLineHolder","innerHeight","retrieve3","retrieve2","textWidth","textHeight","topStyle","textBackgroundColor","textBorderWidth","textBorderColor","isImageBg","image","isPlainOrGradientBg","textBorderRadius","self","rectEl","imgEl","Rect","rectShape","shape","r","dirtyShape","rectStyle","ZRImage","onload","dirtyStyle","imgStyle","borderDash","borderDashOffset","strokeContainThreshold","hasFill","hasStroke","commonStyle","makeFont","hasSeparateFont","fontStyle","fontWeight","parseFontSize","fontFamily","join","trim","Displayable","VALID_TEXT_ALIGN","left","right","center","VALID_TEXT_VERTICAL_ALIGN","top","bottom","middle","FONT_PARTS","indexOf","isNaN","DEFAULT_FONT_SIZE","fontProp","val","normalizeStyle","each","normalizeCssArray","colorStops"],"sources":["C:/Users/Z/Desktop/efficient/node_modules/zrender/lib/graphic/Text.js"],"sourcesContent":["import { __extends } from \"tslib\";\nimport { parseRichText, parsePlainText } from './helper/parseText.js';\nimport TSpan from './TSpan.js';\nimport { retrieve2, each, normalizeCssArray, trim, retrieve3, extend, keys, defaults } from '../core/util.js';\nimport { adjustTextX, adjustTextY } from '../contain/text.js';\nimport ZRImage from './Image.js';\nimport Rect from './shape/Rect.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport Displayable, { DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport { DEFAULT_FONT, DEFAULT_FONT_SIZE } from '../core/platform.js';\nvar DEFAULT_RICH_TEXT_COLOR = {\n    fill: '#000'\n};\nvar DEFAULT_STROKE_LINE_WIDTH = 2;\nexport var DEFAULT_TEXT_ANIMATION_PROPS = {\n    style: defaults({\n        fill: true,\n        stroke: true,\n        fillOpacity: true,\n        strokeOpacity: true,\n        lineWidth: true,\n        fontSize: true,\n        lineHeight: true,\n        width: true,\n        height: true,\n        textShadowColor: true,\n        textShadowBlur: true,\n        textShadowOffsetX: true,\n        textShadowOffsetY: true,\n        backgroundColor: true,\n        padding: true,\n        borderColor: true,\n        borderWidth: true,\n        borderRadius: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar ZRText = (function (_super) {\n    __extends(ZRText, _super);\n    function ZRText(opts) {\n        var _this = _super.call(this) || this;\n        _this.type = 'text';\n        _this._children = [];\n        _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;\n        _this.attr(opts);\n        return _this;\n    }\n    ZRText.prototype.childrenRef = function () {\n        return this._children;\n    };\n    ZRText.prototype.update = function () {\n        _super.prototype.update.call(this);\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.zlevel = this.zlevel;\n            child.z = this.z;\n            child.z2 = this.z2;\n            child.culling = this.culling;\n            child.cursor = this.cursor;\n            child.invisible = this.invisible;\n        }\n    };\n    ZRText.prototype.updateTransform = function () {\n        var innerTransformable = this.innerTransformable;\n        if (innerTransformable) {\n            innerTransformable.updateTransform();\n            if (innerTransformable.transform) {\n                this.transform = innerTransformable.transform;\n            }\n        }\n        else {\n            _super.prototype.updateTransform.call(this);\n        }\n    };\n    ZRText.prototype.getLocalTransform = function (m) {\n        var innerTransformable = this.innerTransformable;\n        return innerTransformable\n            ? innerTransformable.getLocalTransform(m)\n            : _super.prototype.getLocalTransform.call(this, m);\n    };\n    ZRText.prototype.getComputedTransform = function () {\n        if (this.__hostTarget) {\n            this.__hostTarget.getComputedTransform();\n            this.__hostTarget.updateInnerText(true);\n        }\n        return _super.prototype.getComputedTransform.call(this);\n    };\n    ZRText.prototype._updateSubTexts = function () {\n        this._childCursor = 0;\n        normalizeTextStyle(this.style);\n        this.style.rich\n            ? this._updateRichTexts()\n            : this._updatePlainTexts();\n        this._children.length = this._childCursor;\n        this.styleUpdated();\n    };\n    ZRText.prototype.addSelfToZr = function (zr) {\n        _super.prototype.addSelfToZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = zr;\n        }\n    };\n    ZRText.prototype.removeSelfFromZr = function (zr) {\n        _super.prototype.removeSelfFromZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = null;\n        }\n    };\n    ZRText.prototype.getBoundingRect = function () {\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        if (!this._rect) {\n            var tmpRect = new BoundingRect(0, 0, 0, 0);\n            var children = this._children;\n            var tmpMat = [];\n            var rect = null;\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                var childRect = child.getBoundingRect();\n                var transform = child.getLocalTransform(tmpMat);\n                if (transform) {\n                    tmpRect.copy(childRect);\n                    tmpRect.applyTransform(transform);\n                    rect = rect || tmpRect.clone();\n                    rect.union(tmpRect);\n                }\n                else {\n                    rect = rect || childRect.clone();\n                    rect.union(childRect);\n                }\n            }\n            this._rect = rect || tmpRect;\n        }\n        return this._rect;\n    };\n    ZRText.prototype.setDefaultTextStyle = function (defaultTextStyle) {\n        this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;\n    };\n    ZRText.prototype.setTextContent = function (textContent) {\n        if (process.env.NODE_ENV !== 'production') {\n            throw new Error('Can\\'t attach text on another text');\n        }\n    };\n    ZRText.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n        if (!sourceStyle) {\n            return targetStyle;\n        }\n        var sourceRich = sourceStyle.rich;\n        var targetRich = targetStyle.rich || (sourceRich && {});\n        extend(targetStyle, sourceStyle);\n        if (sourceRich && targetRich) {\n            this._mergeRich(targetRich, sourceRich);\n            targetStyle.rich = targetRich;\n        }\n        else if (targetRich) {\n            targetStyle.rich = targetRich;\n        }\n        return targetStyle;\n    };\n    ZRText.prototype._mergeRich = function (targetRich, sourceRich) {\n        var richNames = keys(sourceRich);\n        for (var i = 0; i < richNames.length; i++) {\n            var richName = richNames[i];\n            targetRich[richName] = targetRich[richName] || {};\n            extend(targetRich[richName], sourceRich[richName]);\n        }\n    };\n    ZRText.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_TEXT_ANIMATION_PROPS;\n    };\n    ZRText.prototype._getOrCreateChild = function (Ctor) {\n        var child = this._children[this._childCursor];\n        if (!child || !(child instanceof Ctor)) {\n            child = new Ctor();\n        }\n        this._children[this._childCursor++] = child;\n        child.__zr = this.__zr;\n        child.parent = this;\n        return child;\n    };\n    ZRText.prototype._updatePlainTexts = function () {\n        var style = this.style;\n        var textFont = style.font || DEFAULT_FONT;\n        var textPadding = style.padding;\n        var text = getStyleText(style);\n        var contentBlock = parsePlainText(text, style);\n        var needDrawBg = needDrawBackground(style);\n        var bgColorDrawn = !!(style.backgroundColor);\n        var outerHeight = contentBlock.outerHeight;\n        var outerWidth = contentBlock.outerWidth;\n        var contentWidth = contentBlock.contentWidth;\n        var textLines = contentBlock.lines;\n        var lineHeight = contentBlock.lineHeight;\n        var defaultStyle = this._defaultStyle;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var textAlign = style.align || defaultStyle.align || 'left';\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign || 'top';\n        var textX = baseX;\n        var textY = adjustTextY(baseY, contentBlock.contentHeight, verticalAlign);\n        if (needDrawBg || textPadding) {\n            var boxX = adjustTextX(baseX, outerWidth, textAlign);\n            var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n            needDrawBg && this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        textY += lineHeight / 2;\n        if (textPadding) {\n            textX = getTextXForPadding(baseX, textAlign, textPadding);\n            if (verticalAlign === 'top') {\n                textY += textPadding[0];\n            }\n            else if (verticalAlign === 'bottom') {\n                textY -= textPadding[2];\n            }\n        }\n        var defaultLineWidth = 0;\n        var useDefaultFill = false;\n        var textFill = getFill('fill' in style\n            ? style.fill\n            : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in style\n            ? style.stroke\n            : (!bgColorDrawn\n                && (!defaultStyle.autoStroke || useDefaultFill))\n                ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                : null);\n        var hasShadow = style.textShadowBlur > 0;\n        var fixedBoundingRect = style.width != null\n            && (style.overflow === 'truncate' || style.overflow === 'break' || style.overflow === 'breakAll');\n        var calculatedLineHeight = contentBlock.calculatedLineHeight;\n        for (var i = 0; i < textLines.length; i++) {\n            var el = this._getOrCreateChild(TSpan);\n            var subElStyle = el.createStyle();\n            el.useStyle(subElStyle);\n            subElStyle.text = textLines[i];\n            subElStyle.x = textX;\n            subElStyle.y = textY;\n            if (textAlign) {\n                subElStyle.textAlign = textAlign;\n            }\n            subElStyle.textBaseline = 'middle';\n            subElStyle.opacity = style.opacity;\n            subElStyle.strokeFirst = true;\n            if (hasShadow) {\n                subElStyle.shadowBlur = style.textShadowBlur || 0;\n                subElStyle.shadowColor = style.textShadowColor || 'transparent';\n                subElStyle.shadowOffsetX = style.textShadowOffsetX || 0;\n                subElStyle.shadowOffsetY = style.textShadowOffsetY || 0;\n            }\n            subElStyle.stroke = textStroke;\n            subElStyle.fill = textFill;\n            if (textStroke) {\n                subElStyle.lineWidth = style.lineWidth || defaultLineWidth;\n                subElStyle.lineDash = style.lineDash;\n                subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            }\n            subElStyle.font = textFont;\n            setSeparateFont(subElStyle, style);\n            textY += lineHeight;\n            if (fixedBoundingRect) {\n                el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, style.width, subElStyle.textAlign), adjustTextY(subElStyle.y, calculatedLineHeight, subElStyle.textBaseline), contentWidth, calculatedLineHeight));\n            }\n        }\n    };\n    ZRText.prototype._updateRichTexts = function () {\n        var style = this.style;\n        var text = getStyleText(style);\n        var contentBlock = parseRichText(text, style);\n        var contentWidth = contentBlock.width;\n        var outerWidth = contentBlock.outerWidth;\n        var outerHeight = contentBlock.outerHeight;\n        var textPadding = style.padding;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var defaultStyle = this._defaultStyle;\n        var textAlign = style.align || defaultStyle.align;\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign;\n        var boxX = adjustTextX(baseX, outerWidth, textAlign);\n        var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n        var xLeft = boxX;\n        var lineTop = boxY;\n        if (textPadding) {\n            xLeft += textPadding[3];\n            lineTop += textPadding[0];\n        }\n        var xRight = xLeft + contentWidth;\n        if (needDrawBackground(style)) {\n            this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        var bgColorDrawn = !!(style.backgroundColor);\n        for (var i = 0; i < contentBlock.lines.length; i++) {\n            var line = contentBlock.lines[i];\n            var tokens = line.tokens;\n            var tokenCount = tokens.length;\n            var lineHeight = line.lineHeight;\n            var remainedWidth = line.width;\n            var leftIndex = 0;\n            var lineXLeft = xLeft;\n            var lineXRight = xRight;\n            var rightIndex = tokenCount - 1;\n            var token = void 0;\n            while (leftIndex < tokenCount\n                && (token = tokens[leftIndex], !token.align || token.align === 'left')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft, 'left', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            while (rightIndex >= 0\n                && (token = tokens[rightIndex], token.align === 'right')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXRight, 'right', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXRight -= token.width;\n                rightIndex--;\n            }\n            lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;\n            while (leftIndex <= rightIndex) {\n                token = tokens[leftIndex];\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center', bgColorDrawn);\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            lineTop += lineHeight;\n        }\n    };\n    ZRText.prototype._placeToken = function (token, style, lineHeight, lineTop, x, textAlign, parentBgColorDrawn) {\n        var tokenStyle = style.rich[token.styleName] || {};\n        tokenStyle.text = token.text;\n        var verticalAlign = token.verticalAlign;\n        var y = lineTop + lineHeight / 2;\n        if (verticalAlign === 'top') {\n            y = lineTop + token.height / 2;\n        }\n        else if (verticalAlign === 'bottom') {\n            y = lineTop + lineHeight - token.height / 2;\n        }\n        var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);\n        needDrawBg && this._renderBackground(tokenStyle, style, textAlign === 'right'\n            ? x - token.width\n            : textAlign === 'center'\n                ? x - token.width / 2\n                : x, y - token.height / 2, token.width, token.height);\n        var bgColorDrawn = !!tokenStyle.backgroundColor;\n        var textPadding = token.textPadding;\n        if (textPadding) {\n            x = getTextXForPadding(x, textAlign, textPadding);\n            y -= token.height / 2 - textPadding[0] - token.innerHeight / 2;\n        }\n        var el = this._getOrCreateChild(TSpan);\n        var subElStyle = el.createStyle();\n        el.useStyle(subElStyle);\n        var defaultStyle = this._defaultStyle;\n        var useDefaultFill = false;\n        var defaultLineWidth = 0;\n        var textFill = getFill('fill' in tokenStyle ? tokenStyle.fill\n            : 'fill' in style ? style.fill\n                : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in tokenStyle ? tokenStyle.stroke\n            : 'stroke' in style ? style.stroke\n                : (!bgColorDrawn\n                    && !parentBgColorDrawn\n                    && (!defaultStyle.autoStroke || useDefaultFill)) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                    : null);\n        var hasShadow = tokenStyle.textShadowBlur > 0\n            || style.textShadowBlur > 0;\n        subElStyle.text = token.text;\n        subElStyle.x = x;\n        subElStyle.y = y;\n        if (hasShadow) {\n            subElStyle.shadowBlur = tokenStyle.textShadowBlur || style.textShadowBlur || 0;\n            subElStyle.shadowColor = tokenStyle.textShadowColor || style.textShadowColor || 'transparent';\n            subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style.textShadowOffsetX || 0;\n            subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style.textShadowOffsetY || 0;\n        }\n        subElStyle.textAlign = textAlign;\n        subElStyle.textBaseline = 'middle';\n        subElStyle.font = token.font || DEFAULT_FONT;\n        subElStyle.opacity = retrieve3(tokenStyle.opacity, style.opacity, 1);\n        setSeparateFont(subElStyle, tokenStyle);\n        if (textStroke) {\n            subElStyle.lineWidth = retrieve3(tokenStyle.lineWidth, style.lineWidth, defaultLineWidth);\n            subElStyle.lineDash = retrieve2(tokenStyle.lineDash, style.lineDash);\n            subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            subElStyle.stroke = textStroke;\n        }\n        if (textFill) {\n            subElStyle.fill = textFill;\n        }\n        var textWidth = token.contentWidth;\n        var textHeight = token.contentHeight;\n        el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, textWidth, subElStyle.textAlign), adjustTextY(subElStyle.y, textHeight, subElStyle.textBaseline), textWidth, textHeight));\n    };\n    ZRText.prototype._renderBackground = function (style, topStyle, x, y, width, height) {\n        var textBackgroundColor = style.backgroundColor;\n        var textBorderWidth = style.borderWidth;\n        var textBorderColor = style.borderColor;\n        var isImageBg = textBackgroundColor && textBackgroundColor.image;\n        var isPlainOrGradientBg = textBackgroundColor && !isImageBg;\n        var textBorderRadius = style.borderRadius;\n        var self = this;\n        var rectEl;\n        var imgEl;\n        if (isPlainOrGradientBg || style.lineHeight || (textBorderWidth && textBorderColor)) {\n            rectEl = this._getOrCreateChild(Rect);\n            rectEl.useStyle(rectEl.createStyle());\n            rectEl.style.fill = null;\n            var rectShape = rectEl.shape;\n            rectShape.x = x;\n            rectShape.y = y;\n            rectShape.width = width;\n            rectShape.height = height;\n            rectShape.r = textBorderRadius;\n            rectEl.dirtyShape();\n        }\n        if (isPlainOrGradientBg) {\n            var rectStyle = rectEl.style;\n            rectStyle.fill = textBackgroundColor || null;\n            rectStyle.fillOpacity = retrieve2(style.fillOpacity, 1);\n        }\n        else if (isImageBg) {\n            imgEl = this._getOrCreateChild(ZRImage);\n            imgEl.onload = function () {\n                self.dirtyStyle();\n            };\n            var imgStyle = imgEl.style;\n            imgStyle.image = textBackgroundColor.image;\n            imgStyle.x = x;\n            imgStyle.y = y;\n            imgStyle.width = width;\n            imgStyle.height = height;\n        }\n        if (textBorderWidth && textBorderColor) {\n            var rectStyle = rectEl.style;\n            rectStyle.lineWidth = textBorderWidth;\n            rectStyle.stroke = textBorderColor;\n            rectStyle.strokeOpacity = retrieve2(style.strokeOpacity, 1);\n            rectStyle.lineDash = style.borderDash;\n            rectStyle.lineDashOffset = style.borderDashOffset || 0;\n            rectEl.strokeContainThreshold = 0;\n            if (rectEl.hasFill() && rectEl.hasStroke()) {\n                rectStyle.strokeFirst = true;\n                rectStyle.lineWidth *= 2;\n            }\n        }\n        var commonStyle = (rectEl || imgEl).style;\n        commonStyle.shadowBlur = style.shadowBlur || 0;\n        commonStyle.shadowColor = style.shadowColor || 'transparent';\n        commonStyle.shadowOffsetX = style.shadowOffsetX || 0;\n        commonStyle.shadowOffsetY = style.shadowOffsetY || 0;\n        commonStyle.opacity = retrieve3(style.opacity, topStyle.opacity, 1);\n    };\n    ZRText.makeFont = function (style) {\n        var font = '';\n        if (hasSeparateFont(style)) {\n            font = [\n                style.fontStyle,\n                style.fontWeight,\n                parseFontSize(style.fontSize),\n                style.fontFamily || 'sans-serif'\n            ].join(' ');\n        }\n        return font && trim(font) || style.textFont || style.font;\n    };\n    return ZRText;\n}(Displayable));\nvar VALID_TEXT_ALIGN = { left: true, right: 1, center: 1 };\nvar VALID_TEXT_VERTICAL_ALIGN = { top: 1, bottom: 1, middle: 1 };\nvar FONT_PARTS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily'];\nexport function parseFontSize(fontSize) {\n    if (typeof fontSize === 'string'\n        && (fontSize.indexOf('px') !== -1\n            || fontSize.indexOf('rem') !== -1\n            || fontSize.indexOf('em') !== -1)) {\n        return fontSize;\n    }\n    else if (!isNaN(+fontSize)) {\n        return fontSize + 'px';\n    }\n    else {\n        return DEFAULT_FONT_SIZE + 'px';\n    }\n}\nfunction setSeparateFont(targetStyle, sourceStyle) {\n    for (var i = 0; i < FONT_PARTS.length; i++) {\n        var fontProp = FONT_PARTS[i];\n        var val = sourceStyle[fontProp];\n        if (val != null) {\n            targetStyle[fontProp] = val;\n        }\n    }\n}\nexport function hasSeparateFont(style) {\n    return style.fontSize != null || style.fontFamily || style.fontWeight;\n}\nexport function normalizeTextStyle(style) {\n    normalizeStyle(style);\n    each(style.rich, normalizeStyle);\n    return style;\n}\nfunction normalizeStyle(style) {\n    if (style) {\n        style.font = ZRText.makeFont(style);\n        var textAlign = style.align;\n        textAlign === 'middle' && (textAlign = 'center');\n        style.align = (textAlign == null || VALID_TEXT_ALIGN[textAlign]) ? textAlign : 'left';\n        var verticalAlign = style.verticalAlign;\n        verticalAlign === 'center' && (verticalAlign = 'middle');\n        style.verticalAlign = (verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign]) ? verticalAlign : 'top';\n        var textPadding = style.padding;\n        if (textPadding) {\n            style.padding = normalizeCssArray(style.padding);\n        }\n    }\n}\nfunction getStroke(stroke, lineWidth) {\n    return (stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none')\n        ? null\n        : (stroke.image || stroke.colorStops)\n            ? '#000'\n            : stroke;\n}\nfunction getFill(fill) {\n    return (fill == null || fill === 'none')\n        ? null\n        : (fill.image || fill.colorStops)\n            ? '#000'\n            : fill;\n}\nfunction getTextXForPadding(x, textAlign, textPadding) {\n    return textAlign === 'right'\n        ? (x - textPadding[1])\n        : textAlign === 'center'\n            ? (x + textPadding[3] / 2 - textPadding[1] / 2)\n            : (x + textPadding[3]);\n}\nfunction getStyleText(style) {\n    var text = style.text;\n    text != null && (text += '');\n    return text;\n}\nfunction needDrawBackground(style) {\n    return !!(style.backgroundColor\n        || style.lineHeight\n        || (style.borderWidth && style.borderColor));\n}\nexport default ZRText;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}