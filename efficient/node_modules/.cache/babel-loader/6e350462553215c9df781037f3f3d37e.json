{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EASING_MAP = exports.ANIMATE_STYLE_MAP = void 0;\nexports.createCSSAnimation = createCSSAnimation;\n\nvar _Transformable = require(\"../core/Transformable.js\");\n\nvar _core = require(\"./core.js\");\n\nvar _SVGPathRebuilder = _interopRequireDefault(require(\"./SVGPathRebuilder.js\"));\n\nvar _PathProxy = _interopRequireDefault(require(\"../core/PathProxy.js\"));\n\nvar _helper = require(\"./helper.js\");\n\nvar _util = require(\"../core/util.js\");\n\nvar _CompoundPath = _interopRequireDefault(require(\"../graphic/CompoundPath.js\"));\n\nvar _cubicEasing = require(\"../animation/cubicEasing.js\");\n\nvar EASING_MAP = {\n  cubicIn: '0.32,0,0.67,0',\n  cubicOut: '0.33,1,0.68,1',\n  cubicInOut: '0.65,0,0.35,1',\n  quadraticIn: '0.11,0,0.5,0',\n  quadraticOut: '0.5,1,0.89,1',\n  quadraticInOut: '0.45,0,0.55,1',\n  quarticIn: '0.5,0,0.75,0',\n  quarticOut: '0.25,1,0.5,1',\n  quarticInOut: '0.76,0,0.24,1',\n  quinticIn: '0.64,0,0.78,0',\n  quinticOut: '0.22,1,0.36,1',\n  quinticInOut: '0.83,0,0.17,1',\n  sinusoidalIn: '0.12,0,0.39,0',\n  sinusoidalOut: '0.61,1,0.88,1',\n  sinusoidalInOut: '0.37,0,0.63,1',\n  exponentialIn: '0.7,0,0.84,0',\n  exponentialOut: '0.16,1,0.3,1',\n  exponentialInOut: '0.87,0,0.13,1',\n  circularIn: '0.55,0,1,0.45',\n  circularOut: '0,0.55,0.45,1',\n  circularInOut: '0.85,0,0.15,1'\n};\nexports.EASING_MAP = EASING_MAP;\nvar transformOriginKey = 'transform-origin';\n\nfunction buildPathString(el, kfShape, path) {\n  var shape = (0, _util.extend)({}, el.shape);\n  (0, _util.extend)(shape, kfShape);\n  el.buildPath(path, shape);\n  var svgPathBuilder = new _SVGPathRebuilder.default();\n  svgPathBuilder.reset((0, _helper.getPathPrecision)(el));\n  path.rebuildPath(svgPathBuilder, 1);\n  svgPathBuilder.generateStr();\n  return svgPathBuilder.getStr();\n}\n\nfunction setTransformOrigin(target, transform) {\n  var originX = transform.originX,\n      originY = transform.originY;\n\n  if (originX || originY) {\n    target[transformOriginKey] = originX + \"px \" + originY + \"px\";\n  }\n}\n\nvar ANIMATE_STYLE_MAP = {\n  fill: 'fill',\n  opacity: 'opacity',\n  lineWidth: 'stroke-width',\n  lineDashOffset: 'stroke-dashoffset'\n};\nexports.ANIMATE_STYLE_MAP = ANIMATE_STYLE_MAP;\n\nfunction addAnimation(cssAnim, scope) {\n  var animationName = scope.zrId + '-ani-' + scope.cssAnimIdx++;\n  scope.cssAnims[animationName] = cssAnim;\n  return animationName;\n}\n\nfunction createCompoundPathCSSAnimation(el, attrs, scope) {\n  var paths = el.shape.paths;\n  var composedAnim = {};\n  var cssAnimationCfg;\n  var cssAnimationName;\n  (0, _util.each)(paths, function (path) {\n    var subScope = (0, _core.createBrushScope)(scope.zrId);\n    subScope.animation = true;\n    createCSSAnimation(path, {}, subScope, true);\n    var cssAnims = subScope.cssAnims;\n    var cssNodes = subScope.cssNodes;\n    var animNames = (0, _util.keys)(cssAnims);\n    var len = animNames.length;\n\n    if (!len) {\n      return;\n    }\n\n    cssAnimationName = animNames[len - 1];\n    var lastAnim = cssAnims[cssAnimationName];\n\n    for (var percent in lastAnim) {\n      var kf = lastAnim[percent];\n      composedAnim[percent] = composedAnim[percent] || {\n        d: ''\n      };\n      composedAnim[percent].d += kf.d || '';\n    }\n\n    for (var className in cssNodes) {\n      var val = cssNodes[className].animation;\n\n      if (val.indexOf(cssAnimationName) >= 0) {\n        cssAnimationCfg = val;\n      }\n    }\n  });\n\n  if (!cssAnimationCfg) {\n    return;\n  }\n\n  attrs.d = false;\n  var animationName = addAnimation(composedAnim, scope);\n  return cssAnimationCfg.replace(cssAnimationName, animationName);\n}\n\nfunction getEasingFunc(easing) {\n  return (0, _util.isString)(easing) ? EASING_MAP[easing] ? \"cubic-bezier(\" + EASING_MAP[easing] + \")\" : (0, _cubicEasing.createCubicEasingFunc)(easing) ? easing : '' : '';\n}\n\nfunction createCSSAnimation(el, attrs, scope, onlyShape) {\n  var animators = el.animators;\n  var len = animators.length;\n  var cssAnimations = [];\n\n  if (el instanceof _CompoundPath.default) {\n    var animationCfg = createCompoundPathCSSAnimation(el, attrs, scope);\n\n    if (animationCfg) {\n      cssAnimations.push(animationCfg);\n    } else if (!len) {\n      return;\n    }\n  } else if (!len) {\n    return;\n  }\n\n  var groupAnimators = {};\n\n  for (var i = 0; i < len; i++) {\n    var animator = animators[i];\n    var cfgArr = [animator.getMaxTime() / 1000 + 's'];\n    var easing = getEasingFunc(animator.getClip().easing);\n    var delay = animator.getDelay();\n\n    if (easing) {\n      cfgArr.push(easing);\n    } else {\n      cfgArr.push('linear');\n    }\n\n    if (delay) {\n      cfgArr.push(delay / 1000 + 's');\n    }\n\n    if (animator.getLoop()) {\n      cfgArr.push('infinite');\n    }\n\n    var cfg = cfgArr.join(' ');\n    groupAnimators[cfg] = groupAnimators[cfg] || [cfg, []];\n    groupAnimators[cfg][1].push(animator);\n  }\n\n  function createSingleCSSAnimation(groupAnimator) {\n    var animators = groupAnimator[1];\n    var len = animators.length;\n    var transformKfs = {};\n    var shapeKfs = {};\n    var finalKfs = {};\n    var animationTimingFunctionAttrName = 'animation-timing-function';\n\n    function saveAnimatorTrackToCssKfs(animator, cssKfs, toCssAttrName) {\n      var tracks = animator.getTracks();\n      var maxTime = animator.getMaxTime();\n\n      for (var k = 0; k < tracks.length; k++) {\n        var track = tracks[k];\n\n        if (track.needsAnimate()) {\n          var kfs = track.keyframes;\n          var attrName = track.propName;\n          toCssAttrName && (attrName = toCssAttrName(attrName));\n\n          if (attrName) {\n            for (var i = 0; i < kfs.length; i++) {\n              var kf = kfs[i];\n              var percent = Math.round(kf.time / maxTime * 100) + '%';\n              var kfEasing = getEasingFunc(kf.easing);\n              var rawValue = kf.rawValue;\n\n              if ((0, _util.isString)(rawValue) || (0, _util.isNumber)(rawValue)) {\n                cssKfs[percent] = cssKfs[percent] || {};\n                cssKfs[percent][attrName] = kf.rawValue;\n\n                if (kfEasing) {\n                  cssKfs[percent][animationTimingFunctionAttrName] = kfEasing;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    for (var i = 0; i < len; i++) {\n      var animator = animators[i];\n      var targetProp = animator.targetName;\n\n      if (!targetProp) {\n        !onlyShape && saveAnimatorTrackToCssKfs(animator, transformKfs);\n      } else if (targetProp === 'shape') {\n        saveAnimatorTrackToCssKfs(animator, shapeKfs);\n      }\n    }\n\n    for (var percent in transformKfs) {\n      var transform = {};\n      (0, _Transformable.copyTransform)(transform, el);\n      (0, _util.extend)(transform, transformKfs[percent]);\n      var str = (0, _helper.getSRTTransformString)(transform);\n      var timingFunction = transformKfs[percent][animationTimingFunctionAttrName];\n      finalKfs[percent] = str ? {\n        transform: str\n      } : {};\n      setTransformOrigin(finalKfs[percent], transform);\n\n      if (timingFunction) {\n        finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n      }\n    }\n\n    ;\n    var path;\n    var canAnimateShape = true;\n\n    for (var percent in shapeKfs) {\n      finalKfs[percent] = finalKfs[percent] || {};\n      var isFirst = !path;\n      var timingFunction = shapeKfs[percent][animationTimingFunctionAttrName];\n\n      if (isFirst) {\n        path = new _PathProxy.default();\n      }\n\n      var len_1 = path.len();\n      path.reset();\n      finalKfs[percent].d = buildPathString(el, shapeKfs[percent], path);\n      var newLen = path.len();\n\n      if (!isFirst && len_1 !== newLen) {\n        canAnimateShape = false;\n        break;\n      }\n\n      if (timingFunction) {\n        finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n      }\n    }\n\n    ;\n\n    if (!canAnimateShape) {\n      for (var percent in finalKfs) {\n        delete finalKfs[percent].d;\n      }\n    }\n\n    if (!onlyShape) {\n      for (var i = 0; i < len; i++) {\n        var animator = animators[i];\n        var targetProp = animator.targetName;\n\n        if (targetProp === 'style') {\n          saveAnimatorTrackToCssKfs(animator, finalKfs, function (propName) {\n            return ANIMATE_STYLE_MAP[propName];\n          });\n        }\n      }\n    }\n\n    var percents = (0, _util.keys)(finalKfs);\n    var allTransformOriginSame = true;\n    var transformOrigin;\n\n    for (var i = 1; i < percents.length; i++) {\n      var p0 = percents[i - 1];\n      var p1 = percents[i];\n\n      if (finalKfs[p0][transformOriginKey] !== finalKfs[p1][transformOriginKey]) {\n        allTransformOriginSame = false;\n        break;\n      }\n\n      transformOrigin = finalKfs[p0][transformOriginKey];\n    }\n\n    if (allTransformOriginSame && transformOrigin) {\n      for (var percent in finalKfs) {\n        if (finalKfs[percent][transformOriginKey]) {\n          delete finalKfs[percent][transformOriginKey];\n        }\n      }\n\n      attrs[transformOriginKey] = transformOrigin;\n    }\n\n    if ((0, _util.filter)(percents, function (percent) {\n      return (0, _util.keys)(finalKfs[percent]).length > 0;\n    }).length) {\n      var animationName = addAnimation(finalKfs, scope);\n      return animationName + \" \" + groupAnimator[0] + \" both\";\n    }\n  }\n\n  for (var key in groupAnimators) {\n    var animationCfg = createSingleCSSAnimation(groupAnimators[key]);\n\n    if (animationCfg) {\n      cssAnimations.push(animationCfg);\n    }\n  }\n\n  if (cssAnimations.length) {\n    var className = scope.zrId + '-cls-' + scope.cssClassIdx++;\n    scope.cssNodes['.' + className] = {\n      animation: cssAnimations.join(',')\n    };\n    attrs[\"class\"] = className;\n  }\n}","map":{"version":3,"names":["EASING_MAP","cubicIn","cubicOut","cubicInOut","quadraticIn","quadraticOut","quadraticInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","sinusoidalOut","sinusoidalInOut","exponentialIn","exponentialOut","exponentialInOut","circularIn","circularOut","circularInOut","transformOriginKey","buildPathString","el","kfShape","path","shape","extend","buildPath","svgPathBuilder","SVGPathRebuilder","reset","getPathPrecision","rebuildPath","generateStr","getStr","setTransformOrigin","target","transform","originX","originY","ANIMATE_STYLE_MAP","fill","opacity","lineWidth","lineDashOffset","addAnimation","cssAnim","scope","animationName","zrId","cssAnimIdx","cssAnims","createCompoundPathCSSAnimation","attrs","paths","composedAnim","cssAnimationCfg","cssAnimationName","each","subScope","createBrushScope","animation","createCSSAnimation","cssNodes","animNames","keys","len","length","lastAnim","percent","kf","d","className","val","indexOf","replace","getEasingFunc","easing","isString","createCubicEasingFunc","onlyShape","animators","cssAnimations","CompoundPath","animationCfg","push","groupAnimators","i","animator","cfgArr","getMaxTime","getClip","delay","getDelay","getLoop","cfg","join","createSingleCSSAnimation","groupAnimator","transformKfs","shapeKfs","finalKfs","animationTimingFunctionAttrName","saveAnimatorTrackToCssKfs","cssKfs","toCssAttrName","tracks","getTracks","maxTime","k","track","needsAnimate","kfs","keyframes","attrName","propName","Math","round","time","kfEasing","rawValue","isNumber","targetProp","targetName","copyTransform","str","getSRTTransformString","timingFunction","canAnimateShape","isFirst","PathProxy","len_1","newLen","percents","allTransformOriginSame","transformOrigin","p0","p1","filter","key","cssClassIdx"],"sources":["C:/Users/Z/Desktop/efficient/node_modules/zrender/lib/svg/cssAnimation.js"],"sourcesContent":["import { copyTransform } from '../core/Transformable.js';\nimport { createBrushScope } from './core.js';\nimport SVGPathRebuilder from './SVGPathRebuilder.js';\nimport PathProxy from '../core/PathProxy.js';\nimport { getPathPrecision, getSRTTransformString } from './helper.js';\nimport { each, extend, filter, isNumber, isString, keys } from '../core/util.js';\nimport CompoundPath from '../graphic/CompoundPath.js';\nimport { createCubicEasingFunc } from '../animation/cubicEasing.js';\nexport var EASING_MAP = {\n    cubicIn: '0.32,0,0.67,0',\n    cubicOut: '0.33,1,0.68,1',\n    cubicInOut: '0.65,0,0.35,1',\n    quadraticIn: '0.11,0,0.5,0',\n    quadraticOut: '0.5,1,0.89,1',\n    quadraticInOut: '0.45,0,0.55,1',\n    quarticIn: '0.5,0,0.75,0',\n    quarticOut: '0.25,1,0.5,1',\n    quarticInOut: '0.76,0,0.24,1',\n    quinticIn: '0.64,0,0.78,0',\n    quinticOut: '0.22,1,0.36,1',\n    quinticInOut: '0.83,0,0.17,1',\n    sinusoidalIn: '0.12,0,0.39,0',\n    sinusoidalOut: '0.61,1,0.88,1',\n    sinusoidalInOut: '0.37,0,0.63,1',\n    exponentialIn: '0.7,0,0.84,0',\n    exponentialOut: '0.16,1,0.3,1',\n    exponentialInOut: '0.87,0,0.13,1',\n    circularIn: '0.55,0,1,0.45',\n    circularOut: '0,0.55,0.45,1',\n    circularInOut: '0.85,0,0.15,1'\n};\nvar transformOriginKey = 'transform-origin';\nfunction buildPathString(el, kfShape, path) {\n    var shape = extend({}, el.shape);\n    extend(shape, kfShape);\n    el.buildPath(path, shape);\n    var svgPathBuilder = new SVGPathRebuilder();\n    svgPathBuilder.reset(getPathPrecision(el));\n    path.rebuildPath(svgPathBuilder, 1);\n    svgPathBuilder.generateStr();\n    return svgPathBuilder.getStr();\n}\nfunction setTransformOrigin(target, transform) {\n    var originX = transform.originX, originY = transform.originY;\n    if (originX || originY) {\n        target[transformOriginKey] = originX + \"px \" + originY + \"px\";\n    }\n}\nexport var ANIMATE_STYLE_MAP = {\n    fill: 'fill',\n    opacity: 'opacity',\n    lineWidth: 'stroke-width',\n    lineDashOffset: 'stroke-dashoffset'\n};\nfunction addAnimation(cssAnim, scope) {\n    var animationName = scope.zrId + '-ani-' + scope.cssAnimIdx++;\n    scope.cssAnims[animationName] = cssAnim;\n    return animationName;\n}\nfunction createCompoundPathCSSAnimation(el, attrs, scope) {\n    var paths = el.shape.paths;\n    var composedAnim = {};\n    var cssAnimationCfg;\n    var cssAnimationName;\n    each(paths, function (path) {\n        var subScope = createBrushScope(scope.zrId);\n        subScope.animation = true;\n        createCSSAnimation(path, {}, subScope, true);\n        var cssAnims = subScope.cssAnims;\n        var cssNodes = subScope.cssNodes;\n        var animNames = keys(cssAnims);\n        var len = animNames.length;\n        if (!len) {\n            return;\n        }\n        cssAnimationName = animNames[len - 1];\n        var lastAnim = cssAnims[cssAnimationName];\n        for (var percent in lastAnim) {\n            var kf = lastAnim[percent];\n            composedAnim[percent] = composedAnim[percent] || { d: '' };\n            composedAnim[percent].d += kf.d || '';\n        }\n        for (var className in cssNodes) {\n            var val = cssNodes[className].animation;\n            if (val.indexOf(cssAnimationName) >= 0) {\n                cssAnimationCfg = val;\n            }\n        }\n    });\n    if (!cssAnimationCfg) {\n        return;\n    }\n    attrs.d = false;\n    var animationName = addAnimation(composedAnim, scope);\n    return cssAnimationCfg.replace(cssAnimationName, animationName);\n}\nfunction getEasingFunc(easing) {\n    return isString(easing)\n        ? EASING_MAP[easing]\n            ? \"cubic-bezier(\" + EASING_MAP[easing] + \")\"\n            : createCubicEasingFunc(easing) ? easing : ''\n        : '';\n}\nexport function createCSSAnimation(el, attrs, scope, onlyShape) {\n    var animators = el.animators;\n    var len = animators.length;\n    var cssAnimations = [];\n    if (el instanceof CompoundPath) {\n        var animationCfg = createCompoundPathCSSAnimation(el, attrs, scope);\n        if (animationCfg) {\n            cssAnimations.push(animationCfg);\n        }\n        else if (!len) {\n            return;\n        }\n    }\n    else if (!len) {\n        return;\n    }\n    var groupAnimators = {};\n    for (var i = 0; i < len; i++) {\n        var animator = animators[i];\n        var cfgArr = [animator.getMaxTime() / 1000 + 's'];\n        var easing = getEasingFunc(animator.getClip().easing);\n        var delay = animator.getDelay();\n        if (easing) {\n            cfgArr.push(easing);\n        }\n        else {\n            cfgArr.push('linear');\n        }\n        if (delay) {\n            cfgArr.push(delay / 1000 + 's');\n        }\n        if (animator.getLoop()) {\n            cfgArr.push('infinite');\n        }\n        var cfg = cfgArr.join(' ');\n        groupAnimators[cfg] = groupAnimators[cfg] || [cfg, []];\n        groupAnimators[cfg][1].push(animator);\n    }\n    function createSingleCSSAnimation(groupAnimator) {\n        var animators = groupAnimator[1];\n        var len = animators.length;\n        var transformKfs = {};\n        var shapeKfs = {};\n        var finalKfs = {};\n        var animationTimingFunctionAttrName = 'animation-timing-function';\n        function saveAnimatorTrackToCssKfs(animator, cssKfs, toCssAttrName) {\n            var tracks = animator.getTracks();\n            var maxTime = animator.getMaxTime();\n            for (var k = 0; k < tracks.length; k++) {\n                var track = tracks[k];\n                if (track.needsAnimate()) {\n                    var kfs = track.keyframes;\n                    var attrName = track.propName;\n                    toCssAttrName && (attrName = toCssAttrName(attrName));\n                    if (attrName) {\n                        for (var i = 0; i < kfs.length; i++) {\n                            var kf = kfs[i];\n                            var percent = Math.round(kf.time / maxTime * 100) + '%';\n                            var kfEasing = getEasingFunc(kf.easing);\n                            var rawValue = kf.rawValue;\n                            if (isString(rawValue) || isNumber(rawValue)) {\n                                cssKfs[percent] = cssKfs[percent] || {};\n                                cssKfs[percent][attrName] = kf.rawValue;\n                                if (kfEasing) {\n                                    cssKfs[percent][animationTimingFunctionAttrName] = kfEasing;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        for (var i = 0; i < len; i++) {\n            var animator = animators[i];\n            var targetProp = animator.targetName;\n            if (!targetProp) {\n                !onlyShape && saveAnimatorTrackToCssKfs(animator, transformKfs);\n            }\n            else if (targetProp === 'shape') {\n                saveAnimatorTrackToCssKfs(animator, shapeKfs);\n            }\n        }\n        for (var percent in transformKfs) {\n            var transform = {};\n            copyTransform(transform, el);\n            extend(transform, transformKfs[percent]);\n            var str = getSRTTransformString(transform);\n            var timingFunction = transformKfs[percent][animationTimingFunctionAttrName];\n            finalKfs[percent] = str ? {\n                transform: str\n            } : {};\n            setTransformOrigin(finalKfs[percent], transform);\n            if (timingFunction) {\n                finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n            }\n        }\n        ;\n        var path;\n        var canAnimateShape = true;\n        for (var percent in shapeKfs) {\n            finalKfs[percent] = finalKfs[percent] || {};\n            var isFirst = !path;\n            var timingFunction = shapeKfs[percent][animationTimingFunctionAttrName];\n            if (isFirst) {\n                path = new PathProxy();\n            }\n            var len_1 = path.len();\n            path.reset();\n            finalKfs[percent].d = buildPathString(el, shapeKfs[percent], path);\n            var newLen = path.len();\n            if (!isFirst && len_1 !== newLen) {\n                canAnimateShape = false;\n                break;\n            }\n            if (timingFunction) {\n                finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n            }\n        }\n        ;\n        if (!canAnimateShape) {\n            for (var percent in finalKfs) {\n                delete finalKfs[percent].d;\n            }\n        }\n        if (!onlyShape) {\n            for (var i = 0; i < len; i++) {\n                var animator = animators[i];\n                var targetProp = animator.targetName;\n                if (targetProp === 'style') {\n                    saveAnimatorTrackToCssKfs(animator, finalKfs, function (propName) { return ANIMATE_STYLE_MAP[propName]; });\n                }\n            }\n        }\n        var percents = keys(finalKfs);\n        var allTransformOriginSame = true;\n        var transformOrigin;\n        for (var i = 1; i < percents.length; i++) {\n            var p0 = percents[i - 1];\n            var p1 = percents[i];\n            if (finalKfs[p0][transformOriginKey] !== finalKfs[p1][transformOriginKey]) {\n                allTransformOriginSame = false;\n                break;\n            }\n            transformOrigin = finalKfs[p0][transformOriginKey];\n        }\n        if (allTransformOriginSame && transformOrigin) {\n            for (var percent in finalKfs) {\n                if (finalKfs[percent][transformOriginKey]) {\n                    delete finalKfs[percent][transformOriginKey];\n                }\n            }\n            attrs[transformOriginKey] = transformOrigin;\n        }\n        if (filter(percents, function (percent) { return keys(finalKfs[percent]).length > 0; }).length) {\n            var animationName = addAnimation(finalKfs, scope);\n            return animationName + \" \" + groupAnimator[0] + \" both\";\n        }\n    }\n    for (var key in groupAnimators) {\n        var animationCfg = createSingleCSSAnimation(groupAnimators[key]);\n        if (animationCfg) {\n            cssAnimations.push(animationCfg);\n        }\n    }\n    if (cssAnimations.length) {\n        var className = scope.zrId + '-cls-' + scope.cssClassIdx++;\n        scope.cssNodes['.' + className] = {\n            animation: cssAnimations.join(',')\n        };\n        attrs[\"class\"] = className;\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}