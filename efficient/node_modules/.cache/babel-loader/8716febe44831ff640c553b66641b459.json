{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = smoothBezier;\n\nvar _vector = require(\"../../core/vector.js\");\n\nfunction smoothBezier(points, smooth, isLoop, constraint) {\n  var cps = [];\n  var v = [];\n  var v1 = [];\n  var v2 = [];\n  var prevPoint;\n  var nextPoint;\n  var min;\n  var max;\n\n  if (constraint) {\n    min = [Infinity, Infinity];\n    max = [-Infinity, -Infinity];\n\n    for (var i = 0, len = points.length; i < len; i++) {\n      (0, _vector.min)(min, min, points[i]);\n      (0, _vector.max)(max, max, points[i]);\n    }\n\n    (0, _vector.min)(min, min, constraint[0]);\n    (0, _vector.max)(max, max, constraint[1]);\n  }\n\n  for (var i = 0, len = points.length; i < len; i++) {\n    var point = points[i];\n\n    if (isLoop) {\n      prevPoint = points[i ? i - 1 : len - 1];\n      nextPoint = points[(i + 1) % len];\n    } else {\n      if (i === 0 || i === len - 1) {\n        cps.push((0, _vector.clone)(points[i]));\n        continue;\n      } else {\n        prevPoint = points[i - 1];\n        nextPoint = points[i + 1];\n      }\n    }\n\n    (0, _vector.sub)(v, nextPoint, prevPoint);\n    (0, _vector.scale)(v, v, smooth);\n    var d0 = (0, _vector.distance)(point, prevPoint);\n    var d1 = (0, _vector.distance)(point, nextPoint);\n    var sum = d0 + d1;\n\n    if (sum !== 0) {\n      d0 /= sum;\n      d1 /= sum;\n    }\n\n    (0, _vector.scale)(v1, v, -d0);\n    (0, _vector.scale)(v2, v, d1);\n    var cp0 = (0, _vector.add)([], point, v1);\n    var cp1 = (0, _vector.add)([], point, v2);\n\n    if (constraint) {\n      (0, _vector.max)(cp0, cp0, min);\n      (0, _vector.min)(cp0, cp0, max);\n      (0, _vector.max)(cp1, cp1, min);\n      (0, _vector.min)(cp1, cp1, max);\n    }\n\n    cps.push(cp0);\n    cps.push(cp1);\n  }\n\n  if (isLoop) {\n    cps.push(cps.shift());\n  }\n\n  return cps;\n}","map":{"version":3,"names":["smoothBezier","points","smooth","isLoop","constraint","cps","v","v1","v2","prevPoint","nextPoint","min","max","Infinity","i","len","length","v2Min","v2Max","point","push","v2Clone","v2Sub","v2Scale","d0","v2Distance","d1","sum","cp0","v2Add","cp1","shift"],"sources":["C:/Users/Z/Desktop/efficient/node_modules/zrender/lib/graphic/helper/smoothBezier.js"],"sourcesContent":["import { min as v2Min, max as v2Max, scale as v2Scale, distance as v2Distance, add as v2Add, clone as v2Clone, sub as v2Sub } from '../../core/vector.js';\nexport default function smoothBezier(points, smooth, isLoop, constraint) {\n    var cps = [];\n    var v = [];\n    var v1 = [];\n    var v2 = [];\n    var prevPoint;\n    var nextPoint;\n    var min;\n    var max;\n    if (constraint) {\n        min = [Infinity, Infinity];\n        max = [-Infinity, -Infinity];\n        for (var i = 0, len = points.length; i < len; i++) {\n            v2Min(min, min, points[i]);\n            v2Max(max, max, points[i]);\n        }\n        v2Min(min, min, constraint[0]);\n        v2Max(max, max, constraint[1]);\n    }\n    for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n        if (isLoop) {\n            prevPoint = points[i ? i - 1 : len - 1];\n            nextPoint = points[(i + 1) % len];\n        }\n        else {\n            if (i === 0 || i === len - 1) {\n                cps.push(v2Clone(points[i]));\n                continue;\n            }\n            else {\n                prevPoint = points[i - 1];\n                nextPoint = points[i + 1];\n            }\n        }\n        v2Sub(v, nextPoint, prevPoint);\n        v2Scale(v, v, smooth);\n        var d0 = v2Distance(point, prevPoint);\n        var d1 = v2Distance(point, nextPoint);\n        var sum = d0 + d1;\n        if (sum !== 0) {\n            d0 /= sum;\n            d1 /= sum;\n        }\n        v2Scale(v1, v, -d0);\n        v2Scale(v2, v, d1);\n        var cp0 = v2Add([], point, v1);\n        var cp1 = v2Add([], point, v2);\n        if (constraint) {\n            v2Max(cp0, cp0, min);\n            v2Min(cp0, cp0, max);\n            v2Max(cp1, cp1, min);\n            v2Min(cp1, cp1, max);\n        }\n        cps.push(cp0);\n        cps.push(cp1);\n    }\n    if (isLoop) {\n        cps.push(cps.shift());\n    }\n    return cps;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}