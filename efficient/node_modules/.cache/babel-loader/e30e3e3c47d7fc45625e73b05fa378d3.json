{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\n\nvar _interopRequireWildcard = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireWildcard.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.inner = exports.GraphicComponentView = void 0;\n\nvar _tslib = require(\"tslib\");\n\nvar zrUtil = _interopRequireWildcard(require(\"zrender/lib/core/util.js\"));\n\nvar _Displayable = _interopRequireDefault(require(\"zrender/lib/graphic/Displayable.js\"));\n\nvar modelUtil = _interopRequireWildcard(require(\"../../util/model.js\"));\n\nvar graphicUtil = _interopRequireWildcard(require(\"../../util/graphic.js\"));\n\nvar layoutUtil = _interopRequireWildcard(require(\"../../util/layout.js\"));\n\nvar _number = require(\"../../util/number.js\");\n\nvar _Component = _interopRequireDefault(require(\"../../view/Component.js\"));\n\nvar _innerStore = require(\"../../util/innerStore.js\");\n\nvar _styleCompat = require(\"../../util/styleCompat.js\");\n\nvar _customGraphicTransition = require(\"../../animation/customGraphicTransition.js\");\n\nvar _basicTrasition = require(\"../../animation/basicTrasition.js\");\n\nvar _customGraphicKeyframeAnimation = require(\"../../animation/customGraphicKeyframeAnimation.js\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar nonShapeGraphicElements = {\n  // Reserved but not supported in graphic component.\n  path: null,\n  compoundPath: null,\n  // Supported in graphic component.\n  group: graphicUtil.Group,\n  image: graphicUtil.Image,\n  text: graphicUtil.Text\n};\nvar inner = modelUtil.makeInner(); // ------------------------\n// View\n// ------------------------\n\nexports.inner = inner;\n\nvar GraphicComponentView =\n/** @class */\nfunction (_super) {\n  (0, _tslib.__extends)(GraphicComponentView, _super);\n\n  function GraphicComponentView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphicComponentView.type;\n    return _this;\n  }\n\n  GraphicComponentView.prototype.init = function () {\n    this._elMap = zrUtil.createHashMap();\n  };\n\n  GraphicComponentView.prototype.render = function (graphicModel, ecModel, api) {\n    // Having leveraged between use cases and algorithm complexity, a very\n    // simple layout mechanism is used:\n    // The size(width/height) can be determined by itself or its parent (not\n    // implemented yet), but can not by its children. (Top-down travel)\n    // The location(x/y) can be determined by the bounding rect of itself\n    // (can including its descendants or not) and the size of its parent.\n    // (Bottom-up travel)\n    // When `chart.clear()` or `chart.setOption({...}, true)` with the same id,\n    // view will be reused.\n    if (graphicModel !== this._lastGraphicModel) {\n      this._clear();\n    }\n\n    this._lastGraphicModel = graphicModel;\n\n    this._updateElements(graphicModel);\n\n    this._relocate(graphicModel, api);\n  };\n  /**\n   * Update graphic elements.\n   */\n\n\n  GraphicComponentView.prototype._updateElements = function (graphicModel) {\n    var elOptionsToUpdate = graphicModel.useElOptionsToUpdate();\n\n    if (!elOptionsToUpdate) {\n      return;\n    }\n\n    var elMap = this._elMap;\n    var rootGroup = this.group;\n    var globalZ = graphicModel.get('z');\n    var globalZLevel = graphicModel.get('zlevel'); // Top-down tranverse to assign graphic settings to each elements.\n\n    zrUtil.each(elOptionsToUpdate, function (elOption) {\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var elExisting = id != null ? elMap.get(id) : null;\n      var parentId = modelUtil.convertOptionIdName(elOption.parentId, null);\n      var targetElParent = parentId != null ? elMap.get(parentId) : rootGroup;\n      var elType = elOption.type;\n      var elOptionStyle = elOption.style;\n\n      if (elType === 'text' && elOptionStyle) {\n        // In top/bottom mode, textVerticalAlign should not be used, which cause\n        // inaccurately locating.\n        if (elOption.hv && elOption.hv[1]) {\n          elOptionStyle.textVerticalAlign = elOptionStyle.textBaseline = elOptionStyle.verticalAlign = elOptionStyle.align = null;\n        }\n      }\n\n      var textContentOption = elOption.textContent;\n      var textConfig = elOption.textConfig;\n\n      if (elOptionStyle && (0, _styleCompat.isEC4CompatibleStyle)(elOptionStyle, elType, !!textConfig, !!textContentOption)) {\n        var convertResult = (0, _styleCompat.convertFromEC4CompatibleStyle)(elOptionStyle, elType, true);\n\n        if (!textConfig && convertResult.textConfig) {\n          textConfig = elOption.textConfig = convertResult.textConfig;\n        }\n\n        if (!textContentOption && convertResult.textContent) {\n          textContentOption = convertResult.textContent;\n        }\n      } // Remove unnecessary props to avoid potential problems.\n\n\n      var elOptionCleaned = getCleanedElOption(elOption); // For simple, do not support parent change, otherwise reorder is needed.\n\n      if (process.env.NODE_ENV !== 'production') {\n        elExisting && zrUtil.assert(targetElParent === elExisting.parent, 'Changing parent is not supported.');\n      }\n\n      var $action = elOption.$action || 'merge';\n      var isMerge = $action === 'merge';\n      var isReplace = $action === 'replace';\n\n      if (isMerge) {\n        var isInit = !elExisting;\n        var el_1 = elExisting;\n\n        if (isInit) {\n          el_1 = createEl(id, targetElParent, elOption.type, elMap);\n        } else {\n          el_1 && (inner(el_1).isNew = false); // Stop and restore before update any other attributes.\n\n          (0, _customGraphicKeyframeAnimation.stopPreviousKeyframeAnimationAndRestore)(el_1);\n        }\n\n        if (el_1) {\n          (0, _customGraphicTransition.applyUpdateTransition)(el_1, elOptionCleaned, graphicModel, {\n            isInit: isInit\n          });\n          updateCommonAttrs(el_1, elOption, globalZ, globalZLevel);\n        }\n      } else if (isReplace) {\n        removeEl(elExisting, elOption, elMap, graphicModel);\n        var el_2 = createEl(id, targetElParent, elOption.type, elMap);\n\n        if (el_2) {\n          (0, _customGraphicTransition.applyUpdateTransition)(el_2, elOptionCleaned, graphicModel, {\n            isInit: true\n          });\n          updateCommonAttrs(el_2, elOption, globalZ, globalZLevel);\n        }\n      } else if ($action === 'remove') {\n        (0, _customGraphicTransition.updateLeaveTo)(elExisting, elOption);\n        removeEl(elExisting, elOption, elMap, graphicModel);\n      }\n\n      var el = elMap.get(id);\n\n      if (el && textContentOption) {\n        if (isMerge) {\n          var textContentExisting = el.getTextContent();\n          textContentExisting ? textContentExisting.attr(textContentOption) : el.setTextContent(new graphicUtil.Text(textContentOption));\n        } else if (isReplace) {\n          el.setTextContent(new graphicUtil.Text(textContentOption));\n        }\n      }\n\n      if (el) {\n        var clipPathOption = elOption.clipPath;\n\n        if (clipPathOption) {\n          var clipPathType = clipPathOption.type;\n          var clipPath = void 0;\n          var isInit = false;\n\n          if (isMerge) {\n            var oldClipPath = el.getClipPath();\n            isInit = !oldClipPath || inner(oldClipPath).type !== clipPathType;\n            clipPath = isInit ? newEl(clipPathType) : oldClipPath;\n          } else if (isReplace) {\n            isInit = true;\n            clipPath = newEl(clipPathType);\n          }\n\n          el.setClipPath(clipPath);\n          (0, _customGraphicTransition.applyUpdateTransition)(clipPath, clipPathOption, graphicModel, {\n            isInit: isInit\n          });\n          (0, _customGraphicKeyframeAnimation.applyKeyframeAnimation)(clipPath, clipPathOption.keyframeAnimation, graphicModel);\n        }\n\n        var elInner = inner(el);\n        el.setTextConfig(textConfig);\n        elInner.option = elOption;\n        setEventData(el, graphicModel, elOption);\n        graphicUtil.setTooltipConfig({\n          el: el,\n          componentModel: graphicModel,\n          itemName: el.name,\n          itemTooltipOption: elOption.tooltip\n        });\n        (0, _customGraphicKeyframeAnimation.applyKeyframeAnimation)(el, elOption.keyframeAnimation, graphicModel);\n      }\n    });\n  };\n  /**\n   * Locate graphic elements.\n   */\n\n\n  GraphicComponentView.prototype._relocate = function (graphicModel, api) {\n    var elOptions = graphicModel.option.elements;\n    var rootGroup = this.group;\n    var elMap = this._elMap;\n    var apiWidth = api.getWidth();\n    var apiHeight = api.getHeight();\n    var xy = ['x', 'y']; // Top-down to calculate percentage width/height of group\n\n    for (var i = 0; i < elOptions.length; i++) {\n      var elOption = elOptions[i];\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var el = id != null ? elMap.get(id) : null;\n\n      if (!el || !el.isGroup) {\n        continue;\n      }\n\n      var parentEl = el.parent;\n      var isParentRoot = parentEl === rootGroup; // Like 'position:absolut' in css, default 0.\n\n      var elInner = inner(el);\n      var parentElInner = inner(parentEl);\n      elInner.width = (0, _number.parsePercent)(elInner.option.width, isParentRoot ? apiWidth : parentElInner.width) || 0;\n      elInner.height = (0, _number.parsePercent)(elInner.option.height, isParentRoot ? apiHeight : parentElInner.height) || 0;\n    } // Bottom-up tranvese all elements (consider ec resize) to locate elements.\n\n\n    for (var i = elOptions.length - 1; i >= 0; i--) {\n      var elOption = elOptions[i];\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var el = id != null ? elMap.get(id) : null;\n\n      if (!el) {\n        continue;\n      }\n\n      var parentEl = el.parent;\n      var parentElInner = inner(parentEl);\n      var containerInfo = parentEl === rootGroup ? {\n        width: apiWidth,\n        height: apiHeight\n      } : {\n        width: parentElInner.width,\n        height: parentElInner.height\n      }; // PENDING\n      // Currently, when `bounding: 'all'`, the union bounding rect of the group\n      // does not include the rect of [0, 0, group.width, group.height], which\n      // is probably weird for users. Should we make a break change for it?\n\n      var layoutPos = {};\n      var layouted = layoutUtil.positionElement(el, elOption, containerInfo, null, {\n        hv: elOption.hv,\n        boundingMode: elOption.bounding\n      }, layoutPos);\n\n      if (!inner(el).isNew && layouted) {\n        var transition = elOption.transition;\n        var animatePos = {};\n\n        for (var k = 0; k < xy.length; k++) {\n          var key = xy[k];\n          var val = layoutPos[key];\n\n          if (transition && ((0, _customGraphicTransition.isTransitionAll)(transition) || zrUtil.indexOf(transition, key) >= 0)) {\n            animatePos[key] = val;\n          } else {\n            el[key] = val;\n          }\n        }\n\n        (0, _basicTrasition.updateProps)(el, animatePos, graphicModel, 0);\n      } else {\n        el.attr(layoutPos);\n      }\n    }\n  };\n  /**\n   * Clear all elements.\n   */\n\n\n  GraphicComponentView.prototype._clear = function () {\n    var _this = this;\n\n    var elMap = this._elMap;\n    elMap.each(function (el) {\n      removeEl(el, inner(el).option, elMap, _this._lastGraphicModel);\n    });\n    this._elMap = zrUtil.createHashMap();\n  };\n\n  GraphicComponentView.prototype.dispose = function () {\n    this._clear();\n  };\n\n  GraphicComponentView.type = 'graphic';\n  return GraphicComponentView;\n}(_Component.default);\n\nexports.GraphicComponentView = GraphicComponentView;\n\nfunction newEl(graphicType) {\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(graphicType, 'graphic type MUST be set');\n  }\n\n  var Clz = zrUtil.hasOwn(nonShapeGraphicElements, graphicType) // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n  ? nonShapeGraphicElements[graphicType] : graphicUtil.getShapeClass(graphicType);\n\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(Clz, \"graphic type \" + graphicType + \" can not be found\");\n  }\n\n  var el = new Clz({});\n  inner(el).type = graphicType;\n  return el;\n}\n\nfunction createEl(id, targetElParent, graphicType, elMap) {\n  var el = newEl(graphicType);\n  targetElParent.add(el);\n  elMap.set(id, el);\n  inner(el).id = id;\n  inner(el).isNew = true;\n  return el;\n}\n\nfunction removeEl(elExisting, elOption, elMap, graphicModel) {\n  var existElParent = elExisting && elExisting.parent;\n\n  if (existElParent) {\n    elExisting.type === 'group' && elExisting.traverse(function (el) {\n      removeEl(el, elOption, elMap, graphicModel);\n    });\n    (0, _customGraphicTransition.applyLeaveTransition)(elExisting, elOption, graphicModel);\n    elMap.removeKey(inner(elExisting).id);\n  }\n}\n\nfunction updateCommonAttrs(el, elOption, defaultZ, defaultZlevel) {\n  if (!el.isGroup) {\n    zrUtil.each([['cursor', _Displayable.default.prototype.cursor], // We should not support configure z and zlevel in the element level.\n    // But seems we didn't limit it previously. So here still use it to avoid breaking.\n    ['zlevel', defaultZlevel || 0], ['z', defaultZ || 0], // z2 must not be null/undefined, otherwise sort error may occur.\n    ['z2', 0]], function (item) {\n      var prop = item[0];\n\n      if (zrUtil.hasOwn(elOption, prop)) {\n        el[prop] = zrUtil.retrieve2(elOption[prop], item[1]);\n      } else if (el[prop] == null) {\n        el[prop] = item[1];\n      }\n    });\n  }\n\n  zrUtil.each(zrUtil.keys(elOption), function (key) {\n    // Assign event handlers.\n    // PENDING: should enumerate all event names or use pattern matching?\n    if (key.indexOf('on') === 0) {\n      var val = elOption[key];\n      el[key] = zrUtil.isFunction(val) ? val : null;\n    }\n  });\n\n  if (zrUtil.hasOwn(elOption, 'draggable')) {\n    el.draggable = elOption.draggable;\n  } // Other attributes\n\n\n  elOption.name != null && (el.name = elOption.name);\n  elOption.id != null && (el.id = elOption.id);\n} // Remove unnecessary props to avoid potential problems.\n\n\nfunction getCleanedElOption(elOption) {\n  elOption = zrUtil.extend({}, elOption);\n  zrUtil.each(['id', 'parentId', '$action', 'hv', 'bounding', 'textContent', 'clipPath'].concat(layoutUtil.LOCATION_PARAMS), function (name) {\n    delete elOption[name];\n  });\n  return elOption;\n}\n\nfunction setEventData(el, graphicModel, elOption) {\n  var eventData = (0, _innerStore.getECData)(el).eventData; // Simple optimize for large amount of elements that no need event.\n\n  if (!el.silent && !el.ignore && !eventData) {\n    eventData = (0, _innerStore.getECData)(el).eventData = {\n      componentType: 'graphic',\n      componentIndex: graphicModel.componentIndex,\n      name: el.name\n    };\n  } // `elOption.info` enables user to mount some info on\n  // elements and use them in event handlers.\n\n\n  if (eventData) {\n    eventData.info = elOption.info;\n  }\n}","map":{"version":3,"names":["nonShapeGraphicElements","path","compoundPath","group","graphicUtil","Group","image","Image","text","Text","inner","modelUtil","makeInner","GraphicComponentView","_super","__extends","_this","apply","arguments","type","prototype","init","_elMap","zrUtil","createHashMap","render","graphicModel","ecModel","api","_lastGraphicModel","_clear","_updateElements","_relocate","elOptionsToUpdate","useElOptionsToUpdate","elMap","rootGroup","globalZ","get","globalZLevel","each","elOption","id","convertOptionIdName","elExisting","parentId","targetElParent","elType","elOptionStyle","style","hv","textVerticalAlign","textBaseline","verticalAlign","align","textContentOption","textContent","textConfig","isEC4CompatibleStyle","convertResult","convertFromEC4CompatibleStyle","elOptionCleaned","getCleanedElOption","process","env","NODE_ENV","assert","parent","$action","isMerge","isReplace","isInit","el_1","createEl","isNew","stopPreviousKeyframeAnimationAndRestore","applyUpdateTransition","updateCommonAttrs","removeEl","el_2","updateLeaveTo","el","textContentExisting","getTextContent","attr","setTextContent","clipPathOption","clipPath","clipPathType","oldClipPath","getClipPath","newEl","setClipPath","applyKeyframeAnimation","keyframeAnimation","elInner","setTextConfig","option","setEventData","setTooltipConfig","componentModel","itemName","name","itemTooltipOption","tooltip","elOptions","elements","apiWidth","getWidth","apiHeight","getHeight","xy","i","length","isGroup","parentEl","isParentRoot","parentElInner","width","parsePercent","height","containerInfo","layoutPos","layouted","layoutUtil","positionElement","boundingMode","bounding","transition","animatePos","k","key","val","isTransitionAll","indexOf","updateProps","dispose","ComponentView","graphicType","Clz","hasOwn","getShapeClass","add","set","existElParent","traverse","applyLeaveTransition","removeKey","defaultZ","defaultZlevel","Displayable","cursor","item","prop","retrieve2","keys","isFunction","draggable","extend","concat","LOCATION_PARAMS","eventData","getECData","silent","ignore","componentType","componentIndex","info"],"sources":["C:/Users/Z/Desktop/efficient/node_modules/echarts/lib/component/graphic/GraphicView.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport * as modelUtil from '../../util/model.js';\nimport * as graphicUtil from '../../util/graphic.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport { parsePercent } from '../../util/number.js';\nimport ComponentView from '../../view/Component.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isEC4CompatibleStyle, convertFromEC4CompatibleStyle } from '../../util/styleCompat.js';\nimport { applyLeaveTransition, applyUpdateTransition, isTransitionAll, updateLeaveTo } from '../../animation/customGraphicTransition.js';\nimport { updateProps } from '../../animation/basicTrasition.js';\nimport { applyKeyframeAnimation, stopPreviousKeyframeAnimationAndRestore } from '../../animation/customGraphicKeyframeAnimation.js';\nvar nonShapeGraphicElements = {\n  // Reserved but not supported in graphic component.\n  path: null,\n  compoundPath: null,\n  // Supported in graphic component.\n  group: graphicUtil.Group,\n  image: graphicUtil.Image,\n  text: graphicUtil.Text\n};\nexport var inner = modelUtil.makeInner(); // ------------------------\n// View\n// ------------------------\n\nvar GraphicComponentView =\n/** @class */\nfunction (_super) {\n  __extends(GraphicComponentView, _super);\n\n  function GraphicComponentView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphicComponentView.type;\n    return _this;\n  }\n\n  GraphicComponentView.prototype.init = function () {\n    this._elMap = zrUtil.createHashMap();\n  };\n\n  GraphicComponentView.prototype.render = function (graphicModel, ecModel, api) {\n    // Having leveraged between use cases and algorithm complexity, a very\n    // simple layout mechanism is used:\n    // The size(width/height) can be determined by itself or its parent (not\n    // implemented yet), but can not by its children. (Top-down travel)\n    // The location(x/y) can be determined by the bounding rect of itself\n    // (can including its descendants or not) and the size of its parent.\n    // (Bottom-up travel)\n    // When `chart.clear()` or `chart.setOption({...}, true)` with the same id,\n    // view will be reused.\n    if (graphicModel !== this._lastGraphicModel) {\n      this._clear();\n    }\n\n    this._lastGraphicModel = graphicModel;\n\n    this._updateElements(graphicModel);\n\n    this._relocate(graphicModel, api);\n  };\n  /**\n   * Update graphic elements.\n   */\n\n\n  GraphicComponentView.prototype._updateElements = function (graphicModel) {\n    var elOptionsToUpdate = graphicModel.useElOptionsToUpdate();\n\n    if (!elOptionsToUpdate) {\n      return;\n    }\n\n    var elMap = this._elMap;\n    var rootGroup = this.group;\n    var globalZ = graphicModel.get('z');\n    var globalZLevel = graphicModel.get('zlevel'); // Top-down tranverse to assign graphic settings to each elements.\n\n    zrUtil.each(elOptionsToUpdate, function (elOption) {\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var elExisting = id != null ? elMap.get(id) : null;\n      var parentId = modelUtil.convertOptionIdName(elOption.parentId, null);\n      var targetElParent = parentId != null ? elMap.get(parentId) : rootGroup;\n      var elType = elOption.type;\n      var elOptionStyle = elOption.style;\n\n      if (elType === 'text' && elOptionStyle) {\n        // In top/bottom mode, textVerticalAlign should not be used, which cause\n        // inaccurately locating.\n        if (elOption.hv && elOption.hv[1]) {\n          elOptionStyle.textVerticalAlign = elOptionStyle.textBaseline = elOptionStyle.verticalAlign = elOptionStyle.align = null;\n        }\n      }\n\n      var textContentOption = elOption.textContent;\n      var textConfig = elOption.textConfig;\n\n      if (elOptionStyle && isEC4CompatibleStyle(elOptionStyle, elType, !!textConfig, !!textContentOption)) {\n        var convertResult = convertFromEC4CompatibleStyle(elOptionStyle, elType, true);\n\n        if (!textConfig && convertResult.textConfig) {\n          textConfig = elOption.textConfig = convertResult.textConfig;\n        }\n\n        if (!textContentOption && convertResult.textContent) {\n          textContentOption = convertResult.textContent;\n        }\n      } // Remove unnecessary props to avoid potential problems.\n\n\n      var elOptionCleaned = getCleanedElOption(elOption); // For simple, do not support parent change, otherwise reorder is needed.\n\n      if (process.env.NODE_ENV !== 'production') {\n        elExisting && zrUtil.assert(targetElParent === elExisting.parent, 'Changing parent is not supported.');\n      }\n\n      var $action = elOption.$action || 'merge';\n      var isMerge = $action === 'merge';\n      var isReplace = $action === 'replace';\n\n      if (isMerge) {\n        var isInit = !elExisting;\n        var el_1 = elExisting;\n\n        if (isInit) {\n          el_1 = createEl(id, targetElParent, elOption.type, elMap);\n        } else {\n          el_1 && (inner(el_1).isNew = false); // Stop and restore before update any other attributes.\n\n          stopPreviousKeyframeAnimationAndRestore(el_1);\n        }\n\n        if (el_1) {\n          applyUpdateTransition(el_1, elOptionCleaned, graphicModel, {\n            isInit: isInit\n          });\n          updateCommonAttrs(el_1, elOption, globalZ, globalZLevel);\n        }\n      } else if (isReplace) {\n        removeEl(elExisting, elOption, elMap, graphicModel);\n        var el_2 = createEl(id, targetElParent, elOption.type, elMap);\n\n        if (el_2) {\n          applyUpdateTransition(el_2, elOptionCleaned, graphicModel, {\n            isInit: true\n          });\n          updateCommonAttrs(el_2, elOption, globalZ, globalZLevel);\n        }\n      } else if ($action === 'remove') {\n        updateLeaveTo(elExisting, elOption);\n        removeEl(elExisting, elOption, elMap, graphicModel);\n      }\n\n      var el = elMap.get(id);\n\n      if (el && textContentOption) {\n        if (isMerge) {\n          var textContentExisting = el.getTextContent();\n          textContentExisting ? textContentExisting.attr(textContentOption) : el.setTextContent(new graphicUtil.Text(textContentOption));\n        } else if (isReplace) {\n          el.setTextContent(new graphicUtil.Text(textContentOption));\n        }\n      }\n\n      if (el) {\n        var clipPathOption = elOption.clipPath;\n\n        if (clipPathOption) {\n          var clipPathType = clipPathOption.type;\n          var clipPath = void 0;\n          var isInit = false;\n\n          if (isMerge) {\n            var oldClipPath = el.getClipPath();\n            isInit = !oldClipPath || inner(oldClipPath).type !== clipPathType;\n            clipPath = isInit ? newEl(clipPathType) : oldClipPath;\n          } else if (isReplace) {\n            isInit = true;\n            clipPath = newEl(clipPathType);\n          }\n\n          el.setClipPath(clipPath);\n          applyUpdateTransition(clipPath, clipPathOption, graphicModel, {\n            isInit: isInit\n          });\n          applyKeyframeAnimation(clipPath, clipPathOption.keyframeAnimation, graphicModel);\n        }\n\n        var elInner = inner(el);\n        el.setTextConfig(textConfig);\n        elInner.option = elOption;\n        setEventData(el, graphicModel, elOption);\n        graphicUtil.setTooltipConfig({\n          el: el,\n          componentModel: graphicModel,\n          itemName: el.name,\n          itemTooltipOption: elOption.tooltip\n        });\n        applyKeyframeAnimation(el, elOption.keyframeAnimation, graphicModel);\n      }\n    });\n  };\n  /**\n   * Locate graphic elements.\n   */\n\n\n  GraphicComponentView.prototype._relocate = function (graphicModel, api) {\n    var elOptions = graphicModel.option.elements;\n    var rootGroup = this.group;\n    var elMap = this._elMap;\n    var apiWidth = api.getWidth();\n    var apiHeight = api.getHeight();\n    var xy = ['x', 'y']; // Top-down to calculate percentage width/height of group\n\n    for (var i = 0; i < elOptions.length; i++) {\n      var elOption = elOptions[i];\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var el = id != null ? elMap.get(id) : null;\n\n      if (!el || !el.isGroup) {\n        continue;\n      }\n\n      var parentEl = el.parent;\n      var isParentRoot = parentEl === rootGroup; // Like 'position:absolut' in css, default 0.\n\n      var elInner = inner(el);\n      var parentElInner = inner(parentEl);\n      elInner.width = parsePercent(elInner.option.width, isParentRoot ? apiWidth : parentElInner.width) || 0;\n      elInner.height = parsePercent(elInner.option.height, isParentRoot ? apiHeight : parentElInner.height) || 0;\n    } // Bottom-up tranvese all elements (consider ec resize) to locate elements.\n\n\n    for (var i = elOptions.length - 1; i >= 0; i--) {\n      var elOption = elOptions[i];\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var el = id != null ? elMap.get(id) : null;\n\n      if (!el) {\n        continue;\n      }\n\n      var parentEl = el.parent;\n      var parentElInner = inner(parentEl);\n      var containerInfo = parentEl === rootGroup ? {\n        width: apiWidth,\n        height: apiHeight\n      } : {\n        width: parentElInner.width,\n        height: parentElInner.height\n      }; // PENDING\n      // Currently, when `bounding: 'all'`, the union bounding rect of the group\n      // does not include the rect of [0, 0, group.width, group.height], which\n      // is probably weird for users. Should we make a break change for it?\n\n      var layoutPos = {};\n      var layouted = layoutUtil.positionElement(el, elOption, containerInfo, null, {\n        hv: elOption.hv,\n        boundingMode: elOption.bounding\n      }, layoutPos);\n\n      if (!inner(el).isNew && layouted) {\n        var transition = elOption.transition;\n        var animatePos = {};\n\n        for (var k = 0; k < xy.length; k++) {\n          var key = xy[k];\n          var val = layoutPos[key];\n\n          if (transition && (isTransitionAll(transition) || zrUtil.indexOf(transition, key) >= 0)) {\n            animatePos[key] = val;\n          } else {\n            el[key] = val;\n          }\n        }\n\n        updateProps(el, animatePos, graphicModel, 0);\n      } else {\n        el.attr(layoutPos);\n      }\n    }\n  };\n  /**\n   * Clear all elements.\n   */\n\n\n  GraphicComponentView.prototype._clear = function () {\n    var _this = this;\n\n    var elMap = this._elMap;\n    elMap.each(function (el) {\n      removeEl(el, inner(el).option, elMap, _this._lastGraphicModel);\n    });\n    this._elMap = zrUtil.createHashMap();\n  };\n\n  GraphicComponentView.prototype.dispose = function () {\n    this._clear();\n  };\n\n  GraphicComponentView.type = 'graphic';\n  return GraphicComponentView;\n}(ComponentView);\n\nexport { GraphicComponentView };\n\nfunction newEl(graphicType) {\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(graphicType, 'graphic type MUST be set');\n  }\n\n  var Clz = zrUtil.hasOwn(nonShapeGraphicElements, graphicType) // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n  ? nonShapeGraphicElements[graphicType] : graphicUtil.getShapeClass(graphicType);\n\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(Clz, \"graphic type \" + graphicType + \" can not be found\");\n  }\n\n  var el = new Clz({});\n  inner(el).type = graphicType;\n  return el;\n}\n\nfunction createEl(id, targetElParent, graphicType, elMap) {\n  var el = newEl(graphicType);\n  targetElParent.add(el);\n  elMap.set(id, el);\n  inner(el).id = id;\n  inner(el).isNew = true;\n  return el;\n}\n\nfunction removeEl(elExisting, elOption, elMap, graphicModel) {\n  var existElParent = elExisting && elExisting.parent;\n\n  if (existElParent) {\n    elExisting.type === 'group' && elExisting.traverse(function (el) {\n      removeEl(el, elOption, elMap, graphicModel);\n    });\n    applyLeaveTransition(elExisting, elOption, graphicModel);\n    elMap.removeKey(inner(elExisting).id);\n  }\n}\n\nfunction updateCommonAttrs(el, elOption, defaultZ, defaultZlevel) {\n  if (!el.isGroup) {\n    zrUtil.each([['cursor', Displayable.prototype.cursor], // We should not support configure z and zlevel in the element level.\n    // But seems we didn't limit it previously. So here still use it to avoid breaking.\n    ['zlevel', defaultZlevel || 0], ['z', defaultZ || 0], // z2 must not be null/undefined, otherwise sort error may occur.\n    ['z2', 0]], function (item) {\n      var prop = item[0];\n\n      if (zrUtil.hasOwn(elOption, prop)) {\n        el[prop] = zrUtil.retrieve2(elOption[prop], item[1]);\n      } else if (el[prop] == null) {\n        el[prop] = item[1];\n      }\n    });\n  }\n\n  zrUtil.each(zrUtil.keys(elOption), function (key) {\n    // Assign event handlers.\n    // PENDING: should enumerate all event names or use pattern matching?\n    if (key.indexOf('on') === 0) {\n      var val = elOption[key];\n      el[key] = zrUtil.isFunction(val) ? val : null;\n    }\n  });\n\n  if (zrUtil.hasOwn(elOption, 'draggable')) {\n    el.draggable = elOption.draggable;\n  } // Other attributes\n\n\n  elOption.name != null && (el.name = elOption.name);\n  elOption.id != null && (el.id = elOption.id);\n} // Remove unnecessary props to avoid potential problems.\n\n\nfunction getCleanedElOption(elOption) {\n  elOption = zrUtil.extend({}, elOption);\n  zrUtil.each(['id', 'parentId', '$action', 'hv', 'bounding', 'textContent', 'clipPath'].concat(layoutUtil.LOCATION_PARAMS), function (name) {\n    delete elOption[name];\n  });\n  return elOption;\n}\n\nfunction setEventData(el, graphicModel, elOption) {\n  var eventData = getECData(el).eventData; // Simple optimize for large amount of elements that no need event.\n\n  if (!el.silent && !el.ignore && !eventData) {\n    eventData = getECData(el).eventData = {\n      componentType: 'graphic',\n      componentIndex: graphicModel.componentIndex,\n      name: el.name\n    };\n  } // `elOption.info` enables user to mount some info on\n  // elements and use them in event handlers.\n\n\n  if (eventData) {\n    eventData.info = elOption.info;\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}