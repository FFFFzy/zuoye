{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.animateLabelValue = animateLabelValue;\nexports.createTextConfig = createTextConfig;\nexports.createTextStyle = createTextStyle;\nexports.getFont = getFont;\nexports.getLabelStatesModels = getLabelStatesModels;\nexports.labelInner = void 0;\nexports.setLabelStyle = setLabelStyle;\nexports.setLabelText = setLabelText;\nexports.setLabelValueAnimation = setLabelValueAnimation;\n\nvar _Text = _interopRequireDefault(require(\"zrender/lib/graphic/Text.js\"));\n\nvar _util = require(\"zrender/lib/core/util.js\");\n\nvar _states = require(\"../util/states.js\");\n\nvar _log = require(\"../util/log.js\");\n\nvar _model = require(\"../util/model.js\");\n\nvar _graphic = require(\"../util/graphic.js\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar EMPTY_OBJ = {};\n\nfunction setLabelText(label, labelTexts) {\n  for (var i = 0; i < _states.SPECIAL_STATES.length; i++) {\n    var stateName = _states.SPECIAL_STATES[i];\n    var text = labelTexts[stateName];\n    var state = label.ensureState(stateName);\n    state.style = state.style || {};\n    state.style.text = text;\n  }\n\n  var oldStates = label.currentStates.slice();\n  label.clearStates(true);\n  label.setStyle({\n    text: labelTexts.normal\n  });\n  label.useStates(oldStates, true);\n}\n\nfunction getLabelText(opt, stateModels, interpolatedValue) {\n  var labelFetcher = opt.labelFetcher;\n  var labelDataIndex = opt.labelDataIndex;\n  var labelDimIndex = opt.labelDimIndex;\n  var normalModel = stateModels.normal;\n  var baseText;\n\n  if (labelFetcher) {\n    baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex, normalModel && normalModel.get('formatter'), interpolatedValue != null ? {\n      interpolatedValue: interpolatedValue\n    } : null);\n  }\n\n  if (baseText == null) {\n    baseText = (0, _util.isFunction)(opt.defaultText) ? opt.defaultText(labelDataIndex, opt, interpolatedValue) : opt.defaultText;\n  }\n\n  var statesText = {\n    normal: baseText\n  };\n\n  for (var i = 0; i < _states.SPECIAL_STATES.length; i++) {\n    var stateName = _states.SPECIAL_STATES[i];\n    var stateModel = stateModels[stateName];\n    statesText[stateName] = (0, _util.retrieve2)(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, stateName, null, labelDimIndex, stateModel && stateModel.get('formatter')) : null, baseText);\n  }\n\n  return statesText;\n}\n\nfunction setLabelStyle(targetEl, labelStatesModels, opt, stateSpecified // TODO specified position?\n) {\n  opt = opt || EMPTY_OBJ;\n  var isSetOnText = targetEl instanceof _Text.default;\n  var needsCreateText = false;\n\n  for (var i = 0; i < _states.DISPLAY_STATES.length; i++) {\n    var stateModel = labelStatesModels[_states.DISPLAY_STATES[i]];\n\n    if (stateModel && stateModel.getShallow('show')) {\n      needsCreateText = true;\n      break;\n    }\n  }\n\n  var textContent = isSetOnText ? targetEl : targetEl.getTextContent();\n\n  if (needsCreateText) {\n    if (!isSetOnText) {\n      // Reuse the previous\n      if (!textContent) {\n        textContent = new _Text.default();\n        targetEl.setTextContent(textContent);\n      } // Use same state proxy\n\n\n      if (targetEl.stateProxy) {\n        textContent.stateProxy = targetEl.stateProxy;\n      }\n    }\n\n    var labelStatesTexts = getLabelText(opt, labelStatesModels);\n    var normalModel = labelStatesModels.normal;\n    var showNormal = !!normalModel.getShallow('show');\n    var normalStyle = createTextStyle(normalModel, stateSpecified && stateSpecified.normal, opt, false, !isSetOnText);\n    normalStyle.text = labelStatesTexts.normal;\n\n    if (!isSetOnText) {\n      // Always create new\n      targetEl.setTextConfig(createTextConfig(normalModel, opt, false));\n    }\n\n    for (var i = 0; i < _states.SPECIAL_STATES.length; i++) {\n      var stateName = _states.SPECIAL_STATES[i];\n      var stateModel = labelStatesModels[stateName];\n\n      if (stateModel) {\n        var stateObj = textContent.ensureState(stateName);\n        var stateShow = !!(0, _util.retrieve2)(stateModel.getShallow('show'), showNormal);\n\n        if (stateShow !== showNormal) {\n          stateObj.ignore = !stateShow;\n        }\n\n        stateObj.style = createTextStyle(stateModel, stateSpecified && stateSpecified[stateName], opt, true, !isSetOnText);\n        stateObj.style.text = labelStatesTexts[stateName];\n\n        if (!isSetOnText) {\n          var targetElEmphasisState = targetEl.ensureState(stateName);\n          targetElEmphasisState.textConfig = createTextConfig(stateModel, opt, true);\n        }\n      }\n    } // PENDING: if there is many requirements that emphasis position\n    // need to be different from normal position, we might consider\n    // auto slient is those cases.\n\n\n    textContent.silent = !!normalModel.getShallow('silent'); // Keep x and y\n\n    if (textContent.style.x != null) {\n      normalStyle.x = textContent.style.x;\n    }\n\n    if (textContent.style.y != null) {\n      normalStyle.y = textContent.style.y;\n    }\n\n    textContent.ignore = !showNormal; // Always create new style.\n\n    textContent.useStyle(normalStyle);\n    textContent.dirty();\n\n    if (opt.enableTextSetter) {\n      labelInner(textContent).setLabelText = function (interpolatedValue) {\n        var labelStatesTexts = getLabelText(opt, labelStatesModels, interpolatedValue);\n        setLabelText(textContent, labelStatesTexts);\n      };\n    }\n  } else if (textContent) {\n    // Not display rich text.\n    textContent.ignore = true;\n  }\n\n  targetEl.dirty();\n}\n\nfunction getLabelStatesModels(itemModel, labelName) {\n  labelName = labelName || 'label';\n  var statesModels = {\n    normal: itemModel.getModel(labelName)\n  };\n\n  for (var i = 0; i < _states.SPECIAL_STATES.length; i++) {\n    var stateName = _states.SPECIAL_STATES[i];\n    statesModels[stateName] = itemModel.getModel([stateName, labelName]);\n  }\n\n  return statesModels;\n}\n/**\n * Set basic textStyle properties.\n */\n\n\nfunction createTextStyle(textStyleModel, specifiedTextStyle, // Fixed style in the code. Can't be set by model.\nopt, isNotNormal, isAttached // If text is attached on an element. If so, auto color will handling in zrender.\n) {\n  var textStyle = {};\n  setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached);\n  specifiedTextStyle && (0, _util.extend)(textStyle, specifiedTextStyle); // textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n\n  return textStyle;\n}\n\nfunction createTextConfig(textStyleModel, opt, isNotNormal) {\n  opt = opt || {};\n  var textConfig = {};\n  var labelPosition;\n  var labelRotate = textStyleModel.getShallow('rotate');\n  var labelDistance = (0, _util.retrieve2)(textStyleModel.getShallow('distance'), isNotNormal ? null : 5);\n  var labelOffset = textStyleModel.getShallow('offset');\n  labelPosition = textStyleModel.getShallow('position') || (isNotNormal ? null : 'inside'); // 'outside' is not a valid zr textPostion value, but used\n  // in bar series, and magric type should be considered.\n\n  labelPosition === 'outside' && (labelPosition = opt.defaultOutsidePosition || 'top');\n\n  if (labelPosition != null) {\n    textConfig.position = labelPosition;\n  }\n\n  if (labelOffset != null) {\n    textConfig.offset = labelOffset;\n  }\n\n  if (labelRotate != null) {\n    labelRotate *= Math.PI / 180;\n    textConfig.rotation = labelRotate;\n  }\n\n  if (labelDistance != null) {\n    textConfig.distance = labelDistance;\n  } // fill and auto is determined by the color of path fill if it's not specified by developers.\n\n\n  textConfig.outsideFill = textStyleModel.get('color') === 'inherit' ? opt.inheritColor || null : 'auto';\n  return textConfig;\n}\n/**\n * The uniform entry of set text style, that is, retrieve style definitions\n * from `model` and set to `textStyle` object.\n *\n * Never in merge mode, but in overwrite mode, that is, all of the text style\n * properties will be set. (Consider the states of normal and emphasis and\n * default value can be adopted, merge would make the logic too complicated\n * to manage.)\n */\n\n\nfunction setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached) {\n  // Consider there will be abnormal when merge hover style to normal style if given default value.\n  opt = opt || EMPTY_OBJ;\n  var ecModel = textStyleModel.ecModel;\n  var globalTextStyle = ecModel && ecModel.option.textStyle; // Consider case:\n  // {\n  //     data: [{\n  //         value: 12,\n  //         label: {\n  //             rich: {\n  //                 // no 'a' here but using parent 'a'.\n  //             }\n  //         }\n  //     }],\n  //     rich: {\n  //         a: { ... }\n  //     }\n  // }\n\n  var richItemNames = getRichItemNames(textStyleModel);\n  var richResult;\n\n  if (richItemNames) {\n    richResult = {};\n\n    for (var name_1 in richItemNames) {\n      if (richItemNames.hasOwnProperty(name_1)) {\n        // Cascade is supported in rich.\n        var richTextStyle = textStyleModel.getModel(['rich', name_1]); // In rich, never `disableBox`.\n        // FIXME: consider `label: {formatter: '{a|xx}', color: 'blue', rich: {a: {}}}`,\n        // the default color `'blue'` will not be adopted if no color declared in `rich`.\n        // That might confuses users. So probably we should put `textStyleModel` as the\n        // root ancestor of the `richTextStyle`. But that would be a break change.\n\n        setTokenTextStyle(richResult[name_1] = {}, richTextStyle, globalTextStyle, opt, isNotNormal, isAttached, false, true);\n      }\n    }\n  }\n\n  if (richResult) {\n    textStyle.rich = richResult;\n  }\n\n  var overflow = textStyleModel.get('overflow');\n\n  if (overflow) {\n    textStyle.overflow = overflow;\n  }\n\n  var margin = textStyleModel.get('minMargin');\n\n  if (margin != null) {\n    textStyle.margin = margin;\n  }\n\n  setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, true, false);\n} // Consider case:\n// {\n//     data: [{\n//         value: 12,\n//         label: {\n//             rich: {\n//                 // no 'a' here but using parent 'a'.\n//             }\n//         }\n//     }],\n//     rich: {\n//         a: { ... }\n//     }\n// }\n// TODO TextStyleModel\n\n\nfunction getRichItemNames(textStyleModel) {\n  // Use object to remove duplicated names.\n  var richItemNameMap;\n\n  while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\n    var rich = (textStyleModel.option || EMPTY_OBJ).rich;\n\n    if (rich) {\n      richItemNameMap = richItemNameMap || {};\n      var richKeys = (0, _util.keys)(rich);\n\n      for (var i = 0; i < richKeys.length; i++) {\n        var richKey = richKeys[i];\n        richItemNameMap[richKey] = 1;\n      }\n    }\n\n    textStyleModel = textStyleModel.parentModel;\n  }\n\n  return richItemNameMap;\n}\n\nvar TEXT_PROPS_WITH_GLOBAL = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'];\nvar TEXT_PROPS_SELF = ['align', 'lineHeight', 'width', 'height', 'tag', 'verticalAlign'];\nvar TEXT_PROPS_BOX = ['padding', 'borderWidth', 'borderRadius', 'borderDashOffset', 'backgroundColor', 'borderColor', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n\nfunction setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, isBlock, inRich) {\n  // In merge mode, default value should not be given.\n  globalTextStyle = !isNotNormal && globalTextStyle || EMPTY_OBJ;\n  var inheritColor = opt && opt.inheritColor;\n  var fillColor = textStyleModel.getShallow('color');\n  var strokeColor = textStyleModel.getShallow('textBorderColor');\n  var opacity = (0, _util.retrieve2)(textStyleModel.getShallow('opacity'), globalTextStyle.opacity);\n\n  if (fillColor === 'inherit' || fillColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (fillColor === 'auto') {\n        (0, _log.deprecateReplaceLog)('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n\n    if (inheritColor) {\n      fillColor = inheritColor;\n    } else {\n      fillColor = null;\n    }\n  }\n\n  if (strokeColor === 'inherit' || strokeColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (strokeColor === 'auto') {\n        (0, _log.deprecateReplaceLog)('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n\n    if (inheritColor) {\n      strokeColor = inheritColor;\n    } else {\n      strokeColor = null;\n    }\n  }\n\n  if (!isAttached) {\n    // Only use default global textStyle.color if text is individual.\n    // Otherwise it will use the strategy of attached text color because text may be on a path.\n    fillColor = fillColor || globalTextStyle.color;\n    strokeColor = strokeColor || globalTextStyle.textBorderColor;\n  }\n\n  if (fillColor != null) {\n    textStyle.fill = fillColor;\n  }\n\n  if (strokeColor != null) {\n    textStyle.stroke = strokeColor;\n  }\n\n  var textBorderWidth = (0, _util.retrieve2)(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\n\n  if (textBorderWidth != null) {\n    textStyle.lineWidth = textBorderWidth;\n  }\n\n  var textBorderType = (0, _util.retrieve2)(textStyleModel.getShallow('textBorderType'), globalTextStyle.textBorderType);\n\n  if (textBorderType != null) {\n    textStyle.lineDash = textBorderType;\n  }\n\n  var textBorderDashOffset = (0, _util.retrieve2)(textStyleModel.getShallow('textBorderDashOffset'), globalTextStyle.textBorderDashOffset);\n\n  if (textBorderDashOffset != null) {\n    textStyle.lineDashOffset = textBorderDashOffset;\n  }\n\n  if (!isNotNormal && opacity == null && !inRich) {\n    opacity = opt && opt.defaultOpacity;\n  }\n\n  if (opacity != null) {\n    textStyle.opacity = opacity;\n  } // TODO\n\n\n  if (!isNotNormal && !isAttached) {\n    // Set default finally.\n    if (textStyle.fill == null && opt.inheritColor) {\n      textStyle.fill = opt.inheritColor;\n    }\n  } // Do not use `getFont` here, because merge should be supported, where\n  // part of these properties may be changed in emphasis style, and the\n  // others should remain their original value got from normal style.\n\n\n  for (var i = 0; i < TEXT_PROPS_WITH_GLOBAL.length; i++) {\n    var key = TEXT_PROPS_WITH_GLOBAL[i];\n    var val = (0, _util.retrieve2)(textStyleModel.getShallow(key), globalTextStyle[key]);\n\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n\n  for (var i = 0; i < TEXT_PROPS_SELF.length; i++) {\n    var key = TEXT_PROPS_SELF[i];\n    var val = textStyleModel.getShallow(key);\n\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n\n  if (textStyle.verticalAlign == null) {\n    var baseline = textStyleModel.getShallow('baseline');\n\n    if (baseline != null) {\n      textStyle.verticalAlign = baseline;\n    }\n  }\n\n  if (!isBlock || !opt.disableBox) {\n    for (var i = 0; i < TEXT_PROPS_BOX.length; i++) {\n      var key = TEXT_PROPS_BOX[i];\n      var val = textStyleModel.getShallow(key);\n\n      if (val != null) {\n        textStyle[key] = val;\n      }\n    }\n\n    var borderType = textStyleModel.getShallow('borderType');\n\n    if (borderType != null) {\n      textStyle.borderDash = borderType;\n    }\n\n    if ((textStyle.backgroundColor === 'auto' || textStyle.backgroundColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.backgroundColor === 'auto') {\n          (0, _log.deprecateReplaceLog)('backgroundColor: \\'auto\\'', 'backgroundColor: \\'inherit\\'');\n        }\n      }\n\n      textStyle.backgroundColor = inheritColor;\n    }\n\n    if ((textStyle.borderColor === 'auto' || textStyle.borderColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.borderColor === 'auto') {\n          (0, _log.deprecateReplaceLog)('borderColor: \\'auto\\'', 'borderColor: \\'inherit\\'');\n        }\n      }\n\n      textStyle.borderColor = inheritColor;\n    }\n  }\n}\n\nfunction getFont(opt, ecModel) {\n  var gTextStyleModel = ecModel && ecModel.getModel('textStyle');\n  return (0, _util.trim)([// FIXME in node-canvas fontWeight is before fontStyle\n  opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' '));\n}\n\nvar labelInner = (0, _model.makeInner)();\nexports.labelInner = labelInner;\n\nfunction setLabelValueAnimation(label, labelStatesModels, value, getDefaultText) {\n  if (!label) {\n    return;\n  }\n\n  var obj = labelInner(label);\n  obj.prevValue = obj.value;\n  obj.value = value;\n  var normalLabelModel = labelStatesModels.normal;\n  obj.valueAnimation = normalLabelModel.get('valueAnimation');\n\n  if (obj.valueAnimation) {\n    obj.precision = normalLabelModel.get('precision');\n    obj.defaultInterpolatedText = getDefaultText;\n    obj.statesModels = labelStatesModels;\n  }\n}\n\nfunction animateLabelValue(textEl, dataIndex, data, animatableModel, labelFetcher) {\n  var labelInnerStore = labelInner(textEl);\n\n  if (!labelInnerStore.valueAnimation || labelInnerStore.prevValue === labelInnerStore.value) {\n    // Value not changed, no new label animation\n    return;\n  }\n\n  var defaultInterpolatedText = labelInnerStore.defaultInterpolatedText; // Consider the case that being animating, do not use the `obj.value`,\n  // Otherwise it will jump to the `obj.value` when this new animation started.\n\n  var currValue = (0, _util.retrieve2)(labelInnerStore.interpolatedValue, labelInnerStore.prevValue);\n  var targetValue = labelInnerStore.value;\n\n  function during(percent) {\n    var interpolated = (0, _model.interpolateRawValues)(data, labelInnerStore.precision, currValue, targetValue, percent);\n    labelInnerStore.interpolatedValue = percent === 1 ? null : interpolated;\n    var labelText = getLabelText({\n      labelDataIndex: dataIndex,\n      labelFetcher: labelFetcher,\n      defaultText: defaultInterpolatedText ? defaultInterpolatedText(interpolated) : interpolated + ''\n    }, labelInnerStore.statesModels, interpolated);\n    setLabelText(textEl, labelText);\n  }\n\n  textEl.percent = 0;\n  (labelInnerStore.prevValue == null ? _graphic.initProps : _graphic.updateProps)(textEl, {\n    // percent is used to prevent animation from being aborted #15916\n    percent: 1\n  }, animatableModel, dataIndex, null, during);\n}","map":{"version":3,"names":["EMPTY_OBJ","setLabelText","label","labelTexts","i","SPECIAL_STATES","length","stateName","text","state","ensureState","style","oldStates","currentStates","slice","clearStates","setStyle","normal","useStates","getLabelText","opt","stateModels","interpolatedValue","labelFetcher","labelDataIndex","labelDimIndex","normalModel","baseText","getFormattedLabel","get","isFunction","defaultText","statesText","stateModel","retrieve2","setLabelStyle","targetEl","labelStatesModels","stateSpecified","isSetOnText","ZRText","needsCreateText","DISPLAY_STATES","getShallow","textContent","getTextContent","setTextContent","stateProxy","labelStatesTexts","showNormal","normalStyle","createTextStyle","setTextConfig","createTextConfig","stateObj","stateShow","ignore","targetElEmphasisState","textConfig","silent","x","y","useStyle","dirty","enableTextSetter","labelInner","getLabelStatesModels","itemModel","labelName","statesModels","getModel","textStyleModel","specifiedTextStyle","isNotNormal","isAttached","textStyle","setTextStyleCommon","extend","labelPosition","labelRotate","labelDistance","labelOffset","defaultOutsidePosition","position","offset","Math","PI","rotation","distance","outsideFill","inheritColor","ecModel","globalTextStyle","option","richItemNames","getRichItemNames","richResult","name_1","hasOwnProperty","richTextStyle","setTokenTextStyle","rich","overflow","margin","richItemNameMap","richKeys","keys","richKey","parentModel","TEXT_PROPS_WITH_GLOBAL","TEXT_PROPS_SELF","TEXT_PROPS_BOX","isBlock","inRich","fillColor","strokeColor","opacity","process","env","NODE_ENV","deprecateReplaceLog","color","textBorderColor","fill","stroke","textBorderWidth","lineWidth","textBorderType","lineDash","textBorderDashOffset","lineDashOffset","defaultOpacity","key","val","verticalAlign","baseline","disableBox","borderType","borderDash","backgroundColor","borderColor","getFont","gTextStyleModel","trim","fontStyle","fontWeight","fontSize","fontFamily","join","makeInner","setLabelValueAnimation","value","getDefaultText","obj","prevValue","normalLabelModel","valueAnimation","precision","defaultInterpolatedText","animateLabelValue","textEl","dataIndex","data","animatableModel","labelInnerStore","currValue","targetValue","during","percent","interpolated","interpolateRawValues","labelText","initProps","updateProps"],"sources":["C:/Users/Z/Desktop/efficient/node_modules/echarts/lib/label/labelStyle.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { isFunction, retrieve2, extend, keys, trim } from 'zrender/lib/core/util.js';\nimport { SPECIAL_STATES, DISPLAY_STATES } from '../util/states.js';\nimport { deprecateReplaceLog } from '../util/log.js';\nimport { makeInner, interpolateRawValues } from '../util/model.js';\nimport { initProps, updateProps } from '../util/graphic.js';\nvar EMPTY_OBJ = {};\nexport function setLabelText(label, labelTexts) {\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var text = labelTexts[stateName];\n    var state = label.ensureState(stateName);\n    state.style = state.style || {};\n    state.style.text = text;\n  }\n\n  var oldStates = label.currentStates.slice();\n  label.clearStates(true);\n  label.setStyle({\n    text: labelTexts.normal\n  });\n  label.useStates(oldStates, true);\n}\n\nfunction getLabelText(opt, stateModels, interpolatedValue) {\n  var labelFetcher = opt.labelFetcher;\n  var labelDataIndex = opt.labelDataIndex;\n  var labelDimIndex = opt.labelDimIndex;\n  var normalModel = stateModels.normal;\n  var baseText;\n\n  if (labelFetcher) {\n    baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex, normalModel && normalModel.get('formatter'), interpolatedValue != null ? {\n      interpolatedValue: interpolatedValue\n    } : null);\n  }\n\n  if (baseText == null) {\n    baseText = isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt, interpolatedValue) : opt.defaultText;\n  }\n\n  var statesText = {\n    normal: baseText\n  };\n\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var stateModel = stateModels[stateName];\n    statesText[stateName] = retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, stateName, null, labelDimIndex, stateModel && stateModel.get('formatter')) : null, baseText);\n  }\n\n  return statesText;\n}\n\nfunction setLabelStyle(targetEl, labelStatesModels, opt, stateSpecified // TODO specified position?\n) {\n  opt = opt || EMPTY_OBJ;\n  var isSetOnText = targetEl instanceof ZRText;\n  var needsCreateText = false;\n\n  for (var i = 0; i < DISPLAY_STATES.length; i++) {\n    var stateModel = labelStatesModels[DISPLAY_STATES[i]];\n\n    if (stateModel && stateModel.getShallow('show')) {\n      needsCreateText = true;\n      break;\n    }\n  }\n\n  var textContent = isSetOnText ? targetEl : targetEl.getTextContent();\n\n  if (needsCreateText) {\n    if (!isSetOnText) {\n      // Reuse the previous\n      if (!textContent) {\n        textContent = new ZRText();\n        targetEl.setTextContent(textContent);\n      } // Use same state proxy\n\n\n      if (targetEl.stateProxy) {\n        textContent.stateProxy = targetEl.stateProxy;\n      }\n    }\n\n    var labelStatesTexts = getLabelText(opt, labelStatesModels);\n    var normalModel = labelStatesModels.normal;\n    var showNormal = !!normalModel.getShallow('show');\n    var normalStyle = createTextStyle(normalModel, stateSpecified && stateSpecified.normal, opt, false, !isSetOnText);\n    normalStyle.text = labelStatesTexts.normal;\n\n    if (!isSetOnText) {\n      // Always create new\n      targetEl.setTextConfig(createTextConfig(normalModel, opt, false));\n    }\n\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      var stateName = SPECIAL_STATES[i];\n      var stateModel = labelStatesModels[stateName];\n\n      if (stateModel) {\n        var stateObj = textContent.ensureState(stateName);\n        var stateShow = !!retrieve2(stateModel.getShallow('show'), showNormal);\n\n        if (stateShow !== showNormal) {\n          stateObj.ignore = !stateShow;\n        }\n\n        stateObj.style = createTextStyle(stateModel, stateSpecified && stateSpecified[stateName], opt, true, !isSetOnText);\n        stateObj.style.text = labelStatesTexts[stateName];\n\n        if (!isSetOnText) {\n          var targetElEmphasisState = targetEl.ensureState(stateName);\n          targetElEmphasisState.textConfig = createTextConfig(stateModel, opt, true);\n        }\n      }\n    } // PENDING: if there is many requirements that emphasis position\n    // need to be different from normal position, we might consider\n    // auto slient is those cases.\n\n\n    textContent.silent = !!normalModel.getShallow('silent'); // Keep x and y\n\n    if (textContent.style.x != null) {\n      normalStyle.x = textContent.style.x;\n    }\n\n    if (textContent.style.y != null) {\n      normalStyle.y = textContent.style.y;\n    }\n\n    textContent.ignore = !showNormal; // Always create new style.\n\n    textContent.useStyle(normalStyle);\n    textContent.dirty();\n\n    if (opt.enableTextSetter) {\n      labelInner(textContent).setLabelText = function (interpolatedValue) {\n        var labelStatesTexts = getLabelText(opt, labelStatesModels, interpolatedValue);\n        setLabelText(textContent, labelStatesTexts);\n      };\n    }\n  } else if (textContent) {\n    // Not display rich text.\n    textContent.ignore = true;\n  }\n\n  targetEl.dirty();\n}\n\nexport { setLabelStyle };\nexport function getLabelStatesModels(itemModel, labelName) {\n  labelName = labelName || 'label';\n  var statesModels = {\n    normal: itemModel.getModel(labelName)\n  };\n\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    statesModels[stateName] = itemModel.getModel([stateName, labelName]);\n  }\n\n  return statesModels;\n}\n/**\n * Set basic textStyle properties.\n */\n\nexport function createTextStyle(textStyleModel, specifiedTextStyle, // Fixed style in the code. Can't be set by model.\nopt, isNotNormal, isAttached // If text is attached on an element. If so, auto color will handling in zrender.\n) {\n  var textStyle = {};\n  setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached);\n  specifiedTextStyle && extend(textStyle, specifiedTextStyle); // textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n\n  return textStyle;\n}\nexport function createTextConfig(textStyleModel, opt, isNotNormal) {\n  opt = opt || {};\n  var textConfig = {};\n  var labelPosition;\n  var labelRotate = textStyleModel.getShallow('rotate');\n  var labelDistance = retrieve2(textStyleModel.getShallow('distance'), isNotNormal ? null : 5);\n  var labelOffset = textStyleModel.getShallow('offset');\n  labelPosition = textStyleModel.getShallow('position') || (isNotNormal ? null : 'inside'); // 'outside' is not a valid zr textPostion value, but used\n  // in bar series, and magric type should be considered.\n\n  labelPosition === 'outside' && (labelPosition = opt.defaultOutsidePosition || 'top');\n\n  if (labelPosition != null) {\n    textConfig.position = labelPosition;\n  }\n\n  if (labelOffset != null) {\n    textConfig.offset = labelOffset;\n  }\n\n  if (labelRotate != null) {\n    labelRotate *= Math.PI / 180;\n    textConfig.rotation = labelRotate;\n  }\n\n  if (labelDistance != null) {\n    textConfig.distance = labelDistance;\n  } // fill and auto is determined by the color of path fill if it's not specified by developers.\n\n\n  textConfig.outsideFill = textStyleModel.get('color') === 'inherit' ? opt.inheritColor || null : 'auto';\n  return textConfig;\n}\n/**\n * The uniform entry of set text style, that is, retrieve style definitions\n * from `model` and set to `textStyle` object.\n *\n * Never in merge mode, but in overwrite mode, that is, all of the text style\n * properties will be set. (Consider the states of normal and emphasis and\n * default value can be adopted, merge would make the logic too complicated\n * to manage.)\n */\n\nfunction setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached) {\n  // Consider there will be abnormal when merge hover style to normal style if given default value.\n  opt = opt || EMPTY_OBJ;\n  var ecModel = textStyleModel.ecModel;\n  var globalTextStyle = ecModel && ecModel.option.textStyle; // Consider case:\n  // {\n  //     data: [{\n  //         value: 12,\n  //         label: {\n  //             rich: {\n  //                 // no 'a' here but using parent 'a'.\n  //             }\n  //         }\n  //     }],\n  //     rich: {\n  //         a: { ... }\n  //     }\n  // }\n\n  var richItemNames = getRichItemNames(textStyleModel);\n  var richResult;\n\n  if (richItemNames) {\n    richResult = {};\n\n    for (var name_1 in richItemNames) {\n      if (richItemNames.hasOwnProperty(name_1)) {\n        // Cascade is supported in rich.\n        var richTextStyle = textStyleModel.getModel(['rich', name_1]); // In rich, never `disableBox`.\n        // FIXME: consider `label: {formatter: '{a|xx}', color: 'blue', rich: {a: {}}}`,\n        // the default color `'blue'` will not be adopted if no color declared in `rich`.\n        // That might confuses users. So probably we should put `textStyleModel` as the\n        // root ancestor of the `richTextStyle`. But that would be a break change.\n\n        setTokenTextStyle(richResult[name_1] = {}, richTextStyle, globalTextStyle, opt, isNotNormal, isAttached, false, true);\n      }\n    }\n  }\n\n  if (richResult) {\n    textStyle.rich = richResult;\n  }\n\n  var overflow = textStyleModel.get('overflow');\n\n  if (overflow) {\n    textStyle.overflow = overflow;\n  }\n\n  var margin = textStyleModel.get('minMargin');\n\n  if (margin != null) {\n    textStyle.margin = margin;\n  }\n\n  setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, true, false);\n} // Consider case:\n// {\n//     data: [{\n//         value: 12,\n//         label: {\n//             rich: {\n//                 // no 'a' here but using parent 'a'.\n//             }\n//         }\n//     }],\n//     rich: {\n//         a: { ... }\n//     }\n// }\n// TODO TextStyleModel\n\n\nfunction getRichItemNames(textStyleModel) {\n  // Use object to remove duplicated names.\n  var richItemNameMap;\n\n  while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\n    var rich = (textStyleModel.option || EMPTY_OBJ).rich;\n\n    if (rich) {\n      richItemNameMap = richItemNameMap || {};\n      var richKeys = keys(rich);\n\n      for (var i = 0; i < richKeys.length; i++) {\n        var richKey = richKeys[i];\n        richItemNameMap[richKey] = 1;\n      }\n    }\n\n    textStyleModel = textStyleModel.parentModel;\n  }\n\n  return richItemNameMap;\n}\n\nvar TEXT_PROPS_WITH_GLOBAL = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'];\nvar TEXT_PROPS_SELF = ['align', 'lineHeight', 'width', 'height', 'tag', 'verticalAlign'];\nvar TEXT_PROPS_BOX = ['padding', 'borderWidth', 'borderRadius', 'borderDashOffset', 'backgroundColor', 'borderColor', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n\nfunction setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, isBlock, inRich) {\n  // In merge mode, default value should not be given.\n  globalTextStyle = !isNotNormal && globalTextStyle || EMPTY_OBJ;\n  var inheritColor = opt && opt.inheritColor;\n  var fillColor = textStyleModel.getShallow('color');\n  var strokeColor = textStyleModel.getShallow('textBorderColor');\n  var opacity = retrieve2(textStyleModel.getShallow('opacity'), globalTextStyle.opacity);\n\n  if (fillColor === 'inherit' || fillColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (fillColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n\n    if (inheritColor) {\n      fillColor = inheritColor;\n    } else {\n      fillColor = null;\n    }\n  }\n\n  if (strokeColor === 'inherit' || strokeColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (strokeColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n\n    if (inheritColor) {\n      strokeColor = inheritColor;\n    } else {\n      strokeColor = null;\n    }\n  }\n\n  if (!isAttached) {\n    // Only use default global textStyle.color if text is individual.\n    // Otherwise it will use the strategy of attached text color because text may be on a path.\n    fillColor = fillColor || globalTextStyle.color;\n    strokeColor = strokeColor || globalTextStyle.textBorderColor;\n  }\n\n  if (fillColor != null) {\n    textStyle.fill = fillColor;\n  }\n\n  if (strokeColor != null) {\n    textStyle.stroke = strokeColor;\n  }\n\n  var textBorderWidth = retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\n\n  if (textBorderWidth != null) {\n    textStyle.lineWidth = textBorderWidth;\n  }\n\n  var textBorderType = retrieve2(textStyleModel.getShallow('textBorderType'), globalTextStyle.textBorderType);\n\n  if (textBorderType != null) {\n    textStyle.lineDash = textBorderType;\n  }\n\n  var textBorderDashOffset = retrieve2(textStyleModel.getShallow('textBorderDashOffset'), globalTextStyle.textBorderDashOffset);\n\n  if (textBorderDashOffset != null) {\n    textStyle.lineDashOffset = textBorderDashOffset;\n  }\n\n  if (!isNotNormal && opacity == null && !inRich) {\n    opacity = opt && opt.defaultOpacity;\n  }\n\n  if (opacity != null) {\n    textStyle.opacity = opacity;\n  } // TODO\n\n\n  if (!isNotNormal && !isAttached) {\n    // Set default finally.\n    if (textStyle.fill == null && opt.inheritColor) {\n      textStyle.fill = opt.inheritColor;\n    }\n  } // Do not use `getFont` here, because merge should be supported, where\n  // part of these properties may be changed in emphasis style, and the\n  // others should remain their original value got from normal style.\n\n\n  for (var i = 0; i < TEXT_PROPS_WITH_GLOBAL.length; i++) {\n    var key = TEXT_PROPS_WITH_GLOBAL[i];\n    var val = retrieve2(textStyleModel.getShallow(key), globalTextStyle[key]);\n\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n\n  for (var i = 0; i < TEXT_PROPS_SELF.length; i++) {\n    var key = TEXT_PROPS_SELF[i];\n    var val = textStyleModel.getShallow(key);\n\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n\n  if (textStyle.verticalAlign == null) {\n    var baseline = textStyleModel.getShallow('baseline');\n\n    if (baseline != null) {\n      textStyle.verticalAlign = baseline;\n    }\n  }\n\n  if (!isBlock || !opt.disableBox) {\n    for (var i = 0; i < TEXT_PROPS_BOX.length; i++) {\n      var key = TEXT_PROPS_BOX[i];\n      var val = textStyleModel.getShallow(key);\n\n      if (val != null) {\n        textStyle[key] = val;\n      }\n    }\n\n    var borderType = textStyleModel.getShallow('borderType');\n\n    if (borderType != null) {\n      textStyle.borderDash = borderType;\n    }\n\n    if ((textStyle.backgroundColor === 'auto' || textStyle.backgroundColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.backgroundColor === 'auto') {\n          deprecateReplaceLog('backgroundColor: \\'auto\\'', 'backgroundColor: \\'inherit\\'');\n        }\n      }\n\n      textStyle.backgroundColor = inheritColor;\n    }\n\n    if ((textStyle.borderColor === 'auto' || textStyle.borderColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.borderColor === 'auto') {\n          deprecateReplaceLog('borderColor: \\'auto\\'', 'borderColor: \\'inherit\\'');\n        }\n      }\n\n      textStyle.borderColor = inheritColor;\n    }\n  }\n}\n\nexport function getFont(opt, ecModel) {\n  var gTextStyleModel = ecModel && ecModel.getModel('textStyle');\n  return trim([// FIXME in node-canvas fontWeight is before fontStyle\n  opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' '));\n}\nexport var labelInner = makeInner();\nexport function setLabelValueAnimation(label, labelStatesModels, value, getDefaultText) {\n  if (!label) {\n    return;\n  }\n\n  var obj = labelInner(label);\n  obj.prevValue = obj.value;\n  obj.value = value;\n  var normalLabelModel = labelStatesModels.normal;\n  obj.valueAnimation = normalLabelModel.get('valueAnimation');\n\n  if (obj.valueAnimation) {\n    obj.precision = normalLabelModel.get('precision');\n    obj.defaultInterpolatedText = getDefaultText;\n    obj.statesModels = labelStatesModels;\n  }\n}\nexport function animateLabelValue(textEl, dataIndex, data, animatableModel, labelFetcher) {\n  var labelInnerStore = labelInner(textEl);\n\n  if (!labelInnerStore.valueAnimation || labelInnerStore.prevValue === labelInnerStore.value) {\n    // Value not changed, no new label animation\n    return;\n  }\n\n  var defaultInterpolatedText = labelInnerStore.defaultInterpolatedText; // Consider the case that being animating, do not use the `obj.value`,\n  // Otherwise it will jump to the `obj.value` when this new animation started.\n\n  var currValue = retrieve2(labelInnerStore.interpolatedValue, labelInnerStore.prevValue);\n  var targetValue = labelInnerStore.value;\n\n  function during(percent) {\n    var interpolated = interpolateRawValues(data, labelInnerStore.precision, currValue, targetValue, percent);\n    labelInnerStore.interpolatedValue = percent === 1 ? null : interpolated;\n    var labelText = getLabelText({\n      labelDataIndex: dataIndex,\n      labelFetcher: labelFetcher,\n      defaultText: defaultInterpolatedText ? defaultInterpolatedText(interpolated) : interpolated + ''\n    }, labelInnerStore.statesModels, interpolated);\n    setLabelText(textEl, labelText);\n  }\n\n  textEl.percent = 0;\n  (labelInnerStore.prevValue == null ? initProps : updateProps)(textEl, {\n    // percent is used to prevent animation from being aborted #15916\n    percent: 1\n  }, animatableModel, dataIndex, null, during);\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}