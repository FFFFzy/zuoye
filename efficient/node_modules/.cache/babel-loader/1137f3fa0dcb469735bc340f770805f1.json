{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\n\nvar _interopRequireWildcard = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireWildcard.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nvar _tslib = require(\"tslib\");\n\nvar _util = require(\"zrender/lib/core/util.js\");\n\nvar graphicUtil = _interopRequireWildcard(require(\"../../util/graphic.js\"));\n\nvar _states = require(\"../../util/states.js\");\n\nvar labelStyleHelper = _interopRequireWildcard(require(\"../../label/labelStyle.js\"));\n\nvar _labelHelper = require(\"../helper/labelHelper.js\");\n\nvar _barGrid = require(\"../../layout/barGrid.js\");\n\nvar _DataDiffer = _interopRequireDefault(require(\"../../data/DataDiffer.js\"));\n\nvar _Chart = _interopRequireDefault(require(\"../../view/Chart.js\"));\n\nvar _createClipPathFromCoordSys = require(\"../helper/createClipPathFromCoordSys.js\");\n\nvar _prepareCustom = _interopRequireDefault(require(\"../../coord/cartesian/prepareCustom.js\"));\n\nvar _prepareCustom2 = _interopRequireDefault(require(\"../../coord/geo/prepareCustom.js\"));\n\nvar _prepareCustom3 = _interopRequireDefault(require(\"../../coord/single/prepareCustom.js\"));\n\nvar _prepareCustom4 = _interopRequireDefault(require(\"../../coord/polar/prepareCustom.js\"));\n\nvar _prepareCustom5 = _interopRequireDefault(require(\"../../coord/calendar/prepareCustom.js\"));\n\nvar _Displayable = _interopRequireDefault(require(\"zrender/lib/graphic/Displayable.js\"));\n\nvar _styleCompat = require(\"../../util/styleCompat.js\");\n\nvar _log = require(\"../../util/log.js\");\n\nvar _decal = require(\"../../util/decal.js\");\n\nvar _CustomSeries = require(\"./CustomSeries.js\");\n\nvar _customGraphicTransition = require(\"../../animation/customGraphicTransition.js\");\n\nvar _customGraphicKeyframeAnimation = require(\"../../animation/customGraphicKeyframeAnimation.js\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar EMPHASIS = 'emphasis';\nvar NORMAL = 'normal';\nvar BLUR = 'blur';\nvar SELECT = 'select';\nvar STATES = [NORMAL, EMPHASIS, BLUR, SELECT];\nvar PATH_ITEM_STYLE = {\n  normal: ['itemStyle'],\n  emphasis: [EMPHASIS, 'itemStyle'],\n  blur: [BLUR, 'itemStyle'],\n  select: [SELECT, 'itemStyle']\n};\nvar PATH_LABEL = {\n  normal: ['label'],\n  emphasis: [EMPHASIS, 'label'],\n  blur: [BLUR, 'label'],\n  select: [SELECT, 'label']\n};\nvar DEFAULT_TRANSITION = ['x', 'y']; // Use prefix to avoid index to be the same as el.name,\n// which will cause weird update animation.\n\nvar GROUP_DIFF_PREFIX = 'e\\0\\0';\nvar attachedTxInfoTmp = {\n  normal: {},\n  emphasis: {},\n  blur: {},\n  select: {}\n};\n/**\n * To reduce total package size of each coordinate systems, the modules `prepareCustom`\n * of each coordinate systems are not required by each coordinate systems directly, but\n * required by the module `custom`.\n *\n * prepareInfoForCustomSeries {Function}: optional\n *     @return {Object} {coordSys: {...}, api: {\n *         coord: function (data, clamp) {}, // return point in global.\n *         size: function (dataSize, dataItem) {} // return size of each axis in coordSys.\n *     }}\n */\n\nvar prepareCustoms = {\n  cartesian2d: _prepareCustom.default,\n  geo: _prepareCustom2.default,\n  single: _prepareCustom3.default,\n  polar: _prepareCustom4.default,\n  calendar: _prepareCustom5.default\n};\n\nfunction isPath(el) {\n  return el instanceof graphicUtil.Path;\n}\n\nfunction isDisplayable(el) {\n  return el instanceof _Displayable.default;\n}\n\nfunction copyElement(sourceEl, targetEl) {\n  targetEl.copyTransform(sourceEl);\n\n  if (isDisplayable(targetEl) && isDisplayable(sourceEl)) {\n    targetEl.setStyle(sourceEl.style);\n    targetEl.z = sourceEl.z;\n    targetEl.z2 = sourceEl.z2;\n    targetEl.zlevel = sourceEl.zlevel;\n    targetEl.invisible = sourceEl.invisible;\n    targetEl.ignore = sourceEl.ignore;\n\n    if (isPath(targetEl) && isPath(sourceEl)) {\n      targetEl.setShape(sourceEl.shape);\n    }\n  }\n}\n\nvar CustomChartView =\n/** @class */\nfunction (_super) {\n  (0, _tslib.__extends)(CustomChartView, _super);\n\n  function CustomChartView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CustomChartView.type;\n    return _this;\n  }\n\n  CustomChartView.prototype.render = function (customSeries, ecModel, api, payload) {\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    var oldData = this._data;\n    var data = customSeries.getData();\n    var group = this.group;\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n\n    if (!oldData) {\n      // Previous render is incremental render or first render.\n      // Needs remove the incremental rendered elements.\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      createOrUpdateItem(api, null, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      (0, _customGraphicTransition.applyLeaveTransition)(el, (0, _CustomSeries.customInnerStore)(el).option, customSeries);\n    }).update(function (newIdx, oldIdx) {\n      var oldEl = oldData.getItemGraphicEl(oldIdx);\n      createOrUpdateItem(api, oldEl, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).execute(); // Do clipping\n\n    var clipPath = customSeries.get('clip', true) ? (0, _createClipPathFromCoordSys.createClipPath)(customSeries.coordinateSystem, false, customSeries) : null;\n\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n\n    this._data = data;\n  };\n\n  CustomChartView.prototype.incrementalPrepareRender = function (customSeries, ecModel, api) {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  CustomChartView.prototype.incrementalRender = function (params, customSeries, ecModel, api, payload) {\n    var data = customSeries.getData();\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n    var progressiveEls = this._progressiveEls = [];\n\n    function setIncrementalAndHoverLayer(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = params.start; idx < params.end; idx++) {\n      var el = createOrUpdateItem(null, null, idx, renderItem(idx, payload), customSeries, this.group, data);\n\n      if (el) {\n        el.traverse(setIncrementalAndHoverLayer);\n        progressiveEls.push(el);\n      }\n    }\n  };\n\n  CustomChartView.prototype.eachRendered = function (cb) {\n    graphicUtil.traverseElements(this._progressiveEls || this.group, cb);\n  };\n\n  CustomChartView.prototype.filterForExposedEvent = function (eventType, query, targetEl, packedEvent) {\n    var elementName = query.element;\n\n    if (elementName == null || targetEl.name === elementName) {\n      return true;\n    } // Enable to give a name on a group made by `renderItem`, and listen\n    // events that triggerd by its descendents.\n\n\n    while ((targetEl = targetEl.__hostTarget || targetEl.parent) && targetEl !== this.group) {\n      if (targetEl.name === elementName) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  CustomChartView.type = 'custom';\n  return CustomChartView;\n}(_Chart.default);\n\nvar _default = CustomChartView;\nexports.default = _default;\n\nfunction createEl(elOption) {\n  var graphicType = elOption.type;\n  var el; // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n\n  if (graphicType === 'path') {\n    var shape = elOption.shape; // Using pathRect brings convenience to users sacle svg path.\n\n    var pathRect = shape.width != null && shape.height != null ? {\n      x: shape.x || 0,\n      y: shape.y || 0,\n      width: shape.width,\n      height: shape.height\n    } : null;\n    var pathData = getPathData(shape); // Path is also used for icon, so layout 'center' by default.\n\n    el = graphicUtil.makePath(pathData, null, pathRect, shape.layout || 'center');\n    (0, _CustomSeries.customInnerStore)(el).customPathData = pathData;\n  } else if (graphicType === 'image') {\n    el = new graphicUtil.Image({});\n    (0, _CustomSeries.customInnerStore)(el).customImagePath = elOption.style.image;\n  } else if (graphicType === 'text') {\n    el = new graphicUtil.Text({}); // customInnerStore(el).customText = (elOption.style as TextStyleProps).text;\n  } else if (graphicType === 'group') {\n    el = new graphicUtil.Group();\n  } else if (graphicType === 'compoundPath') {\n    throw new Error('\"compoundPath\" is not supported yet.');\n  } else {\n    var Clz = graphicUtil.getShapeClass(graphicType);\n\n    if (!Clz) {\n      var errMsg = '';\n\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'graphic type \"' + graphicType + '\" can not be found.';\n      }\n\n      (0, _log.throwError)(errMsg);\n    }\n\n    el = new Clz();\n  }\n\n  (0, _CustomSeries.customInnerStore)(el).customGraphicType = graphicType;\n  el.name = elOption.name; // Compat ec4: the default z2 lift is 1. If changing the number,\n  // some cases probably be broken: hierarchy layout along z, like circle packing,\n  // where emphasis only intending to modify color/border rather than lift z2.\n\n  el.z2EmphasisLift = 1;\n  el.z2SelectLift = 1;\n  return el;\n}\n\nfunction updateElNormal( // Can be null/undefined\napi, el, dataIndex, elOption, attachedTxInfo, seriesModel, isInit) {\n  // Stop and restore before update any other attributes.\n  (0, _customGraphicKeyframeAnimation.stopPreviousKeyframeAnimationAndRestore)(el);\n  var txCfgOpt = attachedTxInfo && attachedTxInfo.normal.cfg;\n\n  if (txCfgOpt) {\n    // PENDING: whether use user object directly rather than clone?\n    // TODO:5.0 textConfig transition animation?\n    el.setTextConfig(txCfgOpt);\n  } // Default transition ['x', 'y']\n\n\n  if (elOption && elOption.transition == null) {\n    elOption.transition = DEFAULT_TRANSITION;\n  } // Do some normalization on style.\n\n\n  var styleOpt = elOption && elOption.style;\n\n  if (styleOpt) {\n    if (el.type === 'text') {\n      var textOptionStyle = styleOpt; // Compatible with ec4: if `textFill` or `textStroke` exists use them.\n\n      (0, _util.hasOwn)(textOptionStyle, 'textFill') && (textOptionStyle.fill = textOptionStyle.textFill);\n      (0, _util.hasOwn)(textOptionStyle, 'textStroke') && (textOptionStyle.stroke = textOptionStyle.textStroke);\n    }\n\n    var decalPattern = void 0;\n    var decalObj = isPath(el) ? styleOpt.decal : null;\n\n    if (api && decalObj) {\n      decalObj.dirty = true;\n      decalPattern = (0, _decal.createOrUpdatePatternFromDecal)(decalObj, api);\n    } // Always overwrite in case user specify this prop.\n\n\n    styleOpt.__decalPattern = decalPattern;\n  }\n\n  if (isDisplayable(el)) {\n    if (styleOpt) {\n      var decalPattern = styleOpt.__decalPattern;\n\n      if (decalPattern) {\n        styleOpt.decal = decalPattern;\n      }\n    }\n  }\n\n  (0, _customGraphicTransition.applyUpdateTransition)(el, elOption, seriesModel, {\n    dataIndex: dataIndex,\n    isInit: isInit,\n    clearStyle: true\n  });\n  (0, _customGraphicKeyframeAnimation.applyKeyframeAnimation)(el, elOption.keyframeAnimation, seriesModel);\n}\n\nfunction updateElOnState(state, el, elStateOpt, styleOpt, attachedTxInfo) {\n  var elDisplayable = el.isGroup ? null : el;\n  var txCfgOpt = attachedTxInfo && attachedTxInfo[state].cfg; // PENDING:5.0 support customize scale change and transition animation?\n\n  if (elDisplayable) {\n    // By default support auto lift color when hover whether `emphasis` specified.\n    var stateObj = elDisplayable.ensureState(state);\n\n    if (styleOpt === false) {\n      var existingEmphasisState = elDisplayable.getState(state);\n\n      if (existingEmphasisState) {\n        existingEmphasisState.style = null;\n      }\n    } else {\n      // style is needed to enable defaut emphasis.\n      stateObj.style = styleOpt || null;\n    } // If `elOption.styleEmphasis` or `elOption.emphasis.style` is `false`,\n    // remove hover style.\n    // If `elOption.textConfig` or `elOption.emphasis.textConfig` is null/undefined, it does not\n    // make sense. So for simplicity, we do not ditinguish `hasOwnProperty` and null/undefined.\n\n\n    if (txCfgOpt) {\n      stateObj.textConfig = txCfgOpt;\n    }\n\n    (0, _states.setDefaultStateProxy)(elDisplayable);\n  }\n}\n\nfunction updateZ(el, elOption, seriesModel) {\n  // Group not support textContent and not support z yet.\n  if (el.isGroup) {\n    return;\n  }\n\n  var elDisplayable = el;\n  var currentZ = seriesModel.currentZ;\n  var currentZLevel = seriesModel.currentZLevel; // Always erase.\n\n  elDisplayable.z = currentZ;\n  elDisplayable.zlevel = currentZLevel; // z2 must not be null/undefined, otherwise sort error may occur.\n\n  var optZ2 = elOption.z2;\n  optZ2 != null && (elDisplayable.z2 = optZ2 || 0);\n\n  for (var i = 0; i < STATES.length; i++) {\n    updateZForEachState(elDisplayable, elOption, STATES[i]);\n  }\n}\n\nfunction updateZForEachState(elDisplayable, elOption, state) {\n  var isNormal = state === NORMAL;\n  var elStateOpt = isNormal ? elOption : retrieveStateOption(elOption, state);\n  var optZ2 = elStateOpt ? elStateOpt.z2 : null;\n  var stateObj;\n\n  if (optZ2 != null) {\n    // Do not `ensureState` until required.\n    stateObj = isNormal ? elDisplayable : elDisplayable.ensureState(state);\n    stateObj.z2 = optZ2 || 0;\n  }\n}\n\nfunction makeRenderItem(customSeries, data, ecModel, api) {\n  var renderItem = customSeries.get('renderItem');\n  var coordSys = customSeries.coordinateSystem;\n  var prepareResult = {};\n\n  if (coordSys) {\n    if (process.env.NODE_ENV !== 'production') {\n      (0, _util.assert)(renderItem, 'series.render is required.');\n      (0, _util.assert)(coordSys.prepareCustoms || prepareCustoms[coordSys.type], 'This coordSys does not support custom series.');\n    } // `coordSys.prepareCustoms` is used for external coord sys like bmap.\n\n\n    prepareResult = coordSys.prepareCustoms ? coordSys.prepareCustoms(coordSys) : prepareCustoms[coordSys.type](coordSys);\n  }\n\n  var userAPI = (0, _util.defaults)({\n    getWidth: api.getWidth,\n    getHeight: api.getHeight,\n    getZr: api.getZr,\n    getDevicePixelRatio: api.getDevicePixelRatio,\n    value: value,\n    style: style,\n    ordinalRawValue: ordinalRawValue,\n    styleEmphasis: styleEmphasis,\n    visual: visual,\n    barLayout: barLayout,\n    currentSeriesIndices: currentSeriesIndices,\n    font: font\n  }, prepareResult.api || {});\n  var userParams = {\n    // The life cycle of context: current round of rendering.\n    // The global life cycle is probably not necessary, because\n    // user can store global status by themselves.\n    context: {},\n    seriesId: customSeries.id,\n    seriesName: customSeries.name,\n    seriesIndex: customSeries.seriesIndex,\n    coordSys: prepareResult.coordSys,\n    dataInsideLength: data.count(),\n    encode: wrapEncodeDef(customSeries.getData())\n  }; // If someday intending to refactor them to a class, should consider do not\n  // break change: currently these attribute member are encapsulated in a closure\n  // so that do not need to force user to call these method with a scope.\n  // Do not support call `api` asynchronously without dataIndexInside input.\n\n  var currDataIndexInside;\n  var currItemModel;\n  var currItemStyleModels = {};\n  var currLabelModels = {};\n  var seriesItemStyleModels = {};\n  var seriesLabelModels = {};\n\n  for (var i = 0; i < STATES.length; i++) {\n    var stateName = STATES[i];\n    seriesItemStyleModels[stateName] = customSeries.getModel(PATH_ITEM_STYLE[stateName]);\n    seriesLabelModels[stateName] = customSeries.getModel(PATH_LABEL[stateName]);\n  }\n\n  function getItemModel(dataIndexInside) {\n    return dataIndexInside === currDataIndexInside ? currItemModel || (currItemModel = data.getItemModel(dataIndexInside)) : data.getItemModel(dataIndexInside);\n  }\n\n  function getItemStyleModel(dataIndexInside, state) {\n    return !data.hasItemOption ? seriesItemStyleModels[state] : dataIndexInside === currDataIndexInside ? currItemStyleModels[state] || (currItemStyleModels[state] = getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state])) : getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state]);\n  }\n\n  function getLabelModel(dataIndexInside, state) {\n    return !data.hasItemOption ? seriesLabelModels[state] : dataIndexInside === currDataIndexInside ? currLabelModels[state] || (currLabelModels[state] = getItemModel(dataIndexInside).getModel(PATH_LABEL[state])) : getItemModel(dataIndexInside).getModel(PATH_LABEL[state]);\n  }\n\n  return function (dataIndexInside, payload) {\n    currDataIndexInside = dataIndexInside;\n    currItemModel = null;\n    currItemStyleModels = {};\n    currLabelModels = {};\n    return renderItem && renderItem((0, _util.defaults)({\n      dataIndexInside: dataIndexInside,\n      dataIndex: data.getRawIndex(dataIndexInside),\n      // Can be used for optimization when zoom or roam.\n      actionType: payload ? payload.type : null\n    }, userParams), userAPI);\n  };\n  /**\n   * @public\n   * @param dim by default 0.\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n  function value(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.getStore().get(data.getDimensionIndex(dim || 0), dataIndexInside);\n  }\n  /**\n   * @public\n   * @param dim by default 0.\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n\n  function ordinalRawValue(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    dim = dim || 0;\n    var dimInfo = data.getDimensionInfo(dim);\n\n    if (!dimInfo) {\n      var dimIndex = data.getDimensionIndex(dim);\n      return dimIndex >= 0 ? data.getStore().get(dimIndex, dataIndexInside) : undefined;\n    }\n\n    var val = data.get(dimInfo.name, dataIndexInside);\n    var ordinalMeta = dimInfo && dimInfo.ordinalMeta;\n    return ordinalMeta ? ordinalMeta.categories[val] : val;\n  }\n  /**\n   * @deprecated The orgininal intention of `api.style` is enable to set itemStyle\n   * like other series. But it not necessary and not easy to give a strict definition\n   * of what it return. And since echarts5 it needs to be make compat work. So\n   * deprecates it since echarts5.\n   *\n   * By default, `visual` is applied to style (to support visualMap).\n   * `visual.color` is applied at `fill`. If user want apply visual.color on `stroke`,\n   * it can be implemented as:\n   * `api.style({stroke: api.visual('color'), fill: null})`;\n   *\n   * [Compat]: since ec5, RectText has been separated from its hosts el.\n   * so `api.style()` will only return the style from `itemStyle` but not handle `label`\n   * any more. But `series.label` config is never published in doc.\n   * We still compat it in `api.style()`. But not encourage to use it and will still not\n   * to pulish it to doc.\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n\n  function style(userProps, dataIndexInside) {\n    if (process.env.NODE_ENV !== 'production') {\n      (0, _styleCompat.warnDeprecated)('api.style', 'Please write literal style directly instead.');\n    }\n\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    var style = data.getItemVisual(dataIndexInside, 'style');\n    var visualColor = style && style.fill;\n    var opacity = style && style.opacity;\n    var itemStyle = getItemStyleModel(dataIndexInside, NORMAL).getItemStyle();\n    visualColor != null && (itemStyle.fill = visualColor);\n    opacity != null && (itemStyle.opacity = opacity);\n    var opt = {\n      inheritColor: (0, _util.isString)(visualColor) ? visualColor : '#000'\n    };\n    var labelModel = getLabelModel(dataIndexInside, NORMAL); // Now that the feture of \"auto adjust text fill/stroke\" has been migrated to zrender\n    // since ec5, we should set `isAttached` as `false` here and make compat in\n    // `convertToEC4StyleForCustomSerise`.\n\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, opt, false, true);\n    textStyle.text = labelModel.getShallow('show') ? (0, _util.retrieve2)(customSeries.getFormattedLabel(dataIndexInside, NORMAL), (0, _labelHelper.getDefaultLabel)(data, dataIndexInside)) : null;\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, opt, false);\n    preFetchFromExtra(userProps, itemStyle);\n    itemStyle = (0, _styleCompat.convertToEC4StyleForCustomSerise)(itemStyle, textStyle, textConfig);\n    userProps && applyUserPropsAfter(itemStyle, userProps);\n    itemStyle.legacy = true;\n    return itemStyle;\n  }\n  /**\n   * @deprecated The reason see `api.style()`\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n\n  function styleEmphasis(userProps, dataIndexInside) {\n    if (process.env.NODE_ENV !== 'production') {\n      (0, _styleCompat.warnDeprecated)('api.styleEmphasis', 'Please write literal style directly instead.');\n    }\n\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    var itemStyle = getItemStyleModel(dataIndexInside, EMPHASIS).getItemStyle();\n    var labelModel = getLabelModel(dataIndexInside, EMPHASIS);\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, null, true, true);\n    textStyle.text = labelModel.getShallow('show') ? (0, _util.retrieve3)(customSeries.getFormattedLabel(dataIndexInside, EMPHASIS), customSeries.getFormattedLabel(dataIndexInside, NORMAL), (0, _labelHelper.getDefaultLabel)(data, dataIndexInside)) : null;\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, null, true);\n    preFetchFromExtra(userProps, itemStyle);\n    itemStyle = (0, _styleCompat.convertToEC4StyleForCustomSerise)(itemStyle, textStyle, textConfig);\n    userProps && applyUserPropsAfter(itemStyle, userProps);\n    itemStyle.legacy = true;\n    return itemStyle;\n  }\n\n  function applyUserPropsAfter(itemStyle, extra) {\n    for (var key in extra) {\n      if ((0, _util.hasOwn)(extra, key)) {\n        itemStyle[key] = extra[key];\n      }\n    }\n  }\n\n  function preFetchFromExtra(extra, itemStyle) {\n    // A trick to retrieve those props firstly, which are used to\n    // apply auto inside fill/stroke in `convertToEC4StyleForCustomSerise`.\n    // (It's not reasonable but only for a degree of compat)\n    if (extra) {\n      extra.textFill && (itemStyle.textFill = extra.textFill);\n      extra.textPosition && (itemStyle.textPosition = extra.textPosition);\n    }\n  }\n  /**\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n\n  function visual(visualType, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n\n    if ((0, _util.hasOwn)(_CustomSeries.STYLE_VISUAL_TYPE, visualType)) {\n      var style_1 = data.getItemVisual(dataIndexInside, 'style');\n      return style_1 ? style_1[_CustomSeries.STYLE_VISUAL_TYPE[visualType]] : null;\n    } // Only support these visuals. Other visual might be inner tricky\n    // for performance (like `style`), do not expose to users.\n\n\n    if ((0, _util.hasOwn)(_CustomSeries.NON_STYLE_VISUAL_PROPS, visualType)) {\n      return data.getItemVisual(dataIndexInside, visualType);\n    }\n  }\n  /**\n   * @public\n   * @return If not support, return undefined.\n   */\n\n\n  function barLayout(opt) {\n    if (coordSys.type === 'cartesian2d') {\n      var baseAxis = coordSys.getBaseAxis();\n      return (0, _barGrid.getLayoutOnAxis)((0, _util.defaults)({\n        axis: baseAxis\n      }, opt));\n    }\n  }\n  /**\n   * @public\n   */\n\n\n  function currentSeriesIndices() {\n    return ecModel.getCurrentSeriesIndices();\n  }\n  /**\n   * @public\n   * @return font string\n   */\n\n\n  function font(opt) {\n    return labelStyleHelper.getFont(opt, ecModel);\n  }\n}\n\nfunction wrapEncodeDef(data) {\n  var encodeDef = {};\n  (0, _util.each)(data.dimensions, function (dimName) {\n    var dimInfo = data.getDimensionInfo(dimName);\n\n    if (!dimInfo.isExtraCoord) {\n      var coordDim = dimInfo.coordDim;\n      var dataDims = encodeDef[coordDim] = encodeDef[coordDim] || [];\n      dataDims[dimInfo.coordDimIndex] = data.getDimensionIndex(dimName);\n    }\n  });\n  return encodeDef;\n}\n\nfunction createOrUpdateItem(api, existsEl, dataIndex, elOption, seriesModel, group, data) {\n  // [Rule]\n  // If `renderItem` returns `null`/`undefined`/`false`, remove the previous el if existing.\n  //     (It seems that violate the \"merge\" principle, but most of users probably intuitively\n  //     regard \"return;\" as \"show nothing element whatever\", so make a exception to meet the\n  //     most cases.)\n  // The rule or \"merge\" see [STRATEGY_MERGE].\n  // If `elOption` is `null`/`undefined`/`false` (when `renderItem` returns nothing).\n  if (!elOption) {\n    group.remove(existsEl);\n    return;\n  }\n\n  var el = doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group);\n  el && data.setItemGraphicEl(dataIndex, el);\n  el && (0, _states.toggleHoverEmphasis)(el, elOption.focus, elOption.blurScope, elOption.emphasisDisabled);\n  return el;\n}\n\nfunction doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group) {\n  if (process.env.NODE_ENV !== 'production') {\n    (0, _util.assert)(elOption, 'should not have an null/undefined element setting');\n  }\n\n  var toBeReplacedIdx = -1;\n  var oldEl = existsEl;\n\n  if (existsEl && doesElNeedRecreate(existsEl, elOption, seriesModel) // || (\n  //     // PENDING: even in one-to-one mapping case, if el is marked as morph,\n  //     // do not sure whether the el will be mapped to another el with different\n  //     // hierarchy in Group tree. So always recreate el rather than reuse the el.\n  //     morphHelper && morphHelper.isOneToOneFrom(el)\n  // )\n  ) {\n    // Should keep at the original index, otherwise \"merge by index\" will be incorrect.\n    toBeReplacedIdx = (0, _util.indexOf)(group.childrenRef(), existsEl);\n    existsEl = null;\n  }\n\n  var isInit = !existsEl;\n  var el = existsEl;\n\n  if (!el) {\n    el = createEl(elOption);\n\n    if (oldEl) {\n      copyElement(oldEl, el);\n    }\n  } else {\n    // FIMXE:NEXT unified clearState?\n    // If in some case the performance issue arised, consider\n    // do not clearState but update cached normal state directly.\n    el.clearStates();\n  } // Need to set morph: false explictly to disable automatically morphing.\n\n\n  if (elOption.morph === false) {\n    el.disableMorphing = true;\n  } else if (el.disableMorphing) {\n    el.disableMorphing = false;\n  }\n\n  attachedTxInfoTmp.normal.cfg = attachedTxInfoTmp.normal.conOpt = attachedTxInfoTmp.emphasis.cfg = attachedTxInfoTmp.emphasis.conOpt = attachedTxInfoTmp.blur.cfg = attachedTxInfoTmp.blur.conOpt = attachedTxInfoTmp.select.cfg = attachedTxInfoTmp.select.conOpt = null;\n  attachedTxInfoTmp.isLegacy = false;\n  doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfoTmp);\n  doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit);\n  updateElNormal(api, el, dataIndex, elOption, attachedTxInfoTmp, seriesModel, isInit); // `elOption.info` enables user to mount some info on\n  // elements and use them in event handlers.\n  // Update them only when user specified, otherwise, remain.\n\n  (0, _util.hasOwn)(elOption, 'info') && ((0, _CustomSeries.customInnerStore)(el).info = elOption.info);\n\n  for (var i = 0; i < STATES.length; i++) {\n    var stateName = STATES[i];\n\n    if (stateName !== NORMAL) {\n      var otherStateOpt = retrieveStateOption(elOption, stateName);\n      var otherStyleOpt = retrieveStyleOptionOnState(elOption, otherStateOpt, stateName);\n      updateElOnState(stateName, el, otherStateOpt, otherStyleOpt, attachedTxInfoTmp);\n    }\n  }\n\n  updateZ(el, elOption, seriesModel);\n\n  if (elOption.type === 'group') {\n    mergeChildren(api, el, dataIndex, elOption, seriesModel);\n  }\n\n  if (toBeReplacedIdx >= 0) {\n    group.replaceAt(el, toBeReplacedIdx);\n  } else {\n    group.add(el);\n  }\n\n  return el;\n} // `el` must not be null/undefined.\n\n\nfunction doesElNeedRecreate(el, elOption, seriesModel) {\n  var elInner = (0, _CustomSeries.customInnerStore)(el);\n  var elOptionType = elOption.type;\n  var elOptionShape = elOption.shape;\n  var elOptionStyle = elOption.style;\n  return (// Always create new if universal transition is enabled.\n    // Because we do transition after render. It needs to know what old element is. Replacement will loose it.\n    seriesModel.isUniversalTransitionEnabled() // If `elOptionType` is `null`, follow the merge principle.\n    || elOptionType != null && elOptionType !== elInner.customGraphicType || elOptionType === 'path' && hasOwnPathData(elOptionShape) && getPathData(elOptionShape) !== elInner.customPathData || elOptionType === 'image' && (0, _util.hasOwn)(elOptionStyle, 'image') && elOptionStyle.image !== elInner.customImagePath // // FIXME test and remove this restriction?\n    // || (elOptionType === 'text'\n    //     && hasOwn(elOptionStyle, 'text')\n    //     && (elOptionStyle as TextStyleProps).text !== elInner.customText\n    // )\n\n  );\n}\n\nfunction doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit) {\n  // Based on the \"merge\" principle, if no clipPath provided,\n  // do nothing. The exists clip will be totally removed only if\n  // `el.clipPath` is `false`. Otherwise it will be merged/replaced.\n  var clipPathOpt = elOption.clipPath;\n\n  if (clipPathOpt === false) {\n    if (el && el.getClipPath()) {\n      el.removeClipPath();\n    }\n  } else if (clipPathOpt) {\n    var clipPath = el.getClipPath();\n\n    if (clipPath && doesElNeedRecreate(clipPath, clipPathOpt, seriesModel)) {\n      clipPath = null;\n    }\n\n    if (!clipPath) {\n      clipPath = createEl(clipPathOpt);\n\n      if (process.env.NODE_ENV !== 'production') {\n        (0, _util.assert)(isPath(clipPath), 'Only any type of `path` can be used in `clipPath`, rather than ' + clipPath.type + '.');\n      }\n\n      el.setClipPath(clipPath);\n    }\n\n    updateElNormal(null, clipPath, dataIndex, clipPathOpt, null, seriesModel, isInit);\n  } // If not define `clipPath` in option, do nothing unnecessary.\n\n}\n\nfunction doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfo) {\n  // group do not support textContent temporarily untill necessary.\n  if (el.isGroup) {\n    return;\n  } // Normal must be called before emphasis, for `isLegacy` detection.\n\n\n  processTxInfo(elOption, null, attachedTxInfo);\n  processTxInfo(elOption, EMPHASIS, attachedTxInfo); // If `elOption.textConfig` or `elOption.textContent` is null/undefined, it does not make sence.\n  // So for simplicity, if \"elOption hasOwnProperty of them but be null/undefined\", we do not\n  // trade them as set to null to el.\n  // Especially:\n  // `elOption.textContent: false` means remove textContent.\n  // `elOption.textContent.emphasis.style: false` means remove the style from emphasis state.\n\n  var txConOptNormal = attachedTxInfo.normal.conOpt;\n  var txConOptEmphasis = attachedTxInfo.emphasis.conOpt;\n  var txConOptBlur = attachedTxInfo.blur.conOpt;\n  var txConOptSelect = attachedTxInfo.select.conOpt;\n\n  if (txConOptNormal != null || txConOptEmphasis != null || txConOptSelect != null || txConOptBlur != null) {\n    var textContent = el.getTextContent();\n\n    if (txConOptNormal === false) {\n      textContent && el.removeTextContent();\n    } else {\n      txConOptNormal = attachedTxInfo.normal.conOpt = txConOptNormal || {\n        type: 'text'\n      };\n\n      if (!textContent) {\n        textContent = createEl(txConOptNormal);\n        el.setTextContent(textContent);\n      } else {\n        // If in some case the performance issue arised, consider\n        // do not clearState but update cached normal state directly.\n        textContent.clearStates();\n      }\n\n      updateElNormal(null, textContent, dataIndex, txConOptNormal, null, seriesModel, isInit);\n      var txConStlOptNormal = txConOptNormal && txConOptNormal.style;\n\n      for (var i = 0; i < STATES.length; i++) {\n        var stateName = STATES[i];\n\n        if (stateName !== NORMAL) {\n          var txConOptOtherState = attachedTxInfo[stateName].conOpt;\n          updateElOnState(stateName, textContent, txConOptOtherState, retrieveStyleOptionOnState(txConOptNormal, txConOptOtherState, stateName), null);\n        }\n      }\n\n      txConStlOptNormal ? textContent.dirty() : textContent.markRedraw();\n    }\n  }\n}\n\nfunction processTxInfo(elOption, state, attachedTxInfo) {\n  var stateOpt = !state ? elOption : retrieveStateOption(elOption, state);\n  var styleOpt = !state ? elOption.style : retrieveStyleOptionOnState(elOption, stateOpt, EMPHASIS);\n  var elType = elOption.type;\n  var txCfg = stateOpt ? stateOpt.textConfig : null;\n  var txConOptNormal = elOption.textContent;\n  var txConOpt = !txConOptNormal ? null : !state ? txConOptNormal : retrieveStateOption(txConOptNormal, state);\n\n  if (styleOpt && ( // Because emphasis style has little info to detect legacy,\n  // if normal is legacy, emphasis is trade as legacy.\n  attachedTxInfo.isLegacy || (0, _styleCompat.isEC4CompatibleStyle)(styleOpt, elType, !!txCfg, !!txConOpt))) {\n    attachedTxInfo.isLegacy = true;\n    var convertResult = (0, _styleCompat.convertFromEC4CompatibleStyle)(styleOpt, elType, !state); // Explicitly specified `textConfig` and `textContent` has higher priority than\n    // the ones generated by legacy style. Otherwise if users use them and `api.style`\n    // at the same time, they not both work and hardly to known why.\n\n    if (!txCfg && convertResult.textConfig) {\n      txCfg = convertResult.textConfig;\n    }\n\n    if (!txConOpt && convertResult.textContent) {\n      txConOpt = convertResult.textContent;\n    }\n  }\n\n  if (!state && txConOpt) {\n    var txConOptNormal_1 = txConOpt; // `textContent: {type: 'text'}`, the \"type\" is easy to be missing. So we tolerate it.\n\n    !txConOptNormal_1.type && (txConOptNormal_1.type = 'text');\n\n    if (process.env.NODE_ENV !== 'production') {\n      // Do not tolerate incorret type for forward compat.\n      (0, _util.assert)(txConOptNormal_1.type === 'text', 'textContent.type must be \"text\"');\n    }\n  }\n\n  var info = !state ? attachedTxInfo.normal : attachedTxInfo[state];\n  info.cfg = txCfg;\n  info.conOpt = txConOpt;\n}\n\nfunction retrieveStateOption(elOption, state) {\n  return !state ? elOption : elOption ? elOption[state] : null;\n}\n\nfunction retrieveStyleOptionOnState(stateOptionNormal, stateOption, state) {\n  var style = stateOption && stateOption.style;\n\n  if (style == null && state === EMPHASIS && stateOptionNormal) {\n    style = stateOptionNormal.styleEmphasis;\n  }\n\n  return style;\n} // Usage:\n// (1) By default, `elOption.$mergeChildren` is `'byIndex'`, which indicates that\n//     the existing children will not be removed, and enables the feature that\n//     update some of the props of some of the children simply by construct\n//     the returned children of `renderItem` like:\n//     `var children = group.children = []; children[3] = {opacity: 0.5};`\n// (2) If `elOption.$mergeChildren` is `'byName'`, add/update/remove children\n//     by child.name. But that might be lower performance.\n// (3) If `elOption.$mergeChildren` is `false`, the existing children will be\n//     replaced totally.\n// (4) If `!elOption.children`, following the \"merge\" principle, nothing will happen.\n//\n// For implementation simpleness, do not provide a direct way to remove sinlge\n// child (otherwise the total indicies of the children array have to be modified).\n// User can remove a single child by set its `ignore` as `true`.\n\n\nfunction mergeChildren(api, el, dataIndex, elOption, seriesModel) {\n  var newChildren = elOption.children;\n  var newLen = newChildren ? newChildren.length : 0;\n  var mergeChildren = elOption.$mergeChildren; // `diffChildrenByName` has been deprecated.\n\n  var byName = mergeChildren === 'byName' || elOption.diffChildrenByName;\n  var notMerge = mergeChildren === false; // For better performance on roam update, only enter if necessary.\n\n  if (!newLen && !byName && !notMerge) {\n    return;\n  }\n\n  if (byName) {\n    diffGroupChildren({\n      api: api,\n      oldChildren: el.children() || [],\n      newChildren: newChildren || [],\n      dataIndex: dataIndex,\n      seriesModel: seriesModel,\n      group: el\n    });\n    return;\n  }\n\n  notMerge && el.removeAll(); // Mapping children of a group simply by index, which\n  // might be better performance.\n\n  var index = 0;\n\n  for (; index < newLen; index++) {\n    newChildren[index] && doCreateOrUpdateEl(api, el.childAt(index), dataIndex, newChildren[index], seriesModel, el);\n  }\n\n  for (var i = el.childCount() - 1; i >= index; i--) {\n    // Do not supprot leave elements that are not mentioned in the latest\n    // `renderItem` return. Otherwise users may not have a clear and simple\n    // concept that how to contorl all of the elements.\n    var child = el.childAt(i);\n    (0, _customGraphicTransition.applyLeaveTransition)(child, (0, _CustomSeries.customInnerStore)(el).option, seriesModel);\n  }\n}\n\nfunction diffGroupChildren(context) {\n  new _DataDiffer.default(context.oldChildren, context.newChildren, getKey, getKey, context).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute();\n}\n\nfunction getKey(item, idx) {\n  var name = item && item.name;\n  return name != null ? name : GROUP_DIFF_PREFIX + idx;\n}\n\nfunction processAddUpdate(newIndex, oldIndex) {\n  var context = this.context;\n  var childOption = newIndex != null ? context.newChildren[newIndex] : null;\n  var child = oldIndex != null ? context.oldChildren[oldIndex] : null;\n  doCreateOrUpdateEl(context.api, child, context.dataIndex, childOption, context.seriesModel, context.group);\n}\n\nfunction processRemove(oldIndex) {\n  var context = this.context;\n  var child = context.oldChildren[oldIndex];\n  (0, _customGraphicTransition.applyLeaveTransition)(child, (0, _CustomSeries.customInnerStore)(child).option, context.seriesModel);\n}\n/**\n * @return SVG Path data.\n */\n\n\nfunction getPathData(shape) {\n  // \"d\" follows the SVG convention.\n  return shape && (shape.pathData || shape.d);\n}\n\nfunction hasOwnPathData(shape) {\n  return shape && ((0, _util.hasOwn)(shape, 'pathData') || (0, _util.hasOwn)(shape, 'd'));\n}","map":{"version":3,"names":["EMPHASIS","NORMAL","BLUR","SELECT","STATES","PATH_ITEM_STYLE","normal","emphasis","blur","select","PATH_LABEL","DEFAULT_TRANSITION","GROUP_DIFF_PREFIX","attachedTxInfoTmp","prepareCustoms","cartesian2d","prepareCartesian2d","geo","prepareGeo","single","prepareSingleAxis","polar","preparePolar","calendar","prepareCalendar","isPath","el","graphicUtil","Path","isDisplayable","Displayable","copyElement","sourceEl","targetEl","copyTransform","setStyle","style","z","z2","zlevel","invisible","ignore","setShape","shape","CustomChartView","_super","__extends","_this","apply","arguments","type","prototype","render","customSeries","ecModel","api","payload","_progressiveEls","oldData","_data","data","getData","group","renderItem","makeRenderItem","removeAll","diff","add","newIdx","createOrUpdateItem","remove","oldIdx","getItemGraphicEl","applyLeaveTransition","customInnerStore","option","update","oldEl","execute","clipPath","get","createClipPath","coordinateSystem","setClipPath","removeClipPath","incrementalPrepareRender","incrementalRender","params","progressiveEls","setIncrementalAndHoverLayer","isGroup","incremental","ensureState","hoverLayer","idx","start","end","traverse","push","eachRendered","cb","traverseElements","filterForExposedEvent","eventType","query","packedEvent","elementName","element","name","__hostTarget","parent","ChartView","createEl","elOption","graphicType","pathRect","width","height","x","y","pathData","getPathData","makePath","layout","customPathData","Image","customImagePath","image","Text","Group","Error","Clz","getShapeClass","errMsg","process","env","NODE_ENV","throwError","customGraphicType","z2EmphasisLift","z2SelectLift","updateElNormal","dataIndex","attachedTxInfo","seriesModel","isInit","stopPreviousKeyframeAnimationAndRestore","txCfgOpt","cfg","setTextConfig","transition","styleOpt","textOptionStyle","hasOwn","fill","textFill","stroke","textStroke","decalPattern","decalObj","decal","dirty","createOrUpdatePatternFromDecal","__decalPattern","applyUpdateTransition","clearStyle","applyKeyframeAnimation","keyframeAnimation","updateElOnState","state","elStateOpt","elDisplayable","stateObj","existingEmphasisState","getState","textConfig","setDefaultStateProxy","updateZ","currentZ","currentZLevel","optZ2","i","length","updateZForEachState","isNormal","retrieveStateOption","coordSys","prepareResult","assert","userAPI","defaults","getWidth","getHeight","getZr","getDevicePixelRatio","value","ordinalRawValue","styleEmphasis","visual","barLayout","currentSeriesIndices","font","userParams","context","seriesId","id","seriesName","seriesIndex","dataInsideLength","count","encode","wrapEncodeDef","currDataIndexInside","currItemModel","currItemStyleModels","currLabelModels","seriesItemStyleModels","seriesLabelModels","stateName","getModel","getItemModel","dataIndexInside","getItemStyleModel","hasItemOption","getLabelModel","getRawIndex","actionType","dim","getStore","getDimensionIndex","dimInfo","getDimensionInfo","dimIndex","undefined","val","ordinalMeta","categories","userProps","warnDeprecated","getItemVisual","visualColor","opacity","itemStyle","getItemStyle","opt","inheritColor","isString","labelModel","textStyle","labelStyleHelper","createTextStyle","text","getShallow","retrieve2","getFormattedLabel","getDefaultLabel","createTextConfig","preFetchFromExtra","convertToEC4StyleForCustomSerise","applyUserPropsAfter","legacy","retrieve3","extra","key","textPosition","visualType","STYLE_VISUAL_TYPE","style_1","NON_STYLE_VISUAL_PROPS","baseAxis","getBaseAxis","getLayoutOnAxis","axis","getCurrentSeriesIndices","getFont","encodeDef","each","dimensions","dimName","isExtraCoord","coordDim","dataDims","coordDimIndex","existsEl","doCreateOrUpdateEl","setItemGraphicEl","toggleHoverEmphasis","focus","blurScope","emphasisDisabled","toBeReplacedIdx","doesElNeedRecreate","indexOf","childrenRef","clearStates","morph","disableMorphing","conOpt","isLegacy","doCreateOrUpdateAttachedTx","doCreateOrUpdateClipPath","info","otherStateOpt","otherStyleOpt","retrieveStyleOptionOnState","mergeChildren","replaceAt","elInner","elOptionType","elOptionShape","elOptionStyle","isUniversalTransitionEnabled","hasOwnPathData","clipPathOpt","getClipPath","processTxInfo","txConOptNormal","txConOptEmphasis","txConOptBlur","txConOptSelect","textContent","getTextContent","removeTextContent","setTextContent","txConStlOptNormal","txConOptOtherState","markRedraw","stateOpt","elType","txCfg","txConOpt","isEC4CompatibleStyle","convertResult","convertFromEC4CompatibleStyle","txConOptNormal_1","stateOptionNormal","stateOption","newChildren","children","newLen","$mergeChildren","byName","diffChildrenByName","notMerge","diffGroupChildren","oldChildren","index","childAt","childCount","child","DataDiffer","getKey","processAddUpdate","processRemove","item","newIndex","oldIndex","childOption","d"],"sources":["C:/Users/Z/Desktop/efficient/node_modules/echarts/lib/chart/custom/CustomView.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { hasOwn, assert, isString, retrieve2, retrieve3, defaults, each, indexOf } from 'zrender/lib/core/util.js';\nimport * as graphicUtil from '../../util/graphic.js';\nimport { setDefaultStateProxy, toggleHoverEmphasis } from '../../util/states.js';\nimport * as labelStyleHelper from '../../label/labelStyle.js';\nimport { getDefaultLabel } from '../helper/labelHelper.js';\nimport { getLayoutOnAxis } from '../../layout/barGrid.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport ChartView from '../../view/Chart.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport prepareCartesian2d from '../../coord/cartesian/prepareCustom.js';\nimport prepareGeo from '../../coord/geo/prepareCustom.js';\nimport prepareSingleAxis from '../../coord/single/prepareCustom.js';\nimport preparePolar from '../../coord/polar/prepareCustom.js';\nimport prepareCalendar from '../../coord/calendar/prepareCustom.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport { convertToEC4StyleForCustomSerise, isEC4CompatibleStyle, convertFromEC4CompatibleStyle, warnDeprecated } from '../../util/styleCompat.js';\nimport { throwError } from '../../util/log.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport { STYLE_VISUAL_TYPE, NON_STYLE_VISUAL_PROPS, customInnerStore } from './CustomSeries.js';\nimport { applyLeaveTransition, applyUpdateTransition } from '../../animation/customGraphicTransition.js';\nimport { applyKeyframeAnimation, stopPreviousKeyframeAnimationAndRestore } from '../../animation/customGraphicKeyframeAnimation.js';\nvar EMPHASIS = 'emphasis';\nvar NORMAL = 'normal';\nvar BLUR = 'blur';\nvar SELECT = 'select';\nvar STATES = [NORMAL, EMPHASIS, BLUR, SELECT];\nvar PATH_ITEM_STYLE = {\n  normal: ['itemStyle'],\n  emphasis: [EMPHASIS, 'itemStyle'],\n  blur: [BLUR, 'itemStyle'],\n  select: [SELECT, 'itemStyle']\n};\nvar PATH_LABEL = {\n  normal: ['label'],\n  emphasis: [EMPHASIS, 'label'],\n  blur: [BLUR, 'label'],\n  select: [SELECT, 'label']\n};\nvar DEFAULT_TRANSITION = ['x', 'y']; // Use prefix to avoid index to be the same as el.name,\n// which will cause weird update animation.\n\nvar GROUP_DIFF_PREFIX = 'e\\0\\0';\nvar attachedTxInfoTmp = {\n  normal: {},\n  emphasis: {},\n  blur: {},\n  select: {}\n};\n/**\n * To reduce total package size of each coordinate systems, the modules `prepareCustom`\n * of each coordinate systems are not required by each coordinate systems directly, but\n * required by the module `custom`.\n *\n * prepareInfoForCustomSeries {Function}: optional\n *     @return {Object} {coordSys: {...}, api: {\n *         coord: function (data, clamp) {}, // return point in global.\n *         size: function (dataSize, dataItem) {} // return size of each axis in coordSys.\n *     }}\n */\n\nvar prepareCustoms = {\n  cartesian2d: prepareCartesian2d,\n  geo: prepareGeo,\n  single: prepareSingleAxis,\n  polar: preparePolar,\n  calendar: prepareCalendar\n};\n\nfunction isPath(el) {\n  return el instanceof graphicUtil.Path;\n}\n\nfunction isDisplayable(el) {\n  return el instanceof Displayable;\n}\n\nfunction copyElement(sourceEl, targetEl) {\n  targetEl.copyTransform(sourceEl);\n\n  if (isDisplayable(targetEl) && isDisplayable(sourceEl)) {\n    targetEl.setStyle(sourceEl.style);\n    targetEl.z = sourceEl.z;\n    targetEl.z2 = sourceEl.z2;\n    targetEl.zlevel = sourceEl.zlevel;\n    targetEl.invisible = sourceEl.invisible;\n    targetEl.ignore = sourceEl.ignore;\n\n    if (isPath(targetEl) && isPath(sourceEl)) {\n      targetEl.setShape(sourceEl.shape);\n    }\n  }\n}\n\nvar CustomChartView =\n/** @class */\nfunction (_super) {\n  __extends(CustomChartView, _super);\n\n  function CustomChartView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CustomChartView.type;\n    return _this;\n  }\n\n  CustomChartView.prototype.render = function (customSeries, ecModel, api, payload) {\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    var oldData = this._data;\n    var data = customSeries.getData();\n    var group = this.group;\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n\n    if (!oldData) {\n      // Previous render is incremental render or first render.\n      // Needs remove the incremental rendered elements.\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      createOrUpdateItem(api, null, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      applyLeaveTransition(el, customInnerStore(el).option, customSeries);\n    }).update(function (newIdx, oldIdx) {\n      var oldEl = oldData.getItemGraphicEl(oldIdx);\n      createOrUpdateItem(api, oldEl, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).execute(); // Do clipping\n\n    var clipPath = customSeries.get('clip', true) ? createClipPath(customSeries.coordinateSystem, false, customSeries) : null;\n\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n\n    this._data = data;\n  };\n\n  CustomChartView.prototype.incrementalPrepareRender = function (customSeries, ecModel, api) {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  CustomChartView.prototype.incrementalRender = function (params, customSeries, ecModel, api, payload) {\n    var data = customSeries.getData();\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n    var progressiveEls = this._progressiveEls = [];\n\n    function setIncrementalAndHoverLayer(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = params.start; idx < params.end; idx++) {\n      var el = createOrUpdateItem(null, null, idx, renderItem(idx, payload), customSeries, this.group, data);\n\n      if (el) {\n        el.traverse(setIncrementalAndHoverLayer);\n        progressiveEls.push(el);\n      }\n    }\n  };\n\n  CustomChartView.prototype.eachRendered = function (cb) {\n    graphicUtil.traverseElements(this._progressiveEls || this.group, cb);\n  };\n\n  CustomChartView.prototype.filterForExposedEvent = function (eventType, query, targetEl, packedEvent) {\n    var elementName = query.element;\n\n    if (elementName == null || targetEl.name === elementName) {\n      return true;\n    } // Enable to give a name on a group made by `renderItem`, and listen\n    // events that triggerd by its descendents.\n\n\n    while ((targetEl = targetEl.__hostTarget || targetEl.parent) && targetEl !== this.group) {\n      if (targetEl.name === elementName) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  CustomChartView.type = 'custom';\n  return CustomChartView;\n}(ChartView);\n\nexport default CustomChartView;\n\nfunction createEl(elOption) {\n  var graphicType = elOption.type;\n  var el; // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n\n  if (graphicType === 'path') {\n    var shape = elOption.shape; // Using pathRect brings convenience to users sacle svg path.\n\n    var pathRect = shape.width != null && shape.height != null ? {\n      x: shape.x || 0,\n      y: shape.y || 0,\n      width: shape.width,\n      height: shape.height\n    } : null;\n    var pathData = getPathData(shape); // Path is also used for icon, so layout 'center' by default.\n\n    el = graphicUtil.makePath(pathData, null, pathRect, shape.layout || 'center');\n    customInnerStore(el).customPathData = pathData;\n  } else if (graphicType === 'image') {\n    el = new graphicUtil.Image({});\n    customInnerStore(el).customImagePath = elOption.style.image;\n  } else if (graphicType === 'text') {\n    el = new graphicUtil.Text({}); // customInnerStore(el).customText = (elOption.style as TextStyleProps).text;\n  } else if (graphicType === 'group') {\n    el = new graphicUtil.Group();\n  } else if (graphicType === 'compoundPath') {\n    throw new Error('\"compoundPath\" is not supported yet.');\n  } else {\n    var Clz = graphicUtil.getShapeClass(graphicType);\n\n    if (!Clz) {\n      var errMsg = '';\n\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'graphic type \"' + graphicType + '\" can not be found.';\n      }\n\n      throwError(errMsg);\n    }\n\n    el = new Clz();\n  }\n\n  customInnerStore(el).customGraphicType = graphicType;\n  el.name = elOption.name; // Compat ec4: the default z2 lift is 1. If changing the number,\n  // some cases probably be broken: hierarchy layout along z, like circle packing,\n  // where emphasis only intending to modify color/border rather than lift z2.\n\n  el.z2EmphasisLift = 1;\n  el.z2SelectLift = 1;\n  return el;\n}\n\nfunction updateElNormal( // Can be null/undefined\napi, el, dataIndex, elOption, attachedTxInfo, seriesModel, isInit) {\n  // Stop and restore before update any other attributes.\n  stopPreviousKeyframeAnimationAndRestore(el);\n  var txCfgOpt = attachedTxInfo && attachedTxInfo.normal.cfg;\n\n  if (txCfgOpt) {\n    // PENDING: whether use user object directly rather than clone?\n    // TODO:5.0 textConfig transition animation?\n    el.setTextConfig(txCfgOpt);\n  } // Default transition ['x', 'y']\n\n\n  if (elOption && elOption.transition == null) {\n    elOption.transition = DEFAULT_TRANSITION;\n  } // Do some normalization on style.\n\n\n  var styleOpt = elOption && elOption.style;\n\n  if (styleOpt) {\n    if (el.type === 'text') {\n      var textOptionStyle = styleOpt; // Compatible with ec4: if `textFill` or `textStroke` exists use them.\n\n      hasOwn(textOptionStyle, 'textFill') && (textOptionStyle.fill = textOptionStyle.textFill);\n      hasOwn(textOptionStyle, 'textStroke') && (textOptionStyle.stroke = textOptionStyle.textStroke);\n    }\n\n    var decalPattern = void 0;\n    var decalObj = isPath(el) ? styleOpt.decal : null;\n\n    if (api && decalObj) {\n      decalObj.dirty = true;\n      decalPattern = createOrUpdatePatternFromDecal(decalObj, api);\n    } // Always overwrite in case user specify this prop.\n\n\n    styleOpt.__decalPattern = decalPattern;\n  }\n\n  if (isDisplayable(el)) {\n    if (styleOpt) {\n      var decalPattern = styleOpt.__decalPattern;\n\n      if (decalPattern) {\n        styleOpt.decal = decalPattern;\n      }\n    }\n  }\n\n  applyUpdateTransition(el, elOption, seriesModel, {\n    dataIndex: dataIndex,\n    isInit: isInit,\n    clearStyle: true\n  });\n  applyKeyframeAnimation(el, elOption.keyframeAnimation, seriesModel);\n}\n\nfunction updateElOnState(state, el, elStateOpt, styleOpt, attachedTxInfo) {\n  var elDisplayable = el.isGroup ? null : el;\n  var txCfgOpt = attachedTxInfo && attachedTxInfo[state].cfg; // PENDING:5.0 support customize scale change and transition animation?\n\n  if (elDisplayable) {\n    // By default support auto lift color when hover whether `emphasis` specified.\n    var stateObj = elDisplayable.ensureState(state);\n\n    if (styleOpt === false) {\n      var existingEmphasisState = elDisplayable.getState(state);\n\n      if (existingEmphasisState) {\n        existingEmphasisState.style = null;\n      }\n    } else {\n      // style is needed to enable defaut emphasis.\n      stateObj.style = styleOpt || null;\n    } // If `elOption.styleEmphasis` or `elOption.emphasis.style` is `false`,\n    // remove hover style.\n    // If `elOption.textConfig` or `elOption.emphasis.textConfig` is null/undefined, it does not\n    // make sense. So for simplicity, we do not ditinguish `hasOwnProperty` and null/undefined.\n\n\n    if (txCfgOpt) {\n      stateObj.textConfig = txCfgOpt;\n    }\n\n    setDefaultStateProxy(elDisplayable);\n  }\n}\n\nfunction updateZ(el, elOption, seriesModel) {\n  // Group not support textContent and not support z yet.\n  if (el.isGroup) {\n    return;\n  }\n\n  var elDisplayable = el;\n  var currentZ = seriesModel.currentZ;\n  var currentZLevel = seriesModel.currentZLevel; // Always erase.\n\n  elDisplayable.z = currentZ;\n  elDisplayable.zlevel = currentZLevel; // z2 must not be null/undefined, otherwise sort error may occur.\n\n  var optZ2 = elOption.z2;\n  optZ2 != null && (elDisplayable.z2 = optZ2 || 0);\n\n  for (var i = 0; i < STATES.length; i++) {\n    updateZForEachState(elDisplayable, elOption, STATES[i]);\n  }\n}\n\nfunction updateZForEachState(elDisplayable, elOption, state) {\n  var isNormal = state === NORMAL;\n  var elStateOpt = isNormal ? elOption : retrieveStateOption(elOption, state);\n  var optZ2 = elStateOpt ? elStateOpt.z2 : null;\n  var stateObj;\n\n  if (optZ2 != null) {\n    // Do not `ensureState` until required.\n    stateObj = isNormal ? elDisplayable : elDisplayable.ensureState(state);\n    stateObj.z2 = optZ2 || 0;\n  }\n}\n\nfunction makeRenderItem(customSeries, data, ecModel, api) {\n  var renderItem = customSeries.get('renderItem');\n  var coordSys = customSeries.coordinateSystem;\n  var prepareResult = {};\n\n  if (coordSys) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(renderItem, 'series.render is required.');\n      assert(coordSys.prepareCustoms || prepareCustoms[coordSys.type], 'This coordSys does not support custom series.');\n    } // `coordSys.prepareCustoms` is used for external coord sys like bmap.\n\n\n    prepareResult = coordSys.prepareCustoms ? coordSys.prepareCustoms(coordSys) : prepareCustoms[coordSys.type](coordSys);\n  }\n\n  var userAPI = defaults({\n    getWidth: api.getWidth,\n    getHeight: api.getHeight,\n    getZr: api.getZr,\n    getDevicePixelRatio: api.getDevicePixelRatio,\n    value: value,\n    style: style,\n    ordinalRawValue: ordinalRawValue,\n    styleEmphasis: styleEmphasis,\n    visual: visual,\n    barLayout: barLayout,\n    currentSeriesIndices: currentSeriesIndices,\n    font: font\n  }, prepareResult.api || {});\n  var userParams = {\n    // The life cycle of context: current round of rendering.\n    // The global life cycle is probably not necessary, because\n    // user can store global status by themselves.\n    context: {},\n    seriesId: customSeries.id,\n    seriesName: customSeries.name,\n    seriesIndex: customSeries.seriesIndex,\n    coordSys: prepareResult.coordSys,\n    dataInsideLength: data.count(),\n    encode: wrapEncodeDef(customSeries.getData())\n  }; // If someday intending to refactor them to a class, should consider do not\n  // break change: currently these attribute member are encapsulated in a closure\n  // so that do not need to force user to call these method with a scope.\n  // Do not support call `api` asynchronously without dataIndexInside input.\n\n  var currDataIndexInside;\n  var currItemModel;\n  var currItemStyleModels = {};\n  var currLabelModels = {};\n  var seriesItemStyleModels = {};\n  var seriesLabelModels = {};\n\n  for (var i = 0; i < STATES.length; i++) {\n    var stateName = STATES[i];\n    seriesItemStyleModels[stateName] = customSeries.getModel(PATH_ITEM_STYLE[stateName]);\n    seriesLabelModels[stateName] = customSeries.getModel(PATH_LABEL[stateName]);\n  }\n\n  function getItemModel(dataIndexInside) {\n    return dataIndexInside === currDataIndexInside ? currItemModel || (currItemModel = data.getItemModel(dataIndexInside)) : data.getItemModel(dataIndexInside);\n  }\n\n  function getItemStyleModel(dataIndexInside, state) {\n    return !data.hasItemOption ? seriesItemStyleModels[state] : dataIndexInside === currDataIndexInside ? currItemStyleModels[state] || (currItemStyleModels[state] = getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state])) : getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state]);\n  }\n\n  function getLabelModel(dataIndexInside, state) {\n    return !data.hasItemOption ? seriesLabelModels[state] : dataIndexInside === currDataIndexInside ? currLabelModels[state] || (currLabelModels[state] = getItemModel(dataIndexInside).getModel(PATH_LABEL[state])) : getItemModel(dataIndexInside).getModel(PATH_LABEL[state]);\n  }\n\n  return function (dataIndexInside, payload) {\n    currDataIndexInside = dataIndexInside;\n    currItemModel = null;\n    currItemStyleModels = {};\n    currLabelModels = {};\n    return renderItem && renderItem(defaults({\n      dataIndexInside: dataIndexInside,\n      dataIndex: data.getRawIndex(dataIndexInside),\n      // Can be used for optimization when zoom or roam.\n      actionType: payload ? payload.type : null\n    }, userParams), userAPI);\n  };\n  /**\n   * @public\n   * @param dim by default 0.\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n  function value(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.getStore().get(data.getDimensionIndex(dim || 0), dataIndexInside);\n  }\n  /**\n   * @public\n   * @param dim by default 0.\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n\n  function ordinalRawValue(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    dim = dim || 0;\n    var dimInfo = data.getDimensionInfo(dim);\n\n    if (!dimInfo) {\n      var dimIndex = data.getDimensionIndex(dim);\n      return dimIndex >= 0 ? data.getStore().get(dimIndex, dataIndexInside) : undefined;\n    }\n\n    var val = data.get(dimInfo.name, dataIndexInside);\n    var ordinalMeta = dimInfo && dimInfo.ordinalMeta;\n    return ordinalMeta ? ordinalMeta.categories[val] : val;\n  }\n  /**\n   * @deprecated The orgininal intention of `api.style` is enable to set itemStyle\n   * like other series. But it not necessary and not easy to give a strict definition\n   * of what it return. And since echarts5 it needs to be make compat work. So\n   * deprecates it since echarts5.\n   *\n   * By default, `visual` is applied to style (to support visualMap).\n   * `visual.color` is applied at `fill`. If user want apply visual.color on `stroke`,\n   * it can be implemented as:\n   * `api.style({stroke: api.visual('color'), fill: null})`;\n   *\n   * [Compat]: since ec5, RectText has been separated from its hosts el.\n   * so `api.style()` will only return the style from `itemStyle` but not handle `label`\n   * any more. But `series.label` config is never published in doc.\n   * We still compat it in `api.style()`. But not encourage to use it and will still not\n   * to pulish it to doc.\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n\n  function style(userProps, dataIndexInside) {\n    if (process.env.NODE_ENV !== 'production') {\n      warnDeprecated('api.style', 'Please write literal style directly instead.');\n    }\n\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    var style = data.getItemVisual(dataIndexInside, 'style');\n    var visualColor = style && style.fill;\n    var opacity = style && style.opacity;\n    var itemStyle = getItemStyleModel(dataIndexInside, NORMAL).getItemStyle();\n    visualColor != null && (itemStyle.fill = visualColor);\n    opacity != null && (itemStyle.opacity = opacity);\n    var opt = {\n      inheritColor: isString(visualColor) ? visualColor : '#000'\n    };\n    var labelModel = getLabelModel(dataIndexInside, NORMAL); // Now that the feture of \"auto adjust text fill/stroke\" has been migrated to zrender\n    // since ec5, we should set `isAttached` as `false` here and make compat in\n    // `convertToEC4StyleForCustomSerise`.\n\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, opt, false, true);\n    textStyle.text = labelModel.getShallow('show') ? retrieve2(customSeries.getFormattedLabel(dataIndexInside, NORMAL), getDefaultLabel(data, dataIndexInside)) : null;\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, opt, false);\n    preFetchFromExtra(userProps, itemStyle);\n    itemStyle = convertToEC4StyleForCustomSerise(itemStyle, textStyle, textConfig);\n    userProps && applyUserPropsAfter(itemStyle, userProps);\n    itemStyle.legacy = true;\n    return itemStyle;\n  }\n  /**\n   * @deprecated The reason see `api.style()`\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n\n  function styleEmphasis(userProps, dataIndexInside) {\n    if (process.env.NODE_ENV !== 'production') {\n      warnDeprecated('api.styleEmphasis', 'Please write literal style directly instead.');\n    }\n\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    var itemStyle = getItemStyleModel(dataIndexInside, EMPHASIS).getItemStyle();\n    var labelModel = getLabelModel(dataIndexInside, EMPHASIS);\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, null, true, true);\n    textStyle.text = labelModel.getShallow('show') ? retrieve3(customSeries.getFormattedLabel(dataIndexInside, EMPHASIS), customSeries.getFormattedLabel(dataIndexInside, NORMAL), getDefaultLabel(data, dataIndexInside)) : null;\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, null, true);\n    preFetchFromExtra(userProps, itemStyle);\n    itemStyle = convertToEC4StyleForCustomSerise(itemStyle, textStyle, textConfig);\n    userProps && applyUserPropsAfter(itemStyle, userProps);\n    itemStyle.legacy = true;\n    return itemStyle;\n  }\n\n  function applyUserPropsAfter(itemStyle, extra) {\n    for (var key in extra) {\n      if (hasOwn(extra, key)) {\n        itemStyle[key] = extra[key];\n      }\n    }\n  }\n\n  function preFetchFromExtra(extra, itemStyle) {\n    // A trick to retrieve those props firstly, which are used to\n    // apply auto inside fill/stroke in `convertToEC4StyleForCustomSerise`.\n    // (It's not reasonable but only for a degree of compat)\n    if (extra) {\n      extra.textFill && (itemStyle.textFill = extra.textFill);\n      extra.textPosition && (itemStyle.textPosition = extra.textPosition);\n    }\n  }\n  /**\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n\n  function visual(visualType, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n\n    if (hasOwn(STYLE_VISUAL_TYPE, visualType)) {\n      var style_1 = data.getItemVisual(dataIndexInside, 'style');\n      return style_1 ? style_1[STYLE_VISUAL_TYPE[visualType]] : null;\n    } // Only support these visuals. Other visual might be inner tricky\n    // for performance (like `style`), do not expose to users.\n\n\n    if (hasOwn(NON_STYLE_VISUAL_PROPS, visualType)) {\n      return data.getItemVisual(dataIndexInside, visualType);\n    }\n  }\n  /**\n   * @public\n   * @return If not support, return undefined.\n   */\n\n\n  function barLayout(opt) {\n    if (coordSys.type === 'cartesian2d') {\n      var baseAxis = coordSys.getBaseAxis();\n      return getLayoutOnAxis(defaults({\n        axis: baseAxis\n      }, opt));\n    }\n  }\n  /**\n   * @public\n   */\n\n\n  function currentSeriesIndices() {\n    return ecModel.getCurrentSeriesIndices();\n  }\n  /**\n   * @public\n   * @return font string\n   */\n\n\n  function font(opt) {\n    return labelStyleHelper.getFont(opt, ecModel);\n  }\n}\n\nfunction wrapEncodeDef(data) {\n  var encodeDef = {};\n  each(data.dimensions, function (dimName) {\n    var dimInfo = data.getDimensionInfo(dimName);\n\n    if (!dimInfo.isExtraCoord) {\n      var coordDim = dimInfo.coordDim;\n      var dataDims = encodeDef[coordDim] = encodeDef[coordDim] || [];\n      dataDims[dimInfo.coordDimIndex] = data.getDimensionIndex(dimName);\n    }\n  });\n  return encodeDef;\n}\n\nfunction createOrUpdateItem(api, existsEl, dataIndex, elOption, seriesModel, group, data) {\n  // [Rule]\n  // If `renderItem` returns `null`/`undefined`/`false`, remove the previous el if existing.\n  //     (It seems that violate the \"merge\" principle, but most of users probably intuitively\n  //     regard \"return;\" as \"show nothing element whatever\", so make a exception to meet the\n  //     most cases.)\n  // The rule or \"merge\" see [STRATEGY_MERGE].\n  // If `elOption` is `null`/`undefined`/`false` (when `renderItem` returns nothing).\n  if (!elOption) {\n    group.remove(existsEl);\n    return;\n  }\n\n  var el = doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group);\n  el && data.setItemGraphicEl(dataIndex, el);\n  el && toggleHoverEmphasis(el, elOption.focus, elOption.blurScope, elOption.emphasisDisabled);\n  return el;\n}\n\nfunction doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(elOption, 'should not have an null/undefined element setting');\n  }\n\n  var toBeReplacedIdx = -1;\n  var oldEl = existsEl;\n\n  if (existsEl && doesElNeedRecreate(existsEl, elOption, seriesModel) // || (\n  //     // PENDING: even in one-to-one mapping case, if el is marked as morph,\n  //     // do not sure whether the el will be mapped to another el with different\n  //     // hierarchy in Group tree. So always recreate el rather than reuse the el.\n  //     morphHelper && morphHelper.isOneToOneFrom(el)\n  // )\n  ) {\n    // Should keep at the original index, otherwise \"merge by index\" will be incorrect.\n    toBeReplacedIdx = indexOf(group.childrenRef(), existsEl);\n    existsEl = null;\n  }\n\n  var isInit = !existsEl;\n  var el = existsEl;\n\n  if (!el) {\n    el = createEl(elOption);\n\n    if (oldEl) {\n      copyElement(oldEl, el);\n    }\n  } else {\n    // FIMXE:NEXT unified clearState?\n    // If in some case the performance issue arised, consider\n    // do not clearState but update cached normal state directly.\n    el.clearStates();\n  } // Need to set morph: false explictly to disable automatically morphing.\n\n\n  if (elOption.morph === false) {\n    el.disableMorphing = true;\n  } else if (el.disableMorphing) {\n    el.disableMorphing = false;\n  }\n\n  attachedTxInfoTmp.normal.cfg = attachedTxInfoTmp.normal.conOpt = attachedTxInfoTmp.emphasis.cfg = attachedTxInfoTmp.emphasis.conOpt = attachedTxInfoTmp.blur.cfg = attachedTxInfoTmp.blur.conOpt = attachedTxInfoTmp.select.cfg = attachedTxInfoTmp.select.conOpt = null;\n  attachedTxInfoTmp.isLegacy = false;\n  doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfoTmp);\n  doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit);\n  updateElNormal(api, el, dataIndex, elOption, attachedTxInfoTmp, seriesModel, isInit); // `elOption.info` enables user to mount some info on\n  // elements and use them in event handlers.\n  // Update them only when user specified, otherwise, remain.\n\n  hasOwn(elOption, 'info') && (customInnerStore(el).info = elOption.info);\n\n  for (var i = 0; i < STATES.length; i++) {\n    var stateName = STATES[i];\n\n    if (stateName !== NORMAL) {\n      var otherStateOpt = retrieveStateOption(elOption, stateName);\n      var otherStyleOpt = retrieveStyleOptionOnState(elOption, otherStateOpt, stateName);\n      updateElOnState(stateName, el, otherStateOpt, otherStyleOpt, attachedTxInfoTmp);\n    }\n  }\n\n  updateZ(el, elOption, seriesModel);\n\n  if (elOption.type === 'group') {\n    mergeChildren(api, el, dataIndex, elOption, seriesModel);\n  }\n\n  if (toBeReplacedIdx >= 0) {\n    group.replaceAt(el, toBeReplacedIdx);\n  } else {\n    group.add(el);\n  }\n\n  return el;\n} // `el` must not be null/undefined.\n\n\nfunction doesElNeedRecreate(el, elOption, seriesModel) {\n  var elInner = customInnerStore(el);\n  var elOptionType = elOption.type;\n  var elOptionShape = elOption.shape;\n  var elOptionStyle = elOption.style;\n  return (// Always create new if universal transition is enabled.\n    // Because we do transition after render. It needs to know what old element is. Replacement will loose it.\n    seriesModel.isUniversalTransitionEnabled() // If `elOptionType` is `null`, follow the merge principle.\n    || elOptionType != null && elOptionType !== elInner.customGraphicType || elOptionType === 'path' && hasOwnPathData(elOptionShape) && getPathData(elOptionShape) !== elInner.customPathData || elOptionType === 'image' && hasOwn(elOptionStyle, 'image') && elOptionStyle.image !== elInner.customImagePath // // FIXME test and remove this restriction?\n    // || (elOptionType === 'text'\n    //     && hasOwn(elOptionStyle, 'text')\n    //     && (elOptionStyle as TextStyleProps).text !== elInner.customText\n    // )\n\n  );\n}\n\nfunction doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit) {\n  // Based on the \"merge\" principle, if no clipPath provided,\n  // do nothing. The exists clip will be totally removed only if\n  // `el.clipPath` is `false`. Otherwise it will be merged/replaced.\n  var clipPathOpt = elOption.clipPath;\n\n  if (clipPathOpt === false) {\n    if (el && el.getClipPath()) {\n      el.removeClipPath();\n    }\n  } else if (clipPathOpt) {\n    var clipPath = el.getClipPath();\n\n    if (clipPath && doesElNeedRecreate(clipPath, clipPathOpt, seriesModel)) {\n      clipPath = null;\n    }\n\n    if (!clipPath) {\n      clipPath = createEl(clipPathOpt);\n\n      if (process.env.NODE_ENV !== 'production') {\n        assert(isPath(clipPath), 'Only any type of `path` can be used in `clipPath`, rather than ' + clipPath.type + '.');\n      }\n\n      el.setClipPath(clipPath);\n    }\n\n    updateElNormal(null, clipPath, dataIndex, clipPathOpt, null, seriesModel, isInit);\n  } // If not define `clipPath` in option, do nothing unnecessary.\n\n}\n\nfunction doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfo) {\n  // group do not support textContent temporarily untill necessary.\n  if (el.isGroup) {\n    return;\n  } // Normal must be called before emphasis, for `isLegacy` detection.\n\n\n  processTxInfo(elOption, null, attachedTxInfo);\n  processTxInfo(elOption, EMPHASIS, attachedTxInfo); // If `elOption.textConfig` or `elOption.textContent` is null/undefined, it does not make sence.\n  // So for simplicity, if \"elOption hasOwnProperty of them but be null/undefined\", we do not\n  // trade them as set to null to el.\n  // Especially:\n  // `elOption.textContent: false` means remove textContent.\n  // `elOption.textContent.emphasis.style: false` means remove the style from emphasis state.\n\n  var txConOptNormal = attachedTxInfo.normal.conOpt;\n  var txConOptEmphasis = attachedTxInfo.emphasis.conOpt;\n  var txConOptBlur = attachedTxInfo.blur.conOpt;\n  var txConOptSelect = attachedTxInfo.select.conOpt;\n\n  if (txConOptNormal != null || txConOptEmphasis != null || txConOptSelect != null || txConOptBlur != null) {\n    var textContent = el.getTextContent();\n\n    if (txConOptNormal === false) {\n      textContent && el.removeTextContent();\n    } else {\n      txConOptNormal = attachedTxInfo.normal.conOpt = txConOptNormal || {\n        type: 'text'\n      };\n\n      if (!textContent) {\n        textContent = createEl(txConOptNormal);\n        el.setTextContent(textContent);\n      } else {\n        // If in some case the performance issue arised, consider\n        // do not clearState but update cached normal state directly.\n        textContent.clearStates();\n      }\n\n      updateElNormal(null, textContent, dataIndex, txConOptNormal, null, seriesModel, isInit);\n      var txConStlOptNormal = txConOptNormal && txConOptNormal.style;\n\n      for (var i = 0; i < STATES.length; i++) {\n        var stateName = STATES[i];\n\n        if (stateName !== NORMAL) {\n          var txConOptOtherState = attachedTxInfo[stateName].conOpt;\n          updateElOnState(stateName, textContent, txConOptOtherState, retrieveStyleOptionOnState(txConOptNormal, txConOptOtherState, stateName), null);\n        }\n      }\n\n      txConStlOptNormal ? textContent.dirty() : textContent.markRedraw();\n    }\n  }\n}\n\nfunction processTxInfo(elOption, state, attachedTxInfo) {\n  var stateOpt = !state ? elOption : retrieveStateOption(elOption, state);\n  var styleOpt = !state ? elOption.style : retrieveStyleOptionOnState(elOption, stateOpt, EMPHASIS);\n  var elType = elOption.type;\n  var txCfg = stateOpt ? stateOpt.textConfig : null;\n  var txConOptNormal = elOption.textContent;\n  var txConOpt = !txConOptNormal ? null : !state ? txConOptNormal : retrieveStateOption(txConOptNormal, state);\n\n  if (styleOpt && ( // Because emphasis style has little info to detect legacy,\n  // if normal is legacy, emphasis is trade as legacy.\n  attachedTxInfo.isLegacy || isEC4CompatibleStyle(styleOpt, elType, !!txCfg, !!txConOpt))) {\n    attachedTxInfo.isLegacy = true;\n    var convertResult = convertFromEC4CompatibleStyle(styleOpt, elType, !state); // Explicitly specified `textConfig` and `textContent` has higher priority than\n    // the ones generated by legacy style. Otherwise if users use them and `api.style`\n    // at the same time, they not both work and hardly to known why.\n\n    if (!txCfg && convertResult.textConfig) {\n      txCfg = convertResult.textConfig;\n    }\n\n    if (!txConOpt && convertResult.textContent) {\n      txConOpt = convertResult.textContent;\n    }\n  }\n\n  if (!state && txConOpt) {\n    var txConOptNormal_1 = txConOpt; // `textContent: {type: 'text'}`, the \"type\" is easy to be missing. So we tolerate it.\n\n    !txConOptNormal_1.type && (txConOptNormal_1.type = 'text');\n\n    if (process.env.NODE_ENV !== 'production') {\n      // Do not tolerate incorret type for forward compat.\n      assert(txConOptNormal_1.type === 'text', 'textContent.type must be \"text\"');\n    }\n  }\n\n  var info = !state ? attachedTxInfo.normal : attachedTxInfo[state];\n  info.cfg = txCfg;\n  info.conOpt = txConOpt;\n}\n\nfunction retrieveStateOption(elOption, state) {\n  return !state ? elOption : elOption ? elOption[state] : null;\n}\n\nfunction retrieveStyleOptionOnState(stateOptionNormal, stateOption, state) {\n  var style = stateOption && stateOption.style;\n\n  if (style == null && state === EMPHASIS && stateOptionNormal) {\n    style = stateOptionNormal.styleEmphasis;\n  }\n\n  return style;\n} // Usage:\n// (1) By default, `elOption.$mergeChildren` is `'byIndex'`, which indicates that\n//     the existing children will not be removed, and enables the feature that\n//     update some of the props of some of the children simply by construct\n//     the returned children of `renderItem` like:\n//     `var children = group.children = []; children[3] = {opacity: 0.5};`\n// (2) If `elOption.$mergeChildren` is `'byName'`, add/update/remove children\n//     by child.name. But that might be lower performance.\n// (3) If `elOption.$mergeChildren` is `false`, the existing children will be\n//     replaced totally.\n// (4) If `!elOption.children`, following the \"merge\" principle, nothing will happen.\n//\n// For implementation simpleness, do not provide a direct way to remove sinlge\n// child (otherwise the total indicies of the children array have to be modified).\n// User can remove a single child by set its `ignore` as `true`.\n\n\nfunction mergeChildren(api, el, dataIndex, elOption, seriesModel) {\n  var newChildren = elOption.children;\n  var newLen = newChildren ? newChildren.length : 0;\n  var mergeChildren = elOption.$mergeChildren; // `diffChildrenByName` has been deprecated.\n\n  var byName = mergeChildren === 'byName' || elOption.diffChildrenByName;\n  var notMerge = mergeChildren === false; // For better performance on roam update, only enter if necessary.\n\n  if (!newLen && !byName && !notMerge) {\n    return;\n  }\n\n  if (byName) {\n    diffGroupChildren({\n      api: api,\n      oldChildren: el.children() || [],\n      newChildren: newChildren || [],\n      dataIndex: dataIndex,\n      seriesModel: seriesModel,\n      group: el\n    });\n    return;\n  }\n\n  notMerge && el.removeAll(); // Mapping children of a group simply by index, which\n  // might be better performance.\n\n  var index = 0;\n\n  for (; index < newLen; index++) {\n    newChildren[index] && doCreateOrUpdateEl(api, el.childAt(index), dataIndex, newChildren[index], seriesModel, el);\n  }\n\n  for (var i = el.childCount() - 1; i >= index; i--) {\n    // Do not supprot leave elements that are not mentioned in the latest\n    // `renderItem` return. Otherwise users may not have a clear and simple\n    // concept that how to contorl all of the elements.\n    var child = el.childAt(i);\n    applyLeaveTransition(child, customInnerStore(el).option, seriesModel);\n  }\n}\n\nfunction diffGroupChildren(context) {\n  new DataDiffer(context.oldChildren, context.newChildren, getKey, getKey, context).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute();\n}\n\nfunction getKey(item, idx) {\n  var name = item && item.name;\n  return name != null ? name : GROUP_DIFF_PREFIX + idx;\n}\n\nfunction processAddUpdate(newIndex, oldIndex) {\n  var context = this.context;\n  var childOption = newIndex != null ? context.newChildren[newIndex] : null;\n  var child = oldIndex != null ? context.oldChildren[oldIndex] : null;\n  doCreateOrUpdateEl(context.api, child, context.dataIndex, childOption, context.seriesModel, context.group);\n}\n\nfunction processRemove(oldIndex) {\n  var context = this.context;\n  var child = context.oldChildren[oldIndex];\n  applyLeaveTransition(child, customInnerStore(child).option, context.seriesModel);\n}\n/**\n * @return SVG Path data.\n */\n\n\nfunction getPathData(shape) {\n  // \"d\" follows the SVG convention.\n  return shape && (shape.pathData || shape.d);\n}\n\nfunction hasOwnPathData(shape) {\n  return shape && (hasOwn(shape, 'pathData') || hasOwn(shape, 'd'));\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}