{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ELEMENT_ANIMATABLE_PROPS = void 0;\nexports.applyLeaveTransition = applyLeaveTransition;\nexports.applyUpdateTransition = applyUpdateTransition;\nexports.isTransitionAll = isTransitionAll;\nexports.updateLeaveTo = updateLeaveTo;\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nvar _model = require(\"../util/model.js\");\n\nvar _util = require(\"zrender/lib/core/util.js\");\n\nvar _Animator = require(\"zrender/lib/animation/Animator.js\");\n\nvar _Displayable = _interopRequireDefault(require(\"zrender/lib/graphic/Displayable.js\"));\n\nvar _basicTrasition = require(\"./basicTrasition.js\");\n\nvar _graphic = require(\"../util/graphic.js\");\n\nvar _log = require(\"../util/log.js\");\n\nvar _Transformable = require(\"zrender/lib/core/Transformable.js\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar LEGACY_TRANSFORM_PROPS_MAP = {\n  position: ['x', 'y'],\n  scale: ['scaleX', 'scaleY'],\n  origin: ['originX', 'originY']\n};\nvar LEGACY_TRANSFORM_PROPS = (0, _util.keys)(LEGACY_TRANSFORM_PROPS_MAP);\nvar TRANSFORM_PROPS_MAP = (0, _util.reduce)(_Transformable.TRANSFORMABLE_PROPS, function (obj, key) {\n  obj[key] = 1;\n  return obj;\n}, {});\n\nvar transformPropNamesStr = _Transformable.TRANSFORMABLE_PROPS.join(', '); // '' means root\n\n\nvar ELEMENT_ANIMATABLE_PROPS = ['', 'style', 'shape', 'extra'];\nexports.ELEMENT_ANIMATABLE_PROPS = ELEMENT_ANIMATABLE_PROPS;\n;\nvar transitionInnerStore = (0, _model.makeInner)();\n;\n\nfunction getElementAnimationConfig(animationType, el, elOption, parentModel, dataIndex) {\n  var animationProp = animationType + \"Animation\";\n  var config = (0, _basicTrasition.getAnimationConfig)(animationType, parentModel, dataIndex) || {};\n  var userDuring = transitionInnerStore(el).userDuring; // Only set when duration is > 0 and it's need to be animated.\n\n  if (config.duration > 0) {\n    // For simplicity, if during not specified, the previous during will not work any more.\n    config.during = userDuring ? (0, _util.bind)(duringCall, {\n      el: el,\n      userDuring: userDuring\n    }) : null;\n    config.setToFinal = true;\n    config.scope = animationType;\n  }\n\n  (0, _util.extend)(config, elOption[animationProp]);\n  return config;\n}\n\nfunction applyUpdateTransition(el, elOption, animatableModel, opts) {\n  opts = opts || {};\n  var dataIndex = opts.dataIndex,\n      isInit = opts.isInit,\n      clearStyle = opts.clearStyle;\n  var hasAnimation = animatableModel.isAnimationEnabled(); // Save the meta info for further morphing. Like apply on the sub morphing elements.\n\n  var store = transitionInnerStore(el);\n  var styleOpt = elOption.style;\n  store.userDuring = elOption.during;\n  var transFromProps = {};\n  var propsToSet = {};\n  prepareTransformAllPropsFinal(el, elOption, propsToSet);\n  prepareShapeOrExtraAllPropsFinal('shape', elOption, propsToSet);\n  prepareShapeOrExtraAllPropsFinal('extra', elOption, propsToSet);\n\n  if (!isInit && hasAnimation) {\n    prepareTransformTransitionFrom(el, elOption, transFromProps);\n    prepareShapeOrExtraTransitionFrom('shape', el, elOption, transFromProps);\n    prepareShapeOrExtraTransitionFrom('extra', el, elOption, transFromProps);\n    prepareStyleTransitionFrom(el, elOption, styleOpt, transFromProps);\n  }\n\n  propsToSet.style = styleOpt;\n  applyPropsDirectly(el, propsToSet, clearStyle);\n  applyMiscProps(el, elOption);\n\n  if (hasAnimation) {\n    if (isInit) {\n      var enterFromProps_1 = {};\n      (0, _util.each)(ELEMENT_ANIMATABLE_PROPS, function (propName) {\n        var prop = propName ? elOption[propName] : elOption;\n\n        if (prop && prop.enterFrom) {\n          if (propName) {\n            enterFromProps_1[propName] = enterFromProps_1[propName] || {};\n          }\n\n          (0, _util.extend)(propName ? enterFromProps_1[propName] : enterFromProps_1, prop.enterFrom);\n        }\n      });\n      var config = getElementAnimationConfig('enter', el, elOption, animatableModel, dataIndex);\n\n      if (config.duration > 0) {\n        el.animateFrom(enterFromProps_1, config);\n      }\n    } else {\n      applyPropsTransition(el, elOption, dataIndex || 0, animatableModel, transFromProps);\n    }\n  } // Store leave to be used in leave transition.\n\n\n  updateLeaveTo(el, elOption);\n  styleOpt ? el.dirty() : el.markRedraw();\n}\n\nfunction updateLeaveTo(el, elOption) {\n  // Try merge to previous set leaveTo\n  var leaveToProps = transitionInnerStore(el).leaveToProps;\n\n  for (var i = 0; i < ELEMENT_ANIMATABLE_PROPS.length; i++) {\n    var propName = ELEMENT_ANIMATABLE_PROPS[i];\n    var prop = propName ? elOption[propName] : elOption;\n\n    if (prop && prop.leaveTo) {\n      if (!leaveToProps) {\n        leaveToProps = transitionInnerStore(el).leaveToProps = {};\n      }\n\n      if (propName) {\n        leaveToProps[propName] = leaveToProps[propName] || {};\n      }\n\n      (0, _util.extend)(propName ? leaveToProps[propName] : leaveToProps, prop.leaveTo);\n    }\n  }\n}\n\nfunction applyLeaveTransition(el, elOption, animatableModel, onRemove) {\n  if (el) {\n    var parent_1 = el.parent;\n    var leaveToProps = transitionInnerStore(el).leaveToProps;\n\n    if (leaveToProps) {\n      // TODO TODO use leave after leaveAnimation in series is introduced\n      // TODO Data index?\n      var config = getElementAnimationConfig('update', el, elOption, animatableModel, 0);\n\n      config.done = function () {\n        parent_1.remove(el);\n        onRemove && onRemove();\n      };\n\n      el.animateTo(leaveToProps, config);\n    } else {\n      parent_1.remove(el);\n      onRemove && onRemove();\n    }\n  }\n}\n\nfunction isTransitionAll(transition) {\n  return transition === 'all';\n}\n\nfunction applyPropsDirectly(el, // Can be null/undefined\nallPropsFinal, clearStyle) {\n  var styleOpt = allPropsFinal.style;\n\n  if (!el.isGroup && styleOpt) {\n    if (clearStyle) {\n      el.useStyle({}); // When style object changed, how to trade the existing animation?\n      // It is probably complicated and not needed to cover all the cases.\n      // But still need consider the case:\n      // (1) When using init animation on `style.opacity`, and before the animation\n      //     ended users triggers an update by mousewhel. At that time the init\n      //     animation should better be continued rather than terminated.\n      //     So after `useStyle` called, we should change the animation target manually\n      //     to continue the effect of the init animation.\n      // (2) PENDING: If the previous animation targeted at a `val1`, and currently we need\n      //     to update the value to `val2` and no animation declared, should be terminate\n      //     the previous animation or just modify the target of the animation?\n      //     Therotically That will happen not only on `style` but also on `shape` and\n      //     `transfrom` props. But we haven't handle this case at present yet.\n      // (3) PENDING: Is it proper to visit `animators` and `targetName`?\n\n      var animators = el.animators;\n\n      for (var i = 0; i < animators.length; i++) {\n        var animator = animators[i]; // targetName is the \"topKey\".\n\n        if (animator.targetName === 'style') {\n          animator.changeTarget(el.style);\n        }\n      }\n    }\n\n    el.setStyle(styleOpt);\n  }\n\n  if (allPropsFinal) {\n    // Not set style here.\n    allPropsFinal.style = null; // Set el to the final state firstly.\n\n    allPropsFinal && el.attr(allPropsFinal);\n    allPropsFinal.style = styleOpt;\n  }\n}\n\nfunction applyPropsTransition(el, elOption, dataIndex, model, // Can be null/undefined\ntransFromProps) {\n  if (transFromProps) {\n    var config = getElementAnimationConfig('update', el, elOption, model, dataIndex);\n\n    if (config.duration > 0) {\n      el.animateFrom(transFromProps, config);\n    }\n  }\n}\n\nfunction applyMiscProps(el, elOption) {\n  // Merge by default.\n  (0, _util.hasOwn)(elOption, 'silent') && (el.silent = elOption.silent);\n  (0, _util.hasOwn)(elOption, 'ignore') && (el.ignore = elOption.ignore);\n\n  if (el instanceof _Displayable.default) {\n    (0, _util.hasOwn)(elOption, 'invisible') && (el.invisible = elOption.invisible);\n  }\n\n  if (el instanceof _graphic.Path) {\n    (0, _util.hasOwn)(elOption, 'autoBatch') && (el.autoBatch = elOption.autoBatch);\n  }\n} // Use it to avoid it be exposed to user.\n\n\nvar tmpDuringScope = {};\nvar transitionDuringAPI = {\n  // Usually other props do not need to be changed in animation during.\n  setTransform: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      (0, _util.assert)((0, _util.hasOwn)(TRANSFORM_PROPS_MAP, key), 'Only ' + transformPropNamesStr + ' available in `setTransform`.');\n    }\n\n    tmpDuringScope.el[key] = val;\n    return this;\n  },\n  getTransform: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      (0, _util.assert)((0, _util.hasOwn)(TRANSFORM_PROPS_MAP, key), 'Only ' + transformPropNamesStr + ' available in `getTransform`.');\n    }\n\n    return tmpDuringScope.el[key];\n  },\n  setShape: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var el = tmpDuringScope.el;\n    var shape = el.shape || (el.shape = {});\n    shape[key] = val;\n    el.dirtyShape && el.dirtyShape();\n    return this;\n  },\n  getShape: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var shape = tmpDuringScope.el.shape;\n\n    if (shape) {\n      return shape[key];\n    }\n  },\n  setStyle: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var el = tmpDuringScope.el;\n    var style = el.style;\n\n    if (style) {\n      if (process.env.NODE_ENV !== 'production') {\n        if ((0, _util.eqNaN)(val)) {\n          (0, _log.warn)('style.' + key + ' must not be assigned with NaN.');\n        }\n      }\n\n      style[key] = val;\n      el.dirtyStyle && el.dirtyStyle();\n    }\n\n    return this;\n  },\n  getStyle: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var style = tmpDuringScope.el.style;\n\n    if (style) {\n      return style[key];\n    }\n  },\n  setExtra: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var extra = tmpDuringScope.el.extra || (tmpDuringScope.el.extra = {});\n    extra[key] = val;\n    return this;\n  },\n  getExtra: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var extra = tmpDuringScope.el.extra;\n\n    if (extra) {\n      return extra[key];\n    }\n  }\n};\n\nfunction assertNotReserved(key) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (key === 'transition' || key === 'enterFrom' || key === 'leaveTo') {\n      throw new Error('key must not be \"' + key + '\"');\n    }\n  }\n}\n\nfunction duringCall() {\n  // Do not provide \"percent\" until some requirements come.\n  // Because consider thies case:\n  // enterFrom: {x: 100, y: 30}, transition: 'x'.\n  // And enter duration is different from update duration.\n  // Thus it might be confused about the meaning of \"percent\" in during callback.\n  var scope = this;\n  var el = scope.el;\n\n  if (!el) {\n    return;\n  } // If el is remove from zr by reason like legend, during still need to called,\n  // becuase el will be added back to zr and the prop value should not be incorrect.\n\n\n  var latestUserDuring = transitionInnerStore(el).userDuring;\n  var scopeUserDuring = scope.userDuring; // Ensured a during is only called once in each animation frame.\n  // If a during is called multiple times in one frame, maybe some users' calulation logic\n  // might be wrong (not sure whether this usage exists).\n  // The case of a during might be called twice can be: by default there is a animator for\n  // 'x', 'y' when init. Before the init animation finished, call `setOption` to start\n  // another animators for 'style'/'shape'/'extra'.\n\n  if (latestUserDuring !== scopeUserDuring) {\n    // release\n    scope.el = scope.userDuring = null;\n    return;\n  }\n\n  tmpDuringScope.el = el; // Give no `this` to user in \"during\" calling.\n\n  scopeUserDuring(transitionDuringAPI); // FIXME: if in future meet the case that some prop will be both modified in `during` and `state`,\n  // consider the issue that the prop might be incorrect when return to \"normal\" state.\n}\n\nfunction prepareShapeOrExtraTransitionFrom(mainAttr, fromEl, elOption, transFromProps) {\n  var attrOpt = elOption[mainAttr];\n\n  if (!attrOpt) {\n    return;\n  }\n\n  var elPropsInAttr = fromEl[mainAttr];\n  var transFromPropsInAttr;\n\n  if (elPropsInAttr) {\n    var transition = elOption.transition;\n    var attrTransition = attrOpt.transition;\n\n    if (attrTransition) {\n      !transFromPropsInAttr && (transFromPropsInAttr = transFromProps[mainAttr] = {});\n\n      if (isTransitionAll(attrTransition)) {\n        (0, _util.extend)(transFromPropsInAttr, elPropsInAttr);\n      } else {\n        var transitionKeys = (0, _model.normalizeToArray)(attrTransition);\n\n        for (var i = 0; i < transitionKeys.length; i++) {\n          var key = transitionKeys[i];\n          var elVal = elPropsInAttr[key];\n          transFromPropsInAttr[key] = elVal;\n        }\n      }\n    } else if (isTransitionAll(transition) || (0, _util.indexOf)(transition, mainAttr) >= 0) {\n      !transFromPropsInAttr && (transFromPropsInAttr = transFromProps[mainAttr] = {});\n      var elPropsInAttrKeys = (0, _util.keys)(elPropsInAttr);\n\n      for (var i = 0; i < elPropsInAttrKeys.length; i++) {\n        var key = elPropsInAttrKeys[i];\n        var elVal = elPropsInAttr[key];\n\n        if (isNonStyleTransitionEnabled(attrOpt[key], elVal)) {\n          transFromPropsInAttr[key] = elVal;\n        }\n      }\n    }\n  }\n}\n\nfunction prepareShapeOrExtraAllPropsFinal(mainAttr, elOption, allProps) {\n  var attrOpt = elOption[mainAttr];\n\n  if (!attrOpt) {\n    return;\n  }\n\n  var allPropsInAttr = allProps[mainAttr] = {};\n  var keysInAttr = (0, _util.keys)(attrOpt);\n\n  for (var i = 0; i < keysInAttr.length; i++) {\n    var key = keysInAttr[i]; // To avoid share one object with different element, and\n    // to avoid user modify the object inexpectedly, have to clone.\n\n    allPropsInAttr[key] = (0, _Animator.cloneValue)(attrOpt[key]);\n  }\n}\n\nfunction prepareTransformTransitionFrom(el, elOption, transFromProps) {\n  var transition = elOption.transition;\n  var transitionKeys = isTransitionAll(transition) ? _Transformable.TRANSFORMABLE_PROPS : (0, _model.normalizeToArray)(transition || []);\n\n  for (var i = 0; i < transitionKeys.length; i++) {\n    var key = transitionKeys[i];\n\n    if (key === 'style' || key === 'shape' || key === 'extra') {\n      continue;\n    }\n\n    var elVal = el[key];\n\n    if (process.env.NODE_ENV !== 'production') {\n      checkTransformPropRefer(key, 'el.transition');\n    } // Do not clone, animator will perform that clone.\n\n\n    transFromProps[key] = elVal;\n  }\n}\n\nfunction prepareTransformAllPropsFinal(el, elOption, allProps) {\n  for (var i = 0; i < LEGACY_TRANSFORM_PROPS.length; i++) {\n    var legacyName = LEGACY_TRANSFORM_PROPS[i];\n    var xyName = LEGACY_TRANSFORM_PROPS_MAP[legacyName];\n    var legacyArr = elOption[legacyName];\n\n    if (legacyArr) {\n      allProps[xyName[0]] = legacyArr[0];\n      allProps[xyName[1]] = legacyArr[1];\n    }\n  }\n\n  for (var i = 0; i < _Transformable.TRANSFORMABLE_PROPS.length; i++) {\n    var key = _Transformable.TRANSFORMABLE_PROPS[i];\n\n    if (elOption[key] != null) {\n      allProps[key] = elOption[key];\n    }\n  }\n}\n\nfunction prepareStyleTransitionFrom(fromEl, elOption, styleOpt, transFromProps) {\n  if (!styleOpt) {\n    return;\n  }\n\n  var fromElStyle = fromEl.style;\n  var transFromStyleProps;\n\n  if (fromElStyle) {\n    var styleTransition = styleOpt.transition;\n    var elTransition = elOption.transition;\n\n    if (styleTransition && !isTransitionAll(styleTransition)) {\n      var transitionKeys = (0, _model.normalizeToArray)(styleTransition);\n      !transFromStyleProps && (transFromStyleProps = transFromProps.style = {});\n\n      for (var i = 0; i < transitionKeys.length; i++) {\n        var key = transitionKeys[i];\n        var elVal = fromElStyle[key]; // Do not clone, see `checkNonStyleTansitionRefer`.\n\n        transFromStyleProps[key] = elVal;\n      }\n    } else if (fromEl.getAnimationStyleProps && (isTransitionAll(elTransition) || isTransitionAll(styleTransition) || (0, _util.indexOf)(elTransition, 'style') >= 0)) {\n      var animationProps = fromEl.getAnimationStyleProps();\n      var animationStyleProps = animationProps ? animationProps.style : null;\n\n      if (animationStyleProps) {\n        !transFromStyleProps && (transFromStyleProps = transFromProps.style = {});\n        var styleKeys = (0, _util.keys)(styleOpt);\n\n        for (var i = 0; i < styleKeys.length; i++) {\n          var key = styleKeys[i];\n\n          if (animationStyleProps[key]) {\n            var elVal = fromElStyle[key];\n            transFromStyleProps[key] = elVal;\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction isNonStyleTransitionEnabled(optVal, elVal) {\n  // The same as `checkNonStyleTansitionRefer`.\n  return !(0, _util.isArrayLike)(optVal) ? optVal != null && isFinite(optVal) : optVal !== elVal;\n}\n\nvar checkTransformPropRefer;\n\nif (process.env.NODE_ENV !== 'production') {\n  checkTransformPropRefer = function (key, usedIn) {\n    if (!(0, _util.hasOwn)(TRANSFORM_PROPS_MAP, key)) {\n      (0, _log.warn)('Prop `' + key + '` is not a permitted in `' + usedIn + '`. ' + 'Only `' + (0, _util.keys)(TRANSFORM_PROPS_MAP).join('`, `') + '` are permitted.');\n    }\n  };\n}","map":{"version":3,"names":["LEGACY_TRANSFORM_PROPS_MAP","position","scale","origin","LEGACY_TRANSFORM_PROPS","keys","TRANSFORM_PROPS_MAP","reduce","TRANSFORMABLE_PROPS","obj","key","transformPropNamesStr","join","ELEMENT_ANIMATABLE_PROPS","transitionInnerStore","makeInner","getElementAnimationConfig","animationType","el","elOption","parentModel","dataIndex","animationProp","config","getAnimationConfig","userDuring","duration","during","bind","duringCall","setToFinal","scope","extend","applyUpdateTransition","animatableModel","opts","isInit","clearStyle","hasAnimation","isAnimationEnabled","store","styleOpt","style","transFromProps","propsToSet","prepareTransformAllPropsFinal","prepareShapeOrExtraAllPropsFinal","prepareTransformTransitionFrom","prepareShapeOrExtraTransitionFrom","prepareStyleTransitionFrom","applyPropsDirectly","applyMiscProps","enterFromProps_1","each","propName","prop","enterFrom","animateFrom","applyPropsTransition","updateLeaveTo","dirty","markRedraw","leaveToProps","i","length","leaveTo","applyLeaveTransition","onRemove","parent_1","parent","done","remove","animateTo","isTransitionAll","transition","allPropsFinal","isGroup","useStyle","animators","animator","targetName","changeTarget","setStyle","attr","model","hasOwn","silent","ignore","Displayable","invisible","Path","autoBatch","tmpDuringScope","transitionDuringAPI","setTransform","val","process","env","NODE_ENV","assert","getTransform","setShape","assertNotReserved","shape","dirtyShape","getShape","eqNaN","warn","dirtyStyle","getStyle","setExtra","extra","getExtra","Error","latestUserDuring","scopeUserDuring","mainAttr","fromEl","attrOpt","elPropsInAttr","transFromPropsInAttr","attrTransition","transitionKeys","normalizeToArray","elVal","indexOf","elPropsInAttrKeys","isNonStyleTransitionEnabled","allProps","allPropsInAttr","keysInAttr","cloneValue","checkTransformPropRefer","legacyName","xyName","legacyArr","fromElStyle","transFromStyleProps","styleTransition","elTransition","getAnimationStyleProps","animationProps","animationStyleProps","styleKeys","optVal","isArrayLike","isFinite","usedIn"],"sources":["C:/Users/Z/Desktop/efficient/node_modules/echarts/lib/animation/customGraphicTransition.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner, normalizeToArray } from '../util/model.js';\nimport { assert, bind, each, eqNaN, extend, hasOwn, indexOf, isArrayLike, keys, reduce } from 'zrender/lib/core/util.js';\nimport { cloneValue } from 'zrender/lib/animation/Animator.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport { getAnimationConfig } from './basicTrasition.js';\nimport { Path } from '../util/graphic.js';\nimport { warn } from '../util/log.js';\nimport { TRANSFORMABLE_PROPS } from 'zrender/lib/core/Transformable.js';\nvar LEGACY_TRANSFORM_PROPS_MAP = {\n  position: ['x', 'y'],\n  scale: ['scaleX', 'scaleY'],\n  origin: ['originX', 'originY']\n};\nvar LEGACY_TRANSFORM_PROPS = keys(LEGACY_TRANSFORM_PROPS_MAP);\nvar TRANSFORM_PROPS_MAP = reduce(TRANSFORMABLE_PROPS, function (obj, key) {\n  obj[key] = 1;\n  return obj;\n}, {});\nvar transformPropNamesStr = TRANSFORMABLE_PROPS.join(', '); // '' means root\n\nexport var ELEMENT_ANIMATABLE_PROPS = ['', 'style', 'shape', 'extra'];\n;\nvar transitionInnerStore = makeInner();\n;\n\nfunction getElementAnimationConfig(animationType, el, elOption, parentModel, dataIndex) {\n  var animationProp = animationType + \"Animation\";\n  var config = getAnimationConfig(animationType, parentModel, dataIndex) || {};\n  var userDuring = transitionInnerStore(el).userDuring; // Only set when duration is > 0 and it's need to be animated.\n\n  if (config.duration > 0) {\n    // For simplicity, if during not specified, the previous during will not work any more.\n    config.during = userDuring ? bind(duringCall, {\n      el: el,\n      userDuring: userDuring\n    }) : null;\n    config.setToFinal = true;\n    config.scope = animationType;\n  }\n\n  extend(config, elOption[animationProp]);\n  return config;\n}\n\nexport function applyUpdateTransition(el, elOption, animatableModel, opts) {\n  opts = opts || {};\n  var dataIndex = opts.dataIndex,\n      isInit = opts.isInit,\n      clearStyle = opts.clearStyle;\n  var hasAnimation = animatableModel.isAnimationEnabled(); // Save the meta info for further morphing. Like apply on the sub morphing elements.\n\n  var store = transitionInnerStore(el);\n  var styleOpt = elOption.style;\n  store.userDuring = elOption.during;\n  var transFromProps = {};\n  var propsToSet = {};\n  prepareTransformAllPropsFinal(el, elOption, propsToSet);\n  prepareShapeOrExtraAllPropsFinal('shape', elOption, propsToSet);\n  prepareShapeOrExtraAllPropsFinal('extra', elOption, propsToSet);\n\n  if (!isInit && hasAnimation) {\n    prepareTransformTransitionFrom(el, elOption, transFromProps);\n    prepareShapeOrExtraTransitionFrom('shape', el, elOption, transFromProps);\n    prepareShapeOrExtraTransitionFrom('extra', el, elOption, transFromProps);\n    prepareStyleTransitionFrom(el, elOption, styleOpt, transFromProps);\n  }\n\n  propsToSet.style = styleOpt;\n  applyPropsDirectly(el, propsToSet, clearStyle);\n  applyMiscProps(el, elOption);\n\n  if (hasAnimation) {\n    if (isInit) {\n      var enterFromProps_1 = {};\n      each(ELEMENT_ANIMATABLE_PROPS, function (propName) {\n        var prop = propName ? elOption[propName] : elOption;\n\n        if (prop && prop.enterFrom) {\n          if (propName) {\n            enterFromProps_1[propName] = enterFromProps_1[propName] || {};\n          }\n\n          extend(propName ? enterFromProps_1[propName] : enterFromProps_1, prop.enterFrom);\n        }\n      });\n      var config = getElementAnimationConfig('enter', el, elOption, animatableModel, dataIndex);\n\n      if (config.duration > 0) {\n        el.animateFrom(enterFromProps_1, config);\n      }\n    } else {\n      applyPropsTransition(el, elOption, dataIndex || 0, animatableModel, transFromProps);\n    }\n  } // Store leave to be used in leave transition.\n\n\n  updateLeaveTo(el, elOption);\n  styleOpt ? el.dirty() : el.markRedraw();\n}\nexport function updateLeaveTo(el, elOption) {\n  // Try merge to previous set leaveTo\n  var leaveToProps = transitionInnerStore(el).leaveToProps;\n\n  for (var i = 0; i < ELEMENT_ANIMATABLE_PROPS.length; i++) {\n    var propName = ELEMENT_ANIMATABLE_PROPS[i];\n    var prop = propName ? elOption[propName] : elOption;\n\n    if (prop && prop.leaveTo) {\n      if (!leaveToProps) {\n        leaveToProps = transitionInnerStore(el).leaveToProps = {};\n      }\n\n      if (propName) {\n        leaveToProps[propName] = leaveToProps[propName] || {};\n      }\n\n      extend(propName ? leaveToProps[propName] : leaveToProps, prop.leaveTo);\n    }\n  }\n}\nexport function applyLeaveTransition(el, elOption, animatableModel, onRemove) {\n  if (el) {\n    var parent_1 = el.parent;\n    var leaveToProps = transitionInnerStore(el).leaveToProps;\n\n    if (leaveToProps) {\n      // TODO TODO use leave after leaveAnimation in series is introduced\n      // TODO Data index?\n      var config = getElementAnimationConfig('update', el, elOption, animatableModel, 0);\n\n      config.done = function () {\n        parent_1.remove(el);\n        onRemove && onRemove();\n      };\n\n      el.animateTo(leaveToProps, config);\n    } else {\n      parent_1.remove(el);\n      onRemove && onRemove();\n    }\n  }\n}\nexport function isTransitionAll(transition) {\n  return transition === 'all';\n}\n\nfunction applyPropsDirectly(el, // Can be null/undefined\nallPropsFinal, clearStyle) {\n  var styleOpt = allPropsFinal.style;\n\n  if (!el.isGroup && styleOpt) {\n    if (clearStyle) {\n      el.useStyle({}); // When style object changed, how to trade the existing animation?\n      // It is probably complicated and not needed to cover all the cases.\n      // But still need consider the case:\n      // (1) When using init animation on `style.opacity`, and before the animation\n      //     ended users triggers an update by mousewhel. At that time the init\n      //     animation should better be continued rather than terminated.\n      //     So after `useStyle` called, we should change the animation target manually\n      //     to continue the effect of the init animation.\n      // (2) PENDING: If the previous animation targeted at a `val1`, and currently we need\n      //     to update the value to `val2` and no animation declared, should be terminate\n      //     the previous animation or just modify the target of the animation?\n      //     Therotically That will happen not only on `style` but also on `shape` and\n      //     `transfrom` props. But we haven't handle this case at present yet.\n      // (3) PENDING: Is it proper to visit `animators` and `targetName`?\n\n      var animators = el.animators;\n\n      for (var i = 0; i < animators.length; i++) {\n        var animator = animators[i]; // targetName is the \"topKey\".\n\n        if (animator.targetName === 'style') {\n          animator.changeTarget(el.style);\n        }\n      }\n    }\n\n    el.setStyle(styleOpt);\n  }\n\n  if (allPropsFinal) {\n    // Not set style here.\n    allPropsFinal.style = null; // Set el to the final state firstly.\n\n    allPropsFinal && el.attr(allPropsFinal);\n    allPropsFinal.style = styleOpt;\n  }\n}\n\nfunction applyPropsTransition(el, elOption, dataIndex, model, // Can be null/undefined\ntransFromProps) {\n  if (transFromProps) {\n    var config = getElementAnimationConfig('update', el, elOption, model, dataIndex);\n\n    if (config.duration > 0) {\n      el.animateFrom(transFromProps, config);\n    }\n  }\n}\n\nfunction applyMiscProps(el, elOption) {\n  // Merge by default.\n  hasOwn(elOption, 'silent') && (el.silent = elOption.silent);\n  hasOwn(elOption, 'ignore') && (el.ignore = elOption.ignore);\n\n  if (el instanceof Displayable) {\n    hasOwn(elOption, 'invisible') && (el.invisible = elOption.invisible);\n  }\n\n  if (el instanceof Path) {\n    hasOwn(elOption, 'autoBatch') && (el.autoBatch = elOption.autoBatch);\n  }\n} // Use it to avoid it be exposed to user.\n\n\nvar tmpDuringScope = {};\nvar transitionDuringAPI = {\n  // Usually other props do not need to be changed in animation during.\n  setTransform: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(hasOwn(TRANSFORM_PROPS_MAP, key), 'Only ' + transformPropNamesStr + ' available in `setTransform`.');\n    }\n\n    tmpDuringScope.el[key] = val;\n    return this;\n  },\n  getTransform: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(hasOwn(TRANSFORM_PROPS_MAP, key), 'Only ' + transformPropNamesStr + ' available in `getTransform`.');\n    }\n\n    return tmpDuringScope.el[key];\n  },\n  setShape: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var el = tmpDuringScope.el;\n    var shape = el.shape || (el.shape = {});\n    shape[key] = val;\n    el.dirtyShape && el.dirtyShape();\n    return this;\n  },\n  getShape: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var shape = tmpDuringScope.el.shape;\n\n    if (shape) {\n      return shape[key];\n    }\n  },\n  setStyle: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var el = tmpDuringScope.el;\n    var style = el.style;\n\n    if (style) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (eqNaN(val)) {\n          warn('style.' + key + ' must not be assigned with NaN.');\n        }\n      }\n\n      style[key] = val;\n      el.dirtyStyle && el.dirtyStyle();\n    }\n\n    return this;\n  },\n  getStyle: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var style = tmpDuringScope.el.style;\n\n    if (style) {\n      return style[key];\n    }\n  },\n  setExtra: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var extra = tmpDuringScope.el.extra || (tmpDuringScope.el.extra = {});\n    extra[key] = val;\n    return this;\n  },\n  getExtra: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var extra = tmpDuringScope.el.extra;\n\n    if (extra) {\n      return extra[key];\n    }\n  }\n};\n\nfunction assertNotReserved(key) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (key === 'transition' || key === 'enterFrom' || key === 'leaveTo') {\n      throw new Error('key must not be \"' + key + '\"');\n    }\n  }\n}\n\nfunction duringCall() {\n  // Do not provide \"percent\" until some requirements come.\n  // Because consider thies case:\n  // enterFrom: {x: 100, y: 30}, transition: 'x'.\n  // And enter duration is different from update duration.\n  // Thus it might be confused about the meaning of \"percent\" in during callback.\n  var scope = this;\n  var el = scope.el;\n\n  if (!el) {\n    return;\n  } // If el is remove from zr by reason like legend, during still need to called,\n  // becuase el will be added back to zr and the prop value should not be incorrect.\n\n\n  var latestUserDuring = transitionInnerStore(el).userDuring;\n  var scopeUserDuring = scope.userDuring; // Ensured a during is only called once in each animation frame.\n  // If a during is called multiple times in one frame, maybe some users' calulation logic\n  // might be wrong (not sure whether this usage exists).\n  // The case of a during might be called twice can be: by default there is a animator for\n  // 'x', 'y' when init. Before the init animation finished, call `setOption` to start\n  // another animators for 'style'/'shape'/'extra'.\n\n  if (latestUserDuring !== scopeUserDuring) {\n    // release\n    scope.el = scope.userDuring = null;\n    return;\n  }\n\n  tmpDuringScope.el = el; // Give no `this` to user in \"during\" calling.\n\n  scopeUserDuring(transitionDuringAPI); // FIXME: if in future meet the case that some prop will be both modified in `during` and `state`,\n  // consider the issue that the prop might be incorrect when return to \"normal\" state.\n}\n\nfunction prepareShapeOrExtraTransitionFrom(mainAttr, fromEl, elOption, transFromProps) {\n  var attrOpt = elOption[mainAttr];\n\n  if (!attrOpt) {\n    return;\n  }\n\n  var elPropsInAttr = fromEl[mainAttr];\n  var transFromPropsInAttr;\n\n  if (elPropsInAttr) {\n    var transition = elOption.transition;\n    var attrTransition = attrOpt.transition;\n\n    if (attrTransition) {\n      !transFromPropsInAttr && (transFromPropsInAttr = transFromProps[mainAttr] = {});\n\n      if (isTransitionAll(attrTransition)) {\n        extend(transFromPropsInAttr, elPropsInAttr);\n      } else {\n        var transitionKeys = normalizeToArray(attrTransition);\n\n        for (var i = 0; i < transitionKeys.length; i++) {\n          var key = transitionKeys[i];\n          var elVal = elPropsInAttr[key];\n          transFromPropsInAttr[key] = elVal;\n        }\n      }\n    } else if (isTransitionAll(transition) || indexOf(transition, mainAttr) >= 0) {\n      !transFromPropsInAttr && (transFromPropsInAttr = transFromProps[mainAttr] = {});\n      var elPropsInAttrKeys = keys(elPropsInAttr);\n\n      for (var i = 0; i < elPropsInAttrKeys.length; i++) {\n        var key = elPropsInAttrKeys[i];\n        var elVal = elPropsInAttr[key];\n\n        if (isNonStyleTransitionEnabled(attrOpt[key], elVal)) {\n          transFromPropsInAttr[key] = elVal;\n        }\n      }\n    }\n  }\n}\n\nfunction prepareShapeOrExtraAllPropsFinal(mainAttr, elOption, allProps) {\n  var attrOpt = elOption[mainAttr];\n\n  if (!attrOpt) {\n    return;\n  }\n\n  var allPropsInAttr = allProps[mainAttr] = {};\n  var keysInAttr = keys(attrOpt);\n\n  for (var i = 0; i < keysInAttr.length; i++) {\n    var key = keysInAttr[i]; // To avoid share one object with different element, and\n    // to avoid user modify the object inexpectedly, have to clone.\n\n    allPropsInAttr[key] = cloneValue(attrOpt[key]);\n  }\n}\n\nfunction prepareTransformTransitionFrom(el, elOption, transFromProps) {\n  var transition = elOption.transition;\n  var transitionKeys = isTransitionAll(transition) ? TRANSFORMABLE_PROPS : normalizeToArray(transition || []);\n\n  for (var i = 0; i < transitionKeys.length; i++) {\n    var key = transitionKeys[i];\n\n    if (key === 'style' || key === 'shape' || key === 'extra') {\n      continue;\n    }\n\n    var elVal = el[key];\n\n    if (process.env.NODE_ENV !== 'production') {\n      checkTransformPropRefer(key, 'el.transition');\n    } // Do not clone, animator will perform that clone.\n\n\n    transFromProps[key] = elVal;\n  }\n}\n\nfunction prepareTransformAllPropsFinal(el, elOption, allProps) {\n  for (var i = 0; i < LEGACY_TRANSFORM_PROPS.length; i++) {\n    var legacyName = LEGACY_TRANSFORM_PROPS[i];\n    var xyName = LEGACY_TRANSFORM_PROPS_MAP[legacyName];\n    var legacyArr = elOption[legacyName];\n\n    if (legacyArr) {\n      allProps[xyName[0]] = legacyArr[0];\n      allProps[xyName[1]] = legacyArr[1];\n    }\n  }\n\n  for (var i = 0; i < TRANSFORMABLE_PROPS.length; i++) {\n    var key = TRANSFORMABLE_PROPS[i];\n\n    if (elOption[key] != null) {\n      allProps[key] = elOption[key];\n    }\n  }\n}\n\nfunction prepareStyleTransitionFrom(fromEl, elOption, styleOpt, transFromProps) {\n  if (!styleOpt) {\n    return;\n  }\n\n  var fromElStyle = fromEl.style;\n  var transFromStyleProps;\n\n  if (fromElStyle) {\n    var styleTransition = styleOpt.transition;\n    var elTransition = elOption.transition;\n\n    if (styleTransition && !isTransitionAll(styleTransition)) {\n      var transitionKeys = normalizeToArray(styleTransition);\n      !transFromStyleProps && (transFromStyleProps = transFromProps.style = {});\n\n      for (var i = 0; i < transitionKeys.length; i++) {\n        var key = transitionKeys[i];\n        var elVal = fromElStyle[key]; // Do not clone, see `checkNonStyleTansitionRefer`.\n\n        transFromStyleProps[key] = elVal;\n      }\n    } else if (fromEl.getAnimationStyleProps && (isTransitionAll(elTransition) || isTransitionAll(styleTransition) || indexOf(elTransition, 'style') >= 0)) {\n      var animationProps = fromEl.getAnimationStyleProps();\n      var animationStyleProps = animationProps ? animationProps.style : null;\n\n      if (animationStyleProps) {\n        !transFromStyleProps && (transFromStyleProps = transFromProps.style = {});\n        var styleKeys = keys(styleOpt);\n\n        for (var i = 0; i < styleKeys.length; i++) {\n          var key = styleKeys[i];\n\n          if (animationStyleProps[key]) {\n            var elVal = fromElStyle[key];\n            transFromStyleProps[key] = elVal;\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction isNonStyleTransitionEnabled(optVal, elVal) {\n  // The same as `checkNonStyleTansitionRefer`.\n  return !isArrayLike(optVal) ? optVal != null && isFinite(optVal) : optVal !== elVal;\n}\n\nvar checkTransformPropRefer;\n\nif (process.env.NODE_ENV !== 'production') {\n  checkTransformPropRefer = function (key, usedIn) {\n    if (!hasOwn(TRANSFORM_PROPS_MAP, key)) {\n      warn('Prop `' + key + '` is not a permitted in `' + usedIn + '`. ' + 'Only `' + keys(TRANSFORM_PROPS_MAP).join('`, `') + '` are permitted.');\n    }\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}