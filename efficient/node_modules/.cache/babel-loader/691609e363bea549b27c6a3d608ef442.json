{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireWildcard.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ECEventProcessor = void 0;\n\nvar zrUtil = _interopRequireWildcard(require(\"zrender/lib/core/util.js\"));\n\nvar _clazz = require(\"./clazz.js\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Usage of query:\n * `chart.on('click', query, handler);`\n * The `query` can be:\n * + The component type query string, only `mainType` or `mainType.subType`,\n *   like: 'xAxis', 'series', 'xAxis.category' or 'series.line'.\n * + The component query object, like:\n *   `{seriesIndex: 2}`, `{seriesName: 'xx'}`, `{seriesId: 'some'}`,\n *   `{xAxisIndex: 2}`, `{xAxisName: 'xx'}`, `{xAxisId: 'some'}`.\n * + The data query object, like:\n *   `{dataIndex: 123}`, `{dataType: 'link'}`, `{name: 'some'}`.\n * + The other query object (cmponent customized query), like:\n *   `{element: 'some'}` (only available in custom series).\n *\n * Caveat: If a prop in the `query` object is `null/undefined`, it is the\n * same as there is no such prop in the `query` object.\n */\nvar ECEventProcessor =\n/** @class */\nfunction () {\n  function ECEventProcessor() {}\n\n  ECEventProcessor.prototype.normalizeQuery = function (query) {\n    var cptQuery = {};\n    var dataQuery = {};\n    var otherQuery = {}; // `query` is `mainType` or `mainType.subType` of component.\n\n    if (zrUtil.isString(query)) {\n      var condCptType = (0, _clazz.parseClassType)(query); // `.main` and `.sub` may be ''.\n\n      cptQuery.mainType = condCptType.main || null;\n      cptQuery.subType = condCptType.sub || null;\n    } // `query` is an object, convert to {mainType, index, name, id}.\n    else {\n      // `xxxIndex`, `xxxName`, `xxxId`, `name`, `dataIndex`, `dataType` is reserved,\n      // can not be used in `compomentModel.filterForExposedEvent`.\n      var suffixes_1 = ['Index', 'Name', 'Id'];\n      var dataKeys_1 = {\n        name: 1,\n        dataIndex: 1,\n        dataType: 1\n      };\n      zrUtil.each(query, function (val, key) {\n        var reserved = false;\n\n        for (var i = 0; i < suffixes_1.length; i++) {\n          var propSuffix = suffixes_1[i];\n          var suffixPos = key.lastIndexOf(propSuffix);\n\n          if (suffixPos > 0 && suffixPos === key.length - propSuffix.length) {\n            var mainType = key.slice(0, suffixPos); // Consider `dataIndex`.\n\n            if (mainType !== 'data') {\n              cptQuery.mainType = mainType;\n              cptQuery[propSuffix.toLowerCase()] = val;\n              reserved = true;\n            }\n          }\n        }\n\n        if (dataKeys_1.hasOwnProperty(key)) {\n          dataQuery[key] = val;\n          reserved = true;\n        }\n\n        if (!reserved) {\n          otherQuery[key] = val;\n        }\n      });\n    }\n\n    return {\n      cptQuery: cptQuery,\n      dataQuery: dataQuery,\n      otherQuery: otherQuery\n    };\n  };\n\n  ECEventProcessor.prototype.filter = function (eventType, query) {\n    // They should be assigned before each trigger call.\n    var eventInfo = this.eventInfo;\n\n    if (!eventInfo) {\n      return true;\n    }\n\n    var targetEl = eventInfo.targetEl;\n    var packedEvent = eventInfo.packedEvent;\n    var model = eventInfo.model;\n    var view = eventInfo.view; // For event like 'globalout'.\n\n    if (!model || !view) {\n      return true;\n    }\n\n    var cptQuery = query.cptQuery;\n    var dataQuery = query.dataQuery;\n    return check(cptQuery, model, 'mainType') && check(cptQuery, model, 'subType') && check(cptQuery, model, 'index', 'componentIndex') && check(cptQuery, model, 'name') && check(cptQuery, model, 'id') && check(dataQuery, packedEvent, 'name') && check(dataQuery, packedEvent, 'dataIndex') && check(dataQuery, packedEvent, 'dataType') && (!view.filterForExposedEvent || view.filterForExposedEvent(eventType, query.otherQuery, targetEl, packedEvent));\n\n    function check(query, host, prop, propOnHost) {\n      return query[prop] == null || host[propOnHost || prop] === query[prop];\n    }\n  };\n\n  ECEventProcessor.prototype.afterTrigger = function () {\n    // Make sure the eventInfo wont be used in next trigger.\n    this.eventInfo = null;\n  };\n\n  return ECEventProcessor;\n}();\n\nexports.ECEventProcessor = ECEventProcessor;\n;","map":{"version":3,"names":["ECEventProcessor","prototype","normalizeQuery","query","cptQuery","dataQuery","otherQuery","zrUtil","isString","condCptType","parseClassType","mainType","main","subType","sub","suffixes_1","dataKeys_1","name","dataIndex","dataType","each","val","key","reserved","i","length","propSuffix","suffixPos","lastIndexOf","slice","toLowerCase","hasOwnProperty","filter","eventType","eventInfo","targetEl","packedEvent","model","view","check","filterForExposedEvent","host","prop","propOnHost","afterTrigger"],"sources":["C:/Users/Z/Desktop/efficient/node_modules/echarts/lib/util/ECEventProcessor.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parseClassType } from './clazz.js';\n/**\n * Usage of query:\n * `chart.on('click', query, handler);`\n * The `query` can be:\n * + The component type query string, only `mainType` or `mainType.subType`,\n *   like: 'xAxis', 'series', 'xAxis.category' or 'series.line'.\n * + The component query object, like:\n *   `{seriesIndex: 2}`, `{seriesName: 'xx'}`, `{seriesId: 'some'}`,\n *   `{xAxisIndex: 2}`, `{xAxisName: 'xx'}`, `{xAxisId: 'some'}`.\n * + The data query object, like:\n *   `{dataIndex: 123}`, `{dataType: 'link'}`, `{name: 'some'}`.\n * + The other query object (cmponent customized query), like:\n *   `{element: 'some'}` (only available in custom series).\n *\n * Caveat: If a prop in the `query` object is `null/undefined`, it is the\n * same as there is no such prop in the `query` object.\n */\n\nvar ECEventProcessor =\n/** @class */\nfunction () {\n  function ECEventProcessor() {}\n\n  ECEventProcessor.prototype.normalizeQuery = function (query) {\n    var cptQuery = {};\n    var dataQuery = {};\n    var otherQuery = {}; // `query` is `mainType` or `mainType.subType` of component.\n\n    if (zrUtil.isString(query)) {\n      var condCptType = parseClassType(query); // `.main` and `.sub` may be ''.\n\n      cptQuery.mainType = condCptType.main || null;\n      cptQuery.subType = condCptType.sub || null;\n    } // `query` is an object, convert to {mainType, index, name, id}.\n    else {\n        // `xxxIndex`, `xxxName`, `xxxId`, `name`, `dataIndex`, `dataType` is reserved,\n        // can not be used in `compomentModel.filterForExposedEvent`.\n        var suffixes_1 = ['Index', 'Name', 'Id'];\n        var dataKeys_1 = {\n          name: 1,\n          dataIndex: 1,\n          dataType: 1\n        };\n        zrUtil.each(query, function (val, key) {\n          var reserved = false;\n\n          for (var i = 0; i < suffixes_1.length; i++) {\n            var propSuffix = suffixes_1[i];\n            var suffixPos = key.lastIndexOf(propSuffix);\n\n            if (suffixPos > 0 && suffixPos === key.length - propSuffix.length) {\n              var mainType = key.slice(0, suffixPos); // Consider `dataIndex`.\n\n              if (mainType !== 'data') {\n                cptQuery.mainType = mainType;\n                cptQuery[propSuffix.toLowerCase()] = val;\n                reserved = true;\n              }\n            }\n          }\n\n          if (dataKeys_1.hasOwnProperty(key)) {\n            dataQuery[key] = val;\n            reserved = true;\n          }\n\n          if (!reserved) {\n            otherQuery[key] = val;\n          }\n        });\n      }\n\n    return {\n      cptQuery: cptQuery,\n      dataQuery: dataQuery,\n      otherQuery: otherQuery\n    };\n  };\n\n  ECEventProcessor.prototype.filter = function (eventType, query) {\n    // They should be assigned before each trigger call.\n    var eventInfo = this.eventInfo;\n\n    if (!eventInfo) {\n      return true;\n    }\n\n    var targetEl = eventInfo.targetEl;\n    var packedEvent = eventInfo.packedEvent;\n    var model = eventInfo.model;\n    var view = eventInfo.view; // For event like 'globalout'.\n\n    if (!model || !view) {\n      return true;\n    }\n\n    var cptQuery = query.cptQuery;\n    var dataQuery = query.dataQuery;\n    return check(cptQuery, model, 'mainType') && check(cptQuery, model, 'subType') && check(cptQuery, model, 'index', 'componentIndex') && check(cptQuery, model, 'name') && check(cptQuery, model, 'id') && check(dataQuery, packedEvent, 'name') && check(dataQuery, packedEvent, 'dataIndex') && check(dataQuery, packedEvent, 'dataType') && (!view.filterForExposedEvent || view.filterForExposedEvent(eventType, query.otherQuery, targetEl, packedEvent));\n\n    function check(query, host, prop, propOnHost) {\n      return query[prop] == null || host[propOnHost || prop] === query[prop];\n    }\n  };\n\n  ECEventProcessor.prototype.afterTrigger = function () {\n    // Make sure the eventInfo wont be used in next trigger.\n    this.eventInfo = null;\n  };\n\n  return ECEventProcessor;\n}();\n\nexport { ECEventProcessor };\n;"],"mappings":"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"},"metadata":{},"sourceType":"script"}