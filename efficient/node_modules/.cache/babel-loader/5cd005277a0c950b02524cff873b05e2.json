{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nexports.getTime = getTime;\n\nvar _tslib = require(\"tslib\");\n\nvar _Eventful = _interopRequireDefault(require(\"../core/Eventful.js\"));\n\nvar _requestAnimationFrame = _interopRequireDefault(require(\"./requestAnimationFrame.js\"));\n\nvar _Animator = _interopRequireDefault(require(\"./Animator.js\"));\n\nfunction getTime() {\n  return new Date().getTime();\n}\n\nvar Animation = function (_super) {\n  (0, _tslib.__extends)(Animation, _super);\n\n  function Animation(opts) {\n    var _this = _super.call(this) || this;\n\n    _this._running = false;\n    _this._time = 0;\n    _this._pausedTime = 0;\n    _this._pauseStart = 0;\n    _this._paused = false;\n    opts = opts || {};\n    _this.stage = opts.stage || {};\n    return _this;\n  }\n\n  Animation.prototype.addClip = function (clip) {\n    if (clip.animation) {\n      this.removeClip(clip);\n    }\n\n    if (!this._head) {\n      this._head = this._tail = clip;\n    } else {\n      this._tail.next = clip;\n      clip.prev = this._tail;\n      clip.next = null;\n      this._tail = clip;\n    }\n\n    clip.animation = this;\n  };\n\n  Animation.prototype.addAnimator = function (animator) {\n    animator.animation = this;\n    var clip = animator.getClip();\n\n    if (clip) {\n      this.addClip(clip);\n    }\n  };\n\n  Animation.prototype.removeClip = function (clip) {\n    if (!clip.animation) {\n      return;\n    }\n\n    var prev = clip.prev;\n    var next = clip.next;\n\n    if (prev) {\n      prev.next = next;\n    } else {\n      this._head = next;\n    }\n\n    if (next) {\n      next.prev = prev;\n    } else {\n      this._tail = prev;\n    }\n\n    clip.next = clip.prev = clip.animation = null;\n  };\n\n  Animation.prototype.removeAnimator = function (animator) {\n    var clip = animator.getClip();\n\n    if (clip) {\n      this.removeClip(clip);\n    }\n\n    animator.animation = null;\n  };\n\n  Animation.prototype.update = function (notTriggerFrameAndStageUpdate) {\n    var time = getTime() - this._pausedTime;\n\n    var delta = time - this._time;\n    var clip = this._head;\n\n    while (clip) {\n      var nextClip = clip.next;\n      var finished = clip.step(time, delta);\n\n      if (finished) {\n        clip.ondestroy();\n        this.removeClip(clip);\n        clip = nextClip;\n      } else {\n        clip = nextClip;\n      }\n    }\n\n    this._time = time;\n\n    if (!notTriggerFrameAndStageUpdate) {\n      this.trigger('frame', delta);\n      this.stage.update && this.stage.update();\n    }\n  };\n\n  Animation.prototype._startLoop = function () {\n    var self = this;\n    this._running = true;\n\n    function step() {\n      if (self._running) {\n        (0, _requestAnimationFrame.default)(step);\n        !self._paused && self.update();\n      }\n    }\n\n    (0, _requestAnimationFrame.default)(step);\n  };\n\n  Animation.prototype.start = function () {\n    if (this._running) {\n      return;\n    }\n\n    this._time = getTime();\n    this._pausedTime = 0;\n\n    this._startLoop();\n  };\n\n  Animation.prototype.stop = function () {\n    this._running = false;\n  };\n\n  Animation.prototype.pause = function () {\n    if (!this._paused) {\n      this._pauseStart = getTime();\n      this._paused = true;\n    }\n  };\n\n  Animation.prototype.resume = function () {\n    if (this._paused) {\n      this._pausedTime += getTime() - this._pauseStart;\n      this._paused = false;\n    }\n  };\n\n  Animation.prototype.clear = function () {\n    var clip = this._head;\n\n    while (clip) {\n      var nextClip = clip.next;\n      clip.prev = clip.next = clip.animation = null;\n      clip = nextClip;\n    }\n\n    this._head = this._tail = null;\n  };\n\n  Animation.prototype.isFinished = function () {\n    return this._head == null;\n  };\n\n  Animation.prototype.animate = function (target, options) {\n    options = options || {};\n    this.start();\n    var animator = new _Animator.default(target, options.loop);\n    this.addAnimator(animator);\n    return animator;\n  };\n\n  return Animation;\n}(_Eventful.default);\n\nvar _default = Animation;\nexports.default = _default;","map":{"version":3,"names":["getTime","Date","Animation","_super","__extends","opts","_this","call","_running","_time","_pausedTime","_pauseStart","_paused","stage","prototype","addClip","clip","animation","removeClip","_head","_tail","next","prev","addAnimator","animator","getClip","removeAnimator","update","notTriggerFrameAndStageUpdate","time","delta","nextClip","finished","step","ondestroy","trigger","_startLoop","self","requestAnimationFrame","start","stop","pause","resume","clear","isFinished","animate","target","options","Animator","loop","Eventful"],"sources":["C:/Users/Z/Desktop/efficient/node_modules/zrender/lib/animation/Animation.js"],"sourcesContent":["import { __extends } from \"tslib\";\nimport Eventful from '../core/Eventful.js';\nimport requestAnimationFrame from './requestAnimationFrame.js';\nimport Animator from './Animator.js';\nexport function getTime() {\n    return new Date().getTime();\n}\nvar Animation = (function (_super) {\n    __extends(Animation, _super);\n    function Animation(opts) {\n        var _this = _super.call(this) || this;\n        _this._running = false;\n        _this._time = 0;\n        _this._pausedTime = 0;\n        _this._pauseStart = 0;\n        _this._paused = false;\n        opts = opts || {};\n        _this.stage = opts.stage || {};\n        return _this;\n    }\n    Animation.prototype.addClip = function (clip) {\n        if (clip.animation) {\n            this.removeClip(clip);\n        }\n        if (!this._head) {\n            this._head = this._tail = clip;\n        }\n        else {\n            this._tail.next = clip;\n            clip.prev = this._tail;\n            clip.next = null;\n            this._tail = clip;\n        }\n        clip.animation = this;\n    };\n    Animation.prototype.addAnimator = function (animator) {\n        animator.animation = this;\n        var clip = animator.getClip();\n        if (clip) {\n            this.addClip(clip);\n        }\n    };\n    Animation.prototype.removeClip = function (clip) {\n        if (!clip.animation) {\n            return;\n        }\n        var prev = clip.prev;\n        var next = clip.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            this._head = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            this._tail = prev;\n        }\n        clip.next = clip.prev = clip.animation = null;\n    };\n    Animation.prototype.removeAnimator = function (animator) {\n        var clip = animator.getClip();\n        if (clip) {\n            this.removeClip(clip);\n        }\n        animator.animation = null;\n    };\n    Animation.prototype.update = function (notTriggerFrameAndStageUpdate) {\n        var time = getTime() - this._pausedTime;\n        var delta = time - this._time;\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            var finished = clip.step(time, delta);\n            if (finished) {\n                clip.ondestroy();\n                this.removeClip(clip);\n                clip = nextClip;\n            }\n            else {\n                clip = nextClip;\n            }\n        }\n        this._time = time;\n        if (!notTriggerFrameAndStageUpdate) {\n            this.trigger('frame', delta);\n            this.stage.update && this.stage.update();\n        }\n    };\n    Animation.prototype._startLoop = function () {\n        var self = this;\n        this._running = true;\n        function step() {\n            if (self._running) {\n                requestAnimationFrame(step);\n                !self._paused && self.update();\n            }\n        }\n        requestAnimationFrame(step);\n    };\n    Animation.prototype.start = function () {\n        if (this._running) {\n            return;\n        }\n        this._time = getTime();\n        this._pausedTime = 0;\n        this._startLoop();\n    };\n    Animation.prototype.stop = function () {\n        this._running = false;\n    };\n    Animation.prototype.pause = function () {\n        if (!this._paused) {\n            this._pauseStart = getTime();\n            this._paused = true;\n        }\n    };\n    Animation.prototype.resume = function () {\n        if (this._paused) {\n            this._pausedTime += getTime() - this._pauseStart;\n            this._paused = false;\n        }\n    };\n    Animation.prototype.clear = function () {\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            clip.prev = clip.next = clip.animation = null;\n            clip = nextClip;\n        }\n        this._head = this._tail = null;\n    };\n    Animation.prototype.isFinished = function () {\n        return this._head == null;\n    };\n    Animation.prototype.animate = function (target, options) {\n        options = options || {};\n        this.start();\n        var animator = new Animator(target, options.loop);\n        this.addAnimator(animator);\n        return animator;\n    };\n    return Animation;\n}(Eventful));\nexport default Animation;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}