{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\n\nvar _interopRequireWildcard = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireWildcard.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _tslib = require(\"tslib\");\n\nvar zrUtil = _interopRequireWildcard(require(\"zrender/lib/core/util.js\"));\n\nvar _color = require(\"zrender/lib/tool/color.js\");\n\nvar graphic = _interopRequireWildcard(require(\"../../util/graphic.js\"));\n\nvar _states = require(\"../../util/states.js\");\n\nvar _labelStyle = require(\"../../label/labelStyle.js\");\n\nvar _listComponent = require(\"../helper/listComponent.js\");\n\nvar layoutUtil = _interopRequireWildcard(require(\"../../util/layout.js\"));\n\nvar _Component = _interopRequireDefault(require(\"../../view/Component.js\"));\n\nvar _symbol = require(\"../../util/symbol.js\");\n\nvar _decal = require(\"../../util/decal.js\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\n\nvar LegendView =\n/** @class */\nfunction (_super) {\n  (0, _tslib.__extends)(LegendView, _super);\n\n  function LegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LegendView.type;\n    _this.newlineDisabled = false;\n    return _this;\n  }\n\n  LegendView.prototype.init = function () {\n    this.group.add(this._contentGroup = new Group());\n    this.group.add(this._selectorGroup = new Group());\n    this._isFirstRender = true;\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.getContentGroup = function () {\n    return this._contentGroup;\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.getSelectorGroup = function () {\n    return this._selectorGroup;\n  };\n  /**\n   * @override\n   */\n\n\n  LegendView.prototype.render = function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    } // selector has been normalized to an array in model\n\n\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition); // Perform layout.\n\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition); // Place mainGroup, based on the calculated `mainRect`.\n\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.x = layoutRect.x - mainRect.x;\n    this.group.y = layoutRect.y - mainRect.y;\n    this.group.markRedraw(); // Render background after group is layout.\n\n    this.group.add(this._backgroundEl = (0, _listComponent.makeBackground)(mainRect, legendModel));\n  };\n\n  LegendView.prototype.resetInner = function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  };\n\n  LegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (legendItemModel, dataIndex) {\n      var name = legendItemModel.get('name'); // Use empty string or \\n as a newline string\n\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        var g = new Group(); // @ts-ignore\n\n        g.newline = true;\n        contentGroup.add(g);\n        return;\n      } // Representitive series.\n\n\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n\n      if (legendDrawnMap.get(name)) {\n        // Have been drawed\n        return;\n      } // Legend to control series.\n\n\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var lineVisualStyle = data.getVisual('legendLineStyle') || {};\n        var legendIcon = data.getVisual('legendIcon');\n        /**\n         * `data.getVisual('style')` may be the color from the register\n         * in series. For example, for line series,\n         */\n\n        var style = data.getVisual('style');\n\n        var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, style, legendIcon, selectMode, api);\n\n        itemGroup.on('click', curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        legendDrawnMap.set(name, true);\n      } else {\n        // Legend to control data. In pie and funnel.\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n\n          if (seriesModel.legendVisualProvider) {\n            var provider = seriesModel.legendVisualProvider;\n\n            if (!provider.containName(name)) {\n              return;\n            }\n\n            var idx = provider.indexOfName(name);\n            var style = provider.getItemVisual(idx, 'style');\n            var legendIcon = provider.getItemVisual(idx, 'legendIcon');\n            var colorArr = (0, _color.parse)(style.fill); // Color may be set to transparent in visualMap when data is out of range.\n            // Do not show nothing.\n\n            if (colorArr && colorArr[3] === 0) {\n              colorArr[3] = 0.2; // TODO color is set to 0, 0, 0, 0. Should show correct RGBA\n\n              style = zrUtil.extend(zrUtil.extend({}, style), {\n                fill: (0, _color.stringify)(colorArr, 'rgba')\n              });\n            }\n\n            var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, {}, style, legendIcon, selectMode, api); // FIXME: consider different series has items with the same name.\n\n\n            itemGroup.on('click', curry(dispatchSelectAction, null, name, api, excludeSeriesId)) // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!legendDrawnMap.get(name)) {\n          console.warn(name + ' series not exists. Legend data should be same with series name or data name.');\n        }\n      }\n    }, this);\n\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  };\n\n  LegendView.prototype._createSelector = function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function () {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect'\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel(['emphasis', 'selectorLabel']);\n      (0, _labelStyle.setLabelStyle)(labelText, {\n        normal: labelModel,\n        emphasis: emphasisLabelModel\n      }, {\n        defaultText: selectorItem.title\n      });\n      (0, _states.enableHoverEmphasis)(labelText);\n    });\n  };\n\n  LegendView.prototype._createItem = function (seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, itemVisualStyle, legendIcon, selectMode, api) {\n    var drawType = seriesModel.visualDrawType;\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var isSelected = legendModel.isSelected(name);\n    var iconRotate = legendItemModel.get('symbolRotate');\n    var symbolKeepAspect = legendItemModel.get('symbolKeepAspect');\n    var legendIconType = legendItemModel.get('icon');\n    legendIcon = legendIconType || legendIcon || 'roundRect';\n    var style = getLegendStyle(legendIcon, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api);\n    var itemGroup = new Group();\n    var textStyleModel = legendItemModel.getModel('textStyle');\n\n    if (zrUtil.isFunction(seriesModel.getLegendIcon) && (!legendIconType || legendIconType === 'inherit')) {\n      // Series has specific way to define legend icon\n      itemGroup.add(seriesModel.getLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: iconRotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    } else {\n      // Use default legend icon policy for most series\n      var rotate = legendIconType === 'inherit' && seriesModel.getData().getVisual('symbol') ? iconRotate === 'inherit' ? seriesModel.getData().getVisual('symbolRotate') : iconRotate : 0; // No rotation for no icon\n\n      itemGroup.add(getDefaultLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: rotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    }\n\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n\n    if (zrUtil.isString(formatter) && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (zrUtil.isFunction(formatter)) {\n      content = formatter(name);\n    }\n\n    var inactiveColor = legendItemModel.get('inactiveColor');\n    itemGroup.add(new graphic.Text({\n      style: (0, _labelStyle.createTextStyle)(textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        fill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n        align: textAlign,\n        verticalAlign: 'middle'\n      })\n    })); // Add a invisible rect to increase the area of mouse hover\n\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      invisible: true\n    });\n    var tooltipModel = legendItemModel.getModel('tooltip');\n\n    if (tooltipModel.get('show')) {\n      graphic.setTooltipConfig({\n        el: hitRect,\n        componentModel: legendModel,\n        itemName: name,\n        itemTooltipOption: tooltipModel.option\n      });\n    }\n\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    (0, _states.enableHoverEmphasis)(itemGroup); // @ts-ignore\n\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  };\n\n  LegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup(); // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n    selectorGroup.markRedraw();\n    contentGroup.markRedraw();\n\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      } //Always align selector to content as 'middle'\n\n\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      return this.group.getBoundingRect();\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.remove = function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  };\n\n  LegendView.type = 'legend.plain';\n  return LegendView;\n}(_Component.default);\n\nfunction getLegendStyle(iconType, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api) {\n  /**\n   * Use series style if is inherit;\n   * elsewise, use legend style\n   */\n  function handleCommonProps(style, visualStyle) {\n    // If lineStyle.width is 'auto', it is set to be 2 if series has border\n    if (style.lineWidth === 'auto') {\n      style.lineWidth = visualStyle.lineWidth > 0 ? 2 : 0;\n    }\n\n    each(style, function (propVal, propName) {\n      style[propName] === 'inherit' && (style[propName] = visualStyle[propName]);\n    });\n  } // itemStyle\n\n\n  var itemStyleModel = legendItemModel.getModel('itemStyle');\n  var itemStyle = itemStyleModel.getItemStyle();\n  var iconBrushType = iconType.lastIndexOf('empty', 0) === 0 ? 'fill' : 'stroke';\n  var decalStyle = itemStyleModel.getShallow('decal');\n  itemStyle.decal = !decalStyle || decalStyle === 'inherit' ? itemVisualStyle.decal : (0, _decal.createOrUpdatePatternFromDecal)(decalStyle, api);\n\n  if (itemStyle.fill === 'inherit') {\n    /**\n     * Series with visualDrawType as 'stroke' should have\n     * series stroke as legend fill\n     */\n    itemStyle.fill = itemVisualStyle[drawType];\n  }\n\n  if (itemStyle.stroke === 'inherit') {\n    /**\n     * icon type with \"emptyXXX\" should use fill color\n     * in visual style\n     */\n    itemStyle.stroke = itemVisualStyle[iconBrushType];\n  }\n\n  if (itemStyle.opacity === 'inherit') {\n    /**\n     * Use lineStyle.opacity if drawType is stroke\n     */\n    itemStyle.opacity = (drawType === 'fill' ? itemVisualStyle : lineVisualStyle).opacity;\n  }\n\n  handleCommonProps(itemStyle, itemVisualStyle); // lineStyle\n\n  var legendLineModel = legendItemModel.getModel('lineStyle');\n  var lineStyle = legendLineModel.getLineStyle();\n  handleCommonProps(lineStyle, lineVisualStyle); // Fix auto color to real color\n\n  itemStyle.fill === 'auto' && (itemStyle.fill = itemVisualStyle.fill);\n  itemStyle.stroke === 'auto' && (itemStyle.stroke = itemVisualStyle.fill);\n  lineStyle.stroke === 'auto' && (lineStyle.stroke = itemVisualStyle.fill);\n\n  if (!isSelected) {\n    var borderWidth = legendItemModel.get('inactiveBorderWidth');\n    /**\n     * Since stroke is set to be inactiveBorderColor, it may occur that\n     * there is no border in series but border in legend, so we need to\n     * use border only when series has border if is set to be auto\n     */\n\n    var visualHasBorder = itemStyle[iconBrushType];\n    itemStyle.lineWidth = borderWidth === 'auto' ? itemVisualStyle.lineWidth > 0 && visualHasBorder ? 2 : 0 : itemStyle.lineWidth;\n    itemStyle.fill = legendItemModel.get('inactiveColor');\n    itemStyle.stroke = legendItemModel.get('inactiveBorderColor');\n    lineStyle.stroke = legendLineModel.get('inactiveColor');\n    lineStyle.lineWidth = legendLineModel.get('inactiveWidth');\n  }\n\n  return {\n    itemStyle: itemStyle,\n    lineStyle: lineStyle\n  };\n}\n\nfunction getDefaultLegendIcon(opt) {\n  var symboType = opt.icon || 'roundRect';\n  var icon = (0, _symbol.createSymbol)(symboType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill, opt.symbolKeepAspect);\n  icon.setStyle(opt.itemStyle);\n  icon.rotation = (opt.iconRotate || 0) * Math.PI / 180;\n  icon.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n\n  if (symboType.indexOf('empty') > -1) {\n    icon.style.stroke = icon.style.fill;\n    icon.style.fill = '#fff';\n    icon.style.lineWidth = 2;\n  }\n\n  return icon;\n}\n\nfunction dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n  // downplay before unselect\n  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: seriesName != null ? seriesName : dataName\n  }); // highlight after select\n  // TODO higlight immediately may cause animation loss.\n\n  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n}\n\nfunction isUseHoverLayer(api) {\n  var list = api.getZr().storage.getDisplayList();\n  var emphasisState;\n  var i = 0;\n  var len = list.length;\n\n  while (i < len && !(emphasisState = list[i].states.emphasis)) {\n    i++;\n  }\n\n  return emphasisState && emphasisState.hoverLayer;\n}\n\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nvar _default = LegendView;\nexports.default = _default;","map":{"version":3,"names":["curry","zrUtil","each","Group","graphic","LegendView","_super","__extends","_this","apply","arguments","type","newlineDisabled","prototype","init","group","add","_contentGroup","_selectorGroup","_isFirstRender","getContentGroup","getSelectorGroup","render","legendModel","ecModel","api","isFirstRender","resetInner","get","itemAlign","orient","selector","selectorPosition","renderInner","positionInfo","getBoxLayoutParams","viewportSize","width","getWidth","height","getHeight","padding","maxSize","layoutUtil","getLayoutRect","mainRect","layoutInner","layoutRect","defaults","x","y","markRedraw","_backgroundEl","makeBackground","removeAll","remove","contentGroup","legendDrawnMap","createHashMap","selectMode","excludeSeriesId","eachRawSeries","seriesModel","push","id","getData","legendItemModel","dataIndex","name","g","newline","getSeriesByName","data","lineVisualStyle","getVisual","legendIcon","style","itemGroup","_createItem","on","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","set","legendVisualProvider","provider","containName","idx","indexOfName","getItemVisual","colorArr","parse","fill","extend","stringify","process","env","NODE_ENV","console","warn","_createSelector","selectorGroup","createSelectorButton","selectorItem","labelText","Text","align","verticalAlign","onclick","dispatchAction","labelModel","getModel","emphasisLabelModel","setLabelStyle","normal","emphasis","defaultText","title","enableHoverEmphasis","itemVisualStyle","drawType","visualDrawType","itemWidth","itemHeight","isSelected","iconRotate","symbolKeepAspect","legendIconType","getLegendStyle","textStyleModel","isFunction","getLegendIcon","icon","itemStyle","lineStyle","rotate","getDefaultLegendIcon","textX","textAlign","formatter","content","isString","replace","inactiveColor","createTextStyle","text","getTextColor","hitRect","Rect","shape","getBoundingRect","invisible","tooltipModel","setTooltipConfig","el","componentModel","itemName","itemTooltipOption","option","eachChild","child","silent","__legendDataIndex","box","contentRect","contentPos","selectorRect","selectorPos","selectorButtonGap","orientIdx","getOrient","index","wh","hw","yx","Math","max","min","ComponentView","iconType","handleCommonProps","visualStyle","lineWidth","propVal","propName","itemStyleModel","getItemStyle","iconBrushType","lastIndexOf","decalStyle","getShallow","decal","createOrUpdatePatternFromDecal","stroke","opacity","legendLineModel","getLineStyle","borderWidth","visualHasBorder","opt","symboType","createSymbol","setStyle","rotation","PI","setOrigin","indexOf","seriesName","dataName","isUseHoverLayer","list","getZr","storage","getDisplayList","emphasisState","i","len","length","states","hoverLayer"],"sources":["C:/Users/Z/Desktop/efficient/node_modules/echarts/lib/component/legend/LegendView.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parse, stringify } from 'zrender/lib/tool/color.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enableHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, createTextStyle } from '../../label/labelStyle.js';\nimport { makeBackground } from '../helper/listComponent.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport ComponentView from '../../view/Component.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\n\nvar LegendView =\n/** @class */\nfunction (_super) {\n  __extends(LegendView, _super);\n\n  function LegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LegendView.type;\n    _this.newlineDisabled = false;\n    return _this;\n  }\n\n  LegendView.prototype.init = function () {\n    this.group.add(this._contentGroup = new Group());\n    this.group.add(this._selectorGroup = new Group());\n    this._isFirstRender = true;\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.getContentGroup = function () {\n    return this._contentGroup;\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.getSelectorGroup = function () {\n    return this._selectorGroup;\n  };\n  /**\n   * @override\n   */\n\n\n  LegendView.prototype.render = function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    } // selector has been normalized to an array in model\n\n\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition); // Perform layout.\n\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition); // Place mainGroup, based on the calculated `mainRect`.\n\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.x = layoutRect.x - mainRect.x;\n    this.group.y = layoutRect.y - mainRect.y;\n    this.group.markRedraw(); // Render background after group is layout.\n\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  };\n\n  LegendView.prototype.resetInner = function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  };\n\n  LegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (legendItemModel, dataIndex) {\n      var name = legendItemModel.get('name'); // Use empty string or \\n as a newline string\n\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        var g = new Group(); // @ts-ignore\n\n        g.newline = true;\n        contentGroup.add(g);\n        return;\n      } // Representitive series.\n\n\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n\n      if (legendDrawnMap.get(name)) {\n        // Have been drawed\n        return;\n      } // Legend to control series.\n\n\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var lineVisualStyle = data.getVisual('legendLineStyle') || {};\n        var legendIcon = data.getVisual('legendIcon');\n        /**\n         * `data.getVisual('style')` may be the color from the register\n         * in series. For example, for line series,\n         */\n\n        var style = data.getVisual('style');\n\n        var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, style, legendIcon, selectMode, api);\n\n        itemGroup.on('click', curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        legendDrawnMap.set(name, true);\n      } else {\n        // Legend to control data. In pie and funnel.\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n\n          if (seriesModel.legendVisualProvider) {\n            var provider = seriesModel.legendVisualProvider;\n\n            if (!provider.containName(name)) {\n              return;\n            }\n\n            var idx = provider.indexOfName(name);\n            var style = provider.getItemVisual(idx, 'style');\n            var legendIcon = provider.getItemVisual(idx, 'legendIcon');\n            var colorArr = parse(style.fill); // Color may be set to transparent in visualMap when data is out of range.\n            // Do not show nothing.\n\n            if (colorArr && colorArr[3] === 0) {\n              colorArr[3] = 0.2; // TODO color is set to 0, 0, 0, 0. Should show correct RGBA\n\n              style = zrUtil.extend(zrUtil.extend({}, style), {\n                fill: stringify(colorArr, 'rgba')\n              });\n            }\n\n            var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, {}, style, legendIcon, selectMode, api); // FIXME: consider different series has items with the same name.\n\n\n            itemGroup.on('click', curry(dispatchSelectAction, null, name, api, excludeSeriesId)) // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!legendDrawnMap.get(name)) {\n          console.warn(name + ' series not exists. Legend data should be same with series name or data name.');\n        }\n      }\n    }, this);\n\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  };\n\n  LegendView.prototype._createSelector = function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function () {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect'\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel(['emphasis', 'selectorLabel']);\n      setLabelStyle(labelText, {\n        normal: labelModel,\n        emphasis: emphasisLabelModel\n      }, {\n        defaultText: selectorItem.title\n      });\n      enableHoverEmphasis(labelText);\n    });\n  };\n\n  LegendView.prototype._createItem = function (seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, itemVisualStyle, legendIcon, selectMode, api) {\n    var drawType = seriesModel.visualDrawType;\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var isSelected = legendModel.isSelected(name);\n    var iconRotate = legendItemModel.get('symbolRotate');\n    var symbolKeepAspect = legendItemModel.get('symbolKeepAspect');\n    var legendIconType = legendItemModel.get('icon');\n    legendIcon = legendIconType || legendIcon || 'roundRect';\n    var style = getLegendStyle(legendIcon, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api);\n    var itemGroup = new Group();\n    var textStyleModel = legendItemModel.getModel('textStyle');\n\n    if (zrUtil.isFunction(seriesModel.getLegendIcon) && (!legendIconType || legendIconType === 'inherit')) {\n      // Series has specific way to define legend icon\n      itemGroup.add(seriesModel.getLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: iconRotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    } else {\n      // Use default legend icon policy for most series\n      var rotate = legendIconType === 'inherit' && seriesModel.getData().getVisual('symbol') ? iconRotate === 'inherit' ? seriesModel.getData().getVisual('symbolRotate') : iconRotate : 0; // No rotation for no icon\n\n      itemGroup.add(getDefaultLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: rotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    }\n\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n\n    if (zrUtil.isString(formatter) && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (zrUtil.isFunction(formatter)) {\n      content = formatter(name);\n    }\n\n    var inactiveColor = legendItemModel.get('inactiveColor');\n    itemGroup.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        fill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n        align: textAlign,\n        verticalAlign: 'middle'\n      })\n    })); // Add a invisible rect to increase the area of mouse hover\n\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      invisible: true\n    });\n    var tooltipModel = legendItemModel.getModel('tooltip');\n\n    if (tooltipModel.get('show')) {\n      graphic.setTooltipConfig({\n        el: hitRect,\n        componentModel: legendModel,\n        itemName: name,\n        itemTooltipOption: tooltipModel.option\n      });\n    }\n\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    enableHoverEmphasis(itemGroup); // @ts-ignore\n\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  };\n\n  LegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup(); // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n    selectorGroup.markRedraw();\n    contentGroup.markRedraw();\n\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      } //Always align selector to content as 'middle'\n\n\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      return this.group.getBoundingRect();\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.remove = function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  };\n\n  LegendView.type = 'legend.plain';\n  return LegendView;\n}(ComponentView);\n\nfunction getLegendStyle(iconType, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api) {\n  /**\n   * Use series style if is inherit;\n   * elsewise, use legend style\n   */\n  function handleCommonProps(style, visualStyle) {\n    // If lineStyle.width is 'auto', it is set to be 2 if series has border\n    if (style.lineWidth === 'auto') {\n      style.lineWidth = visualStyle.lineWidth > 0 ? 2 : 0;\n    }\n\n    each(style, function (propVal, propName) {\n      style[propName] === 'inherit' && (style[propName] = visualStyle[propName]);\n    });\n  } // itemStyle\n\n\n  var itemStyleModel = legendItemModel.getModel('itemStyle');\n  var itemStyle = itemStyleModel.getItemStyle();\n  var iconBrushType = iconType.lastIndexOf('empty', 0) === 0 ? 'fill' : 'stroke';\n  var decalStyle = itemStyleModel.getShallow('decal');\n  itemStyle.decal = !decalStyle || decalStyle === 'inherit' ? itemVisualStyle.decal : createOrUpdatePatternFromDecal(decalStyle, api);\n\n  if (itemStyle.fill === 'inherit') {\n    /**\n     * Series with visualDrawType as 'stroke' should have\n     * series stroke as legend fill\n     */\n    itemStyle.fill = itemVisualStyle[drawType];\n  }\n\n  if (itemStyle.stroke === 'inherit') {\n    /**\n     * icon type with \"emptyXXX\" should use fill color\n     * in visual style\n     */\n    itemStyle.stroke = itemVisualStyle[iconBrushType];\n  }\n\n  if (itemStyle.opacity === 'inherit') {\n    /**\n     * Use lineStyle.opacity if drawType is stroke\n     */\n    itemStyle.opacity = (drawType === 'fill' ? itemVisualStyle : lineVisualStyle).opacity;\n  }\n\n  handleCommonProps(itemStyle, itemVisualStyle); // lineStyle\n\n  var legendLineModel = legendItemModel.getModel('lineStyle');\n  var lineStyle = legendLineModel.getLineStyle();\n  handleCommonProps(lineStyle, lineVisualStyle); // Fix auto color to real color\n\n  itemStyle.fill === 'auto' && (itemStyle.fill = itemVisualStyle.fill);\n  itemStyle.stroke === 'auto' && (itemStyle.stroke = itemVisualStyle.fill);\n  lineStyle.stroke === 'auto' && (lineStyle.stroke = itemVisualStyle.fill);\n\n  if (!isSelected) {\n    var borderWidth = legendItemModel.get('inactiveBorderWidth');\n    /**\n     * Since stroke is set to be inactiveBorderColor, it may occur that\n     * there is no border in series but border in legend, so we need to\n     * use border only when series has border if is set to be auto\n     */\n\n    var visualHasBorder = itemStyle[iconBrushType];\n    itemStyle.lineWidth = borderWidth === 'auto' ? itemVisualStyle.lineWidth > 0 && visualHasBorder ? 2 : 0 : itemStyle.lineWidth;\n    itemStyle.fill = legendItemModel.get('inactiveColor');\n    itemStyle.stroke = legendItemModel.get('inactiveBorderColor');\n    lineStyle.stroke = legendLineModel.get('inactiveColor');\n    lineStyle.lineWidth = legendLineModel.get('inactiveWidth');\n  }\n\n  return {\n    itemStyle: itemStyle,\n    lineStyle: lineStyle\n  };\n}\n\nfunction getDefaultLegendIcon(opt) {\n  var symboType = opt.icon || 'roundRect';\n  var icon = createSymbol(symboType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill, opt.symbolKeepAspect);\n  icon.setStyle(opt.itemStyle);\n  icon.rotation = (opt.iconRotate || 0) * Math.PI / 180;\n  icon.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n\n  if (symboType.indexOf('empty') > -1) {\n    icon.style.stroke = icon.style.fill;\n    icon.style.fill = '#fff';\n    icon.style.lineWidth = 2;\n  }\n\n  return icon;\n}\n\nfunction dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n  // downplay before unselect\n  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: seriesName != null ? seriesName : dataName\n  }); // highlight after select\n  // TODO higlight immediately may cause animation loss.\n\n  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n}\n\nfunction isUseHoverLayer(api) {\n  var list = api.getZr().storage.getDisplayList();\n  var emphasisState;\n  var i = 0;\n  var len = list.length;\n\n  while (i < len && !(emphasisState = list[i].states.emphasis)) {\n    i++;\n  }\n\n  return emphasisState && emphasisState.hoverLayer;\n}\n\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nexport default LegendView;"],"mappings":"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"},"metadata":{},"sourceType":"script"}