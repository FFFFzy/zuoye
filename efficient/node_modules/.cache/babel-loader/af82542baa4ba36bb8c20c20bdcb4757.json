{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\n\nvar _interopRequireWildcard = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireWildcard.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _tslib = require(\"tslib\");\n\nvar zrUtil = _interopRequireWildcard(require(\"zrender/lib/core/util.js\"));\n\nvar textContain = _interopRequireWildcard(require(\"zrender/lib/contain/text.js\"));\n\nvar graphic = _interopRequireWildcard(require(\"../../util/graphic.js\"));\n\nvar _states = require(\"../../util/states.js\");\n\nvar _Model = _interopRequireDefault(require(\"../../model/Model.js\"));\n\nvar _DataDiffer = _interopRequireDefault(require(\"../../data/DataDiffer.js\"));\n\nvar listComponentHelper = _interopRequireWildcard(require(\"../helper/listComponent.js\"));\n\nvar _Component = _interopRequireDefault(require(\"../../view/Component.js\"));\n\nvar _featureManager = require(\"./featureManager.js\");\n\nvar _component = require(\"../../util/component.js\");\n\nvar _Text = _interopRequireDefault(require(\"zrender/lib/graphic/Text.js\"));\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar ToolboxView =\n/** @class */\nfunction (_super) {\n  (0, _tslib.__extends)(ToolboxView, _super);\n\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n\n    var itemSize = +toolboxModel.get('itemSize');\n    var isVertical = toolboxModel.get('orient') === 'vertical';\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new _DataDiffer.default(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute(); // Keep for diff.\n\n    this._featureNames = featureNames;\n\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new _Model.default(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature; // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = (0, _featureManager.getFeature)(featureName);\n\n          if (!Feature) {\n            return;\n          }\n\n          feature = new Feature();\n        }\n\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName]; // If feature does not exsit.\n\n        if (!feature) {\n          return;\n        }\n      }\n\n      feature.uid = (0, _component.getUID)('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n      var isToolboxFeature = feature instanceof _featureManager.ToolboxFeature;\n\n      if (!featureName && oldName) {\n        isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n\n      if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n        isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n\n      createIconPaths(featureModel, feature, featureName);\n\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? _states.enterEmphasis : _states.leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n\n      if (feature instanceof _featureManager.ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']); // If one feature has mutiple icon. they are orginaized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n\n      var icons = feature instanceof _featureManager.ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n\n      if (zrUtil.isString(icons)) {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n\n      if (zrUtil.isString(titles)) {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle(); // Text position calculation\n\n        var textContent = new _Text.default({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        graphic.setTooltipConfig({\n          el: path,\n          componentModel: toolboxModel,\n          itemName: iconName,\n          formatterParamsExtra: {\n            title: titlesMap[iconName]\n          }\n        });\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = isVertical ? toolboxModel.get('right') == null && toolboxModel.get('left') !== 'right' ? 'right' : 'left' : toolboxModel.get('bottom') == null && toolboxModel.get('top') !== 'bottom' ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle'); // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n\n          api.enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            api.leaveEmphasis(this);\n          }\n\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? _states.enterEmphasis : _states.leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n\n    listComponentHelper.layout(group, toolboxModel, api); // Render background after group is layout\n    // FIXME\n\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n    isVertical || group.eachChild(function (icon) {\n      var titleText = icon.__title; // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.ensureState('emphasis'); // May be background element\n\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, _Text.default.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 10;\n\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof _featureManager.ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  }; // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n\n\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof _featureManager.ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof _featureManager.ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(_Component.default);\n\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\n\nvar _default = ToolboxView;\nexports.default = _default;","map":{"version":3,"names":["ToolboxView","_super","__extends","apply","arguments","prototype","render","toolboxModel","ecModel","api","payload","group","removeAll","get","itemSize","isVertical","featureOpts","features","_features","featureNames","zrUtil","each","opt","name","push","DataDiffer","_featureNames","add","processFeature","update","remove","curry","execute","newIndex","oldIndex","featureName","oldName","featureOpt","featureModel","Model","feature","newTitle","title","isUserFeatureName","onclick","option","Feature","getFeature","uid","getUID","model","isToolboxFeature","ToolboxFeature","dispose","unusable","createIconPaths","setIconStatus","iconName","status","iconPaths","iconStatus","enterEmphasis","leaveEmphasis","iconStyleModel","getModel","iconStyleEmphasisModel","icons","getIcons","titles","iconsMap","titlesMap","isString","iconStr","path","graphic","createIcon","x","y","width","height","setStyle","getItemStyle","pathEmphasisState","ensureState","style","textContent","ZRText","text","align","borderRadius","padding","fill","ignore","setTextContent","setTooltipConfig","el","componentModel","itemName","formatterParamsExtra","__title","on","hoverStyle","defaultTextPosition","stroke","backgroundColor","setTextConfig","position","hide","bind","listComponentHelper","layout","makeBackground","getBoundingRect","eachChild","icon","titleText","emphasisState","emphasisTextConfig","textConfig","getTextContent","emphasisTextState","isFunction","emphasisTextStyle","rect","textContain","makeFont","offsetX","offsetY","needPutOnTop","getHeight","topOffset","getWidth","updateView","type","ComponentView","indexOf"],"sources":["C:/Users/Z/Desktop/efficient/node_modules/echarts/lib/component/toolbox/ToolboxView.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states.js';\nimport Model from '../../model/Model.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport * as listComponentHelper from '../helper/listComponent.js';\nimport ComponentView from '../../view/Component.js';\nimport { ToolboxFeature, getFeature } from './featureManager.js';\nimport { getUID } from '../../util/component.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\n\nvar ToolboxView =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxView, _super);\n\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n\n    var itemSize = +toolboxModel.get('itemSize');\n    var isVertical = toolboxModel.get('orient') === 'vertical';\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute(); // Keep for diff.\n\n    this._featureNames = featureNames;\n\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature; // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n\n          if (!Feature) {\n            return;\n          }\n\n          feature = new Feature();\n        }\n\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName]; // If feature does not exsit.\n\n        if (!feature) {\n          return;\n        }\n      }\n\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n      var isToolboxFeature = feature instanceof ToolboxFeature;\n\n      if (!featureName && oldName) {\n        isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n\n      if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n        isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n\n      createIconPaths(featureModel, feature, featureName);\n\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']); // If one feature has mutiple icon. they are orginaized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n\n      if (zrUtil.isString(icons)) {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n\n      if (zrUtil.isString(titles)) {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle(); // Text position calculation\n\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        graphic.setTooltipConfig({\n          el: path,\n          componentModel: toolboxModel,\n          itemName: iconName,\n          formatterParamsExtra: {\n            title: titlesMap[iconName]\n          }\n        });\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = isVertical ? toolboxModel.get('right') == null && toolboxModel.get('left') !== 'right' ? 'right' : 'left' : toolboxModel.get('bottom') == null && toolboxModel.get('top') !== 'bottom' ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle'); // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n\n          api.enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            api.leaveEmphasis(this);\n          }\n\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n\n    listComponentHelper.layout(group, toolboxModel, api); // Render background after group is layout\n    // FIXME\n\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n    isVertical || group.eachChild(function (icon) {\n      var titleText = icon.__title; // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.ensureState('emphasis'); // May be background element\n\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 10;\n\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  }; // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n\n\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\n\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\n\nexport default ToolboxView;"],"mappings":"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"},"metadata":{},"sourceType":"script"}