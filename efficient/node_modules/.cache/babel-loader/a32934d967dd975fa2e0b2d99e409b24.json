{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Z/Desktop/efficient/efficient/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.adjustTextX = adjustTextX;\nexports.adjustTextY = adjustTextY;\nexports.calculateTextPosition = calculateTextPosition;\nexports.getBoundingRect = getBoundingRect;\nexports.getLineHeight = getLineHeight;\nexports.getWidth = getWidth;\nexports.innerGetBoundingRect = innerGetBoundingRect;\nexports.measureText = measureText;\nexports.parsePercent = parsePercent;\n\nvar _BoundingRect = _interopRequireDefault(require(\"../core/BoundingRect.js\"));\n\nvar _LRU = _interopRequireDefault(require(\"../core/LRU.js\"));\n\nvar _platform = require(\"../core/platform.js\");\n\nvar textWidthCache = {};\n\nfunction getWidth(text, font) {\n  font = font || _platform.DEFAULT_FONT;\n  var cacheOfFont = textWidthCache[font];\n\n  if (!cacheOfFont) {\n    cacheOfFont = textWidthCache[font] = new _LRU.default(500);\n  }\n\n  var width = cacheOfFont.get(text);\n\n  if (width == null) {\n    width = _platform.platformApi.measureText(text, font).width;\n    cacheOfFont.put(text, width);\n  }\n\n  return width;\n}\n\nfunction innerGetBoundingRect(text, font, textAlign, textBaseline) {\n  var width = getWidth(text, font);\n  var height = getLineHeight(font);\n  var x = adjustTextX(0, width, textAlign);\n  var y = adjustTextY(0, height, textBaseline);\n  var rect = new _BoundingRect.default(x, y, width, height);\n  return rect;\n}\n\nfunction getBoundingRect(text, font, textAlign, textBaseline) {\n  var textLines = ((text || '') + '').split('\\n');\n  var len = textLines.length;\n\n  if (len === 1) {\n    return innerGetBoundingRect(textLines[0], font, textAlign, textBaseline);\n  } else {\n    var uniondRect = new _BoundingRect.default(0, 0, 0, 0);\n\n    for (var i = 0; i < textLines.length; i++) {\n      var rect = innerGetBoundingRect(textLines[i], font, textAlign, textBaseline);\n      i === 0 ? uniondRect.copy(rect) : uniondRect.union(rect);\n    }\n\n    return uniondRect;\n  }\n}\n\nfunction adjustTextX(x, width, textAlign) {\n  if (textAlign === 'right') {\n    x -= width;\n  } else if (textAlign === 'center') {\n    x -= width / 2;\n  }\n\n  return x;\n}\n\nfunction adjustTextY(y, height, verticalAlign) {\n  if (verticalAlign === 'middle') {\n    y -= height / 2;\n  } else if (verticalAlign === 'bottom') {\n    y -= height;\n  }\n\n  return y;\n}\n\nfunction getLineHeight(font) {\n  return getWidth('国', font);\n}\n\nfunction measureText(text, font) {\n  return _platform.platformApi.measureText(text, font);\n}\n\nfunction parsePercent(value, maxValue) {\n  if (typeof value === 'string') {\n    if (value.lastIndexOf('%') >= 0) {\n      return parseFloat(value) / 100 * maxValue;\n    }\n\n    return parseFloat(value);\n  }\n\n  return value;\n}\n\nfunction calculateTextPosition(out, opts, rect) {\n  var textPosition = opts.position || 'inside';\n  var distance = opts.distance != null ? opts.distance : 5;\n  var height = rect.height;\n  var width = rect.width;\n  var halfHeight = height / 2;\n  var x = rect.x;\n  var y = rect.y;\n  var textAlign = 'left';\n  var textVerticalAlign = 'top';\n\n  if (textPosition instanceof Array) {\n    x += parsePercent(textPosition[0], rect.width);\n    y += parsePercent(textPosition[1], rect.height);\n    textAlign = null;\n    textVerticalAlign = null;\n  } else {\n    switch (textPosition) {\n      case 'left':\n        x -= distance;\n        y += halfHeight;\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'right':\n        x += distance + width;\n        y += halfHeight;\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'top':\n        x += width / 2;\n        y -= distance;\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n\n      case 'bottom':\n        x += width / 2;\n        y += height + distance;\n        textAlign = 'center';\n        break;\n\n      case 'inside':\n        x += width / 2;\n        y += halfHeight;\n        textAlign = 'center';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'insideLeft':\n        x += distance;\n        y += halfHeight;\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'insideRight':\n        x += width - distance;\n        y += halfHeight;\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'insideTop':\n        x += width / 2;\n        y += distance;\n        textAlign = 'center';\n        break;\n\n      case 'insideBottom':\n        x += width / 2;\n        y += height - distance;\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n\n      case 'insideTopLeft':\n        x += distance;\n        y += distance;\n        break;\n\n      case 'insideTopRight':\n        x += width - distance;\n        y += distance;\n        textAlign = 'right';\n        break;\n\n      case 'insideBottomLeft':\n        x += distance;\n        y += height - distance;\n        textVerticalAlign = 'bottom';\n        break;\n\n      case 'insideBottomRight':\n        x += width - distance;\n        y += height - distance;\n        textAlign = 'right';\n        textVerticalAlign = 'bottom';\n        break;\n    }\n  }\n\n  out = out || {};\n  out.x = x;\n  out.y = y;\n  out.align = textAlign;\n  out.verticalAlign = textVerticalAlign;\n  return out;\n}","map":{"version":3,"names":["textWidthCache","getWidth","text","font","DEFAULT_FONT","cacheOfFont","LRU","width","get","platformApi","measureText","put","innerGetBoundingRect","textAlign","textBaseline","height","getLineHeight","x","adjustTextX","y","adjustTextY","rect","BoundingRect","getBoundingRect","textLines","split","len","length","uniondRect","i","copy","union","verticalAlign","parsePercent","value","maxValue","lastIndexOf","parseFloat","calculateTextPosition","out","opts","textPosition","position","distance","halfHeight","textVerticalAlign","Array","align"],"sources":["C:/Users/Z/Desktop/efficient/node_modules/zrender/lib/contain/text.js"],"sourcesContent":["import BoundingRect from '../core/BoundingRect.js';\nimport LRU from '../core/LRU.js';\nimport { DEFAULT_FONT, platformApi } from '../core/platform.js';\nvar textWidthCache = {};\nexport function getWidth(text, font) {\n    font = font || DEFAULT_FONT;\n    var cacheOfFont = textWidthCache[font];\n    if (!cacheOfFont) {\n        cacheOfFont = textWidthCache[font] = new LRU(500);\n    }\n    var width = cacheOfFont.get(text);\n    if (width == null) {\n        width = platformApi.measureText(text, font).width;\n        cacheOfFont.put(text, width);\n    }\n    return width;\n}\nexport function innerGetBoundingRect(text, font, textAlign, textBaseline) {\n    var width = getWidth(text, font);\n    var height = getLineHeight(font);\n    var x = adjustTextX(0, width, textAlign);\n    var y = adjustTextY(0, height, textBaseline);\n    var rect = new BoundingRect(x, y, width, height);\n    return rect;\n}\nexport function getBoundingRect(text, font, textAlign, textBaseline) {\n    var textLines = ((text || '') + '').split('\\n');\n    var len = textLines.length;\n    if (len === 1) {\n        return innerGetBoundingRect(textLines[0], font, textAlign, textBaseline);\n    }\n    else {\n        var uniondRect = new BoundingRect(0, 0, 0, 0);\n        for (var i = 0; i < textLines.length; i++) {\n            var rect = innerGetBoundingRect(textLines[i], font, textAlign, textBaseline);\n            i === 0 ? uniondRect.copy(rect) : uniondRect.union(rect);\n        }\n        return uniondRect;\n    }\n}\nexport function adjustTextX(x, width, textAlign) {\n    if (textAlign === 'right') {\n        x -= width;\n    }\n    else if (textAlign === 'center') {\n        x -= width / 2;\n    }\n    return x;\n}\nexport function adjustTextY(y, height, verticalAlign) {\n    if (verticalAlign === 'middle') {\n        y -= height / 2;\n    }\n    else if (verticalAlign === 'bottom') {\n        y -= height;\n    }\n    return y;\n}\nexport function getLineHeight(font) {\n    return getWidth('国', font);\n}\nexport function measureText(text, font) {\n    return platformApi.measureText(text, font);\n}\nexport function parsePercent(value, maxValue) {\n    if (typeof value === 'string') {\n        if (value.lastIndexOf('%') >= 0) {\n            return parseFloat(value) / 100 * maxValue;\n        }\n        return parseFloat(value);\n    }\n    return value;\n}\nexport function calculateTextPosition(out, opts, rect) {\n    var textPosition = opts.position || 'inside';\n    var distance = opts.distance != null ? opts.distance : 5;\n    var height = rect.height;\n    var width = rect.width;\n    var halfHeight = height / 2;\n    var x = rect.x;\n    var y = rect.y;\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n    if (textPosition instanceof Array) {\n        x += parsePercent(textPosition[0], rect.width);\n        y += parsePercent(textPosition[1], rect.height);\n        textAlign = null;\n        textVerticalAlign = null;\n    }\n    else {\n        switch (textPosition) {\n            case 'left':\n                x -= distance;\n                y += halfHeight;\n                textAlign = 'right';\n                textVerticalAlign = 'middle';\n                break;\n            case 'right':\n                x += distance + width;\n                y += halfHeight;\n                textVerticalAlign = 'middle';\n                break;\n            case 'top':\n                x += width / 2;\n                y -= distance;\n                textAlign = 'center';\n                textVerticalAlign = 'bottom';\n                break;\n            case 'bottom':\n                x += width / 2;\n                y += height + distance;\n                textAlign = 'center';\n                break;\n            case 'inside':\n                x += width / 2;\n                y += halfHeight;\n                textAlign = 'center';\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideLeft':\n                x += distance;\n                y += halfHeight;\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideRight':\n                x += width - distance;\n                y += halfHeight;\n                textAlign = 'right';\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideTop':\n                x += width / 2;\n                y += distance;\n                textAlign = 'center';\n                break;\n            case 'insideBottom':\n                x += width / 2;\n                y += height - distance;\n                textAlign = 'center';\n                textVerticalAlign = 'bottom';\n                break;\n            case 'insideTopLeft':\n                x += distance;\n                y += distance;\n                break;\n            case 'insideTopRight':\n                x += width - distance;\n                y += distance;\n                textAlign = 'right';\n                break;\n            case 'insideBottomLeft':\n                x += distance;\n                y += height - distance;\n                textVerticalAlign = 'bottom';\n                break;\n            case 'insideBottomRight':\n                x += width - distance;\n                y += height - distance;\n                textAlign = 'right';\n                textVerticalAlign = 'bottom';\n                break;\n        }\n    }\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}